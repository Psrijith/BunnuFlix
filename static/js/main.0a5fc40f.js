/*! For license information please see main.0a5fc40f.js.LICENSE.txt */
!function(){var e={262:function(e){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,a;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!==i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(a=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!==i--;)if(!Object.prototype.hasOwnProperty.call(n,a[i]))return!1;for(i=r;0!==i--;){var o=a[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}},110:function(e,t,n){"use strict";var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),y=0;y<o.length;++y){var m=o[y];if(!a[m]&&(!r||!r[m])&&(!v||!v[m])&&(!u||!u[m])){var g=h(n,m);try{c(t,m,g)}catch(k){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case v:case s:return e;default:return t}}case i:return t}}}function _(e){return b(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=y,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return _(e)||b(e)===l},t.isConcurrentMode=_,t.isContextConsumer=function(e){return b(e)===c},t.isContextProvider=function(e){return b(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return b(e)===h},t.isFragment=function(e){return b(e)===a},t.isLazy=function(e){return b(e)===y},t.isMemo=function(e){return b(e)===v},t.isPortal=function(e){return b(e)===i},t.isProfiler=function(e){return b(e)===u},t.isStrictMode=function(e){return b(e)===o},t.isSuspense=function(e){return b(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===w||e.$$typeof===m)},t.typeOf=b},309:function(e,t,n){"use strict";e.exports=n(746)},101:function(e,t,n){n(288),e.exports=self.fetch.bind(self)},102:function(e){function t(e,t){e.onload=function(){this.onerror=this.onload=null,t(null,e)},e.onerror=function(){this.onerror=this.onload=null,t(new Error("Failed to load "+this.src),e)}}function n(e,t){e.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,t(null,e))}}e.exports=function(e,r,i){var a=document.head||document.getElementsByTagName("head")[0],o=document.createElement("script");"function"===typeof r&&(i=r,r={}),r=r||{},i=i||function(){},o.type=r.type||"text/javascript",o.charset=r.charset||"utf8",o.async=!("async"in r)||!!r.async,o.src=e,r.attrs&&function(e,t){for(var n in t)e.setAttribute(n,t[n])}(o,r.attrs),r.text&&(o.text=""+r.text),("onload"in o?t:n)(o,i),o.onload||t(o,i),a.appendChild(o)}},453:function(e,t,n){"use strict";var r,i,a,o=n(61).default,u=n(156).default,s=n(861).default,c=n(215).default,l=["year"];i=[n(101)],r=function(e){function t(e){var t=e&&e.message?e.message:e;console.warn("movie-trailer: ".concat(t))}function n(e){if(!e.ok)throw new Error(e.statusText);return e}function r(e){return encodeURI("https://www.youtube.com/watch?v="+e)}function i(r,a){var o="https://api.themoviedb.org"+encodeURI("/3/search/movie?api_key="+a.apiKey+"&query="+r+(null===a.year?"":"&year="+a.year)+(null===a.language?"":"&language="+a.language));return e(o,{method:"GET"}).then(n).then((function(e){return e.json()})).then((function(e){if("undefined"!==typeof e.status_message)throw new TypeError(e.status_message);if(0===e.results.length){if(null!==a.year){a.year;var t=c(a,l);return i(r,t)}throw new Error("No TMDB Movie found with that search query, try searching https://www.themoviedb.org/search?query=".concat(encodeURIComponent(r)," to verify one exists"))}return e.results[0].id})).catch((function(e){return t(e),null}))}function a(i,a){var o="https://api.themoviedb.org"+encodeURI("/3/movie/"+i+"/videos?api_key="+a.apiKey+(null===a.language?"":"&language="+a.language));return e(o,{method:"GET"}).then(n).then((function(e){return e.json()})).then((function(e){if("undefined"!==typeof e.status_message)throw new TypeError("movie-trailer: ".concat(e.status_message));if(0===e.results.length)throw new Error("No trailers found for that TMDB ID");var t=e.results;return t=t.map((function(e){return e.key})),a.id||(t=t.map((function(e){return r(e)}))),a.multi?s(new Set(t)):t[0]})).catch((function(e){return t(e),null}))}function f(e,t,n,r){return h.apply(this,arguments)}function h(){return(h=u(o().mark((function e(n,r,u,s){var c,l,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c={multi:!1,id:!1,year:null,language:null,apiKey:"9d2bff12ed955c7f1f74b83187f188ae"},r||(r={}),"string"===typeof n||r.tmdbId){e.next=6;break}throw new Error("Expected first parameter to be a movie or TMDB ID (string)");case 6:"function"===typeof r?(u=r,r=null):"boolean"===typeof r||"true"===r?c.multi=r:"string"===typeof r||"number"===typeof r?(c.year=r,"function"===typeof s&&("boolean"===typeof u||"string"===typeof u&&"true"===u)&&(c.multi=u,u=s)):"object"===typeof r&&(c=Object.assign(c,r));case 7:if("function"!==typeof u&&(u=null),!c.tmdbId){e.next=12;break}e.t0=c.tmdbId,e.next=15;break;case 12:return e.next=14,i(n,c).catch((function(e){return t(e),null}));case 14:e.t0=e.sent;case 15:if(l=e.t0){e.next=18;break}return e.abrupt("return",null);case 18:if(f=a(l,c)){e.next=21;break}return e.abrupt("return",null);case 21:if(!u){e.next=23;break}return e.abrupt("return",f.then((function(e){return u(null,e)})).catch((function(e){return u(e,null)})));case 23:return e.abrupt("return",f);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return f},void 0===(a="function"===typeof r?r.apply(t,i):r)||(e.exports=a)},888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function B(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case S:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){J(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Ee=null;function Se(e){if(e=ki(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=bi(t),_e(e.stateNode,e.type,t))}}function Ie(e){xe?Ee?Ee.push(e):Ee=[e]:xe=e}function Te(){if(xe){var e=xe,t=Ee;if(Ee=xe=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Pe=!1;function Ae(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Ce(e,t,n)}finally{Pe=!1,(null!==xe||null!==Ee)&&(Ne(),Te())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=bi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(l)try{var De={};Object.defineProperty(De,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(le){Oe=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,je=null,Ve={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(Ve,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(qe(e)!==e)throw Error(a(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,_t,xt,Et,St,It=!1,Tt=[],Ct=null,Nt=null,Pt=null,At=new Map,Rt=new Map,Ot=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void St(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function jt(e,t,n){Ut(e)&&n.delete(t)}function Vt(){It=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==Pt&&Ut(Pt)&&(Pt=null),At.forEach(jt),Rt.forEach(jt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,It||(It=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function qt(e){function t(t){return Bt(t,e)}if(0<Tt.length){Bt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==Nt&&Bt(Nt,e),null!==Pt&&Bt(Pt,e),At.forEach(t),Rt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ft(n),null===n.blockedOn&&Ot.shift()}var zt=w.ReactCurrentBatchConfig,Wt=!0;function Kt(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=1,Ht(e,t,n,r)}finally{kt=i,zt.transition=a}}function Gt(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=4,Ht(e,t,n,r)}finally{kt=i,zt.transition=a}}function Ht(e,t,n,r){if(Wt){var i=Yt(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return Pt=Mt(Pt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return At.set(a,Mt(At.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&bt(a),null===(a=Yt(e,t,n,r))&&Wr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=be(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),yn=an(F({},fn,{relatedTarget:0})),mn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),wn=an(F({},cn,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function Sn(){return En}var In=F({},fn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(In),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Pn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(An),On=[9,13,27,32],Dn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!Dn||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),jn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Kn(e,t,n,r){Ie(r),0<(t=Gr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Hn=null;function Qn(e){Ur(e,0)}function Yn(e){if(H(wi(e)))return e}function $n(e,t){if("change"===e)return t}var Jn=!1;if(l){var Xn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Hn=Gn=null)}function nr(e){if("value"===e.propertyName&&Yn(Hn)){var t=[];Kn(t,Hn,e,be(e)),Ae(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Hn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==Q(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Gr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},xr={},Er={};function Sr(e){if(xr[e])return xr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return xr[e]=n[t];return e}l&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Ir=Sr("animationend"),Tr=Sr("animationiteration"),Cr=Sr("animationstart"),Nr=Sr("transitionend"),Pr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Pr.set(e,t),s(t,[e])}for(var Or=0;Or<Ar.length;Or++){var Dr=Ar[Or];Rr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Rr(Ir,"onAnimationEnd"),Rr(Tr,"onAnimationIteration"),Rr(Cr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,je=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Vr("selectionchange",!1,t))}}function zr(e,t,n,r){switch($t(t)){case 1:var i=Kt;break;case 4:i=Gt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Ae((function(){var r=a,i=be(n),o=[];e:{var u=Pr.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=yn;break;case"focusout":c="blur",s=yn;break;case"beforeblur":case"afterblur":s=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Ir:case Tr:case Cr:s=mn;break;case Nr:s=Pn;break;case"scroll":s=hn;break;case"wheel":s=Rn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Re(p,h))&&l.push(Kr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:wi(s),d=null==c?u:wi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Hr(d))p++;for(d=0,v=h;v;v=Hr(v))d++;for(;0<p-d;)l=Hr(l),p--;for(;0<d-p;)h=Hr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Hr(l),h=Hr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?wi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=$n;else if(Wn(u))if(Jn)y=or;else{y=ir;var m=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=ar);switch(y&&(y=y(e,r))?Kn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?wi(r):window,e){case"focusin":(Wn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,wr(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":wr(o,n,i)}var g;if(Dn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else qn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==k?"onCompositionEnd"===k&&qn&&(g=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,qn=!0)),0<(m=Gr(r,k)).length&&(k=new wn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=Bn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(jn=!0,Un);case"textInput":return(e=t.data)===Un&&jn?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!Dn&&Vn(e,t)?(e=en(),Zt=Xt=Jt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Re(e,n))&&r.unshift(Kr(e,a,i)),null!=(a=Re(e,t))&&r.push(Kr(e,a,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Re(n,a))&&o.unshift(Kr(n,s,u)):i||null!=(s=Re(n,a))&&o.push(Kr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,yi="__reactListeners$"+fi,mi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function bi(e){return e[di]||null}var _i=[],xi=-1;function Ei(e){return{current:e}}function Si(e){0>xi||(e.current=_i[xi],_i[xi]=null,xi--)}function Ii(e,t){xi++,_i[xi]=e.current,e.current=t}var Ti={},Ci=Ei(Ti),Ni=Ei(!1),Pi=Ti;function Ai(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Si(Ni),Si(Ci)}function Di(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Ii(Ci,t),Ii(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,z(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Pi=Ci.current,Ii(Ci,e),Ii(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Pi),r.__reactInternalMemoizedMergedChildContext=e,Si(Ni),Si(Ci),Ii(Ci,e)):Si(Ni),Ii(Ni,n)}var Ui=null,ji=!1,Vi=!1;function Bi(e){null===Ui?Ui=[e]:Ui.push(e)}function qi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,ji=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),He(Ze,qi),i}finally{kt=t,Vi=!1}}return null}var zi=[],Wi=0,Ki=null,Gi=0,Hi=[],Qi=0,Yi=null,$i=1,Ji="";function Xi(e,t){zi[Wi++]=Gi,zi[Wi++]=Ki,Ki=e,Gi=t}function Zi(e,t,n){Hi[Qi++]=$i,Hi[Qi++]=Ji,Hi[Qi++]=Yi,Yi=e;var r=$i;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Ji=a+e}else $i=1<<a|n<<i|r,Ji=e}function ea(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ta(e){for(;e===Ki;)Ki=zi[--Wi],zi[Wi]=null,Gi=zi[--Wi],zi[Wi]=null;for(;e===Yi;)Yi=Hi[--Qi],Hi[Qi]=null,Ji=Hi[--Qi],Hi[Qi]=null,$i=Hi[--Qi],Hi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:$i,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=w.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=Ei(null),ga=null,ka=null,wa=null;function ba(){wa=ka=ga=null}function _a(e){var t=ma.current;Si(ma),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ea(e,t){ga=e,wa=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wu=!0),e.firstContext=null)}function Sa(e){var t=e._currentValue;if(wa!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ia=null;function Ta(e){null===Ia?Ia=[e]:Ia.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Pa=!1;function Aa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Da(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ns)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Pa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Pa=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Fs|=o,e.lanes=o,e.memoizedState=f}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var ja=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ba={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Oa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Oa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Oa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Da(e,i,r))&&(rc(t,e,r,n),La(t,e,r))}};function qa(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function za(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Sa(a):(i=Ri(t)?Pi:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ai(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ba,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ba.enqueueReplaceState(t,t.state,null)}function Ka(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ja,Aa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Sa(a):(a=Ri(t)?Pi:Ci.current,i.context=Ai(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ba.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ga(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===ja&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ha(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ga(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Ga(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Ga(e,null,t),n.return=e,n;case _:return(t=jc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Ha(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case R:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Ha(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Ha(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),ia&&Xi(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Xi(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),ia&&Xi(i,v),c}function y(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),ia&&Xi(i,y),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return ia&&Xi(i,y),l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Xi(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ga(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Mc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Lc(o.type,o.key,o.props,null,r.mode,s)).ref=Ga(r,a,o),s.return=r,r=s)}return u(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=jc(o,r.mode,s)).return=r,r=a}return u(r);case R:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return y(r,a,o,s);Ha(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Uc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var $a=Ya(!0),Ja=Ya(!1),Xa={},Za=Ei(Xa),eo=Ei(Xa),to=Ei(Xa);function no(e){if(e===Xa)throw Error(a(174));return e}function ro(e,t){switch(Ii(to,t),Ii(eo,e),Ii(Za,Xa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Za),Ii(Za,t)}function io(){Si(Za),Si(eo),Si(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ii(eo,e),Ii(Za,n))}function oo(e){eo.current===e&&(Si(Za),Si(eo))}var uo=Ei(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=w.ReactCurrentDispatcher,ho=w.ReactCurrentBatchConfig,po=0,vo=null,yo=null,mo=null,go=!1,ko=!1,wo=0,bo=0;function _o(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Eo(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,wo=0,25<=o)throw Error(a(301));o+=1,mo=yo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==yo&&null!==yo.next,po=0,mo=yo=vo=null,go=!1,t)throw Error(a(300));return e}function So(){var e=0!==wo;return wo=0,e}function Io(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?vo.memoizedState=mo=e:mo=mo.next=e,mo}function To(){if(null===yo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===mo?vo.memoizedState:mo.next;if(null!==t)mo=t,yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===mo?vo.memoizedState=mo=e:mo=mo.next=e}return mo}function Co(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Fs|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(wu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Fs|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Po(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(wu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ao(){}function Ro(e,t){var n=vo,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,wu=!0),r=r.queue,Wo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,jo(9,Do.bind(null,n,r,i,t),void 0,null),null===Ps)throw Error(a(349));0!==(30&po)||Oo(n,t,i)}return i}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Na(e,1);null!==t&&rc(t,e,1,-1)}function Uo(e){var t=Io();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return To().memoizedState}function Bo(e,t,n,r){var i=Io();vo.flags|=e,i.memoizedState=jo(1|t,n,void 0,void 0===r?null:r)}function qo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==yo){var o=yo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=jo(t,n,a,r))}vo.flags|=e,i.memoizedState=jo(1|t,n,a,r)}function zo(e,t){return Bo(8390656,8,e,t)}function Wo(e,t){return qo(2048,8,e,t)}function Ko(e,t){return qo(4,2,e,t)}function Go(e,t){return qo(4,4,e,t)}function Ho(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qo(4,4,Ho.bind(null,t,e),n)}function Yo(){}function $o(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,wu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Fs|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){rc(n,e,r,tc()),au(n,t,r)}}function nu(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(rc(n,e,r,i=tc()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Sa,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},uu={readContext:Sa,useCallback:function(e,t){return Io().memoizedState=[e,void 0===t?null:t],e},useContext:Sa,useEffect:zo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,Ho.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=Io();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Io();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Io().memoizedState=e},useState:Uo,useDebugValue:Yo,useDeferredValue:function(e){return Io().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),Io().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Io();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ps)throw Error(a(349));0!==(30&po)||Oo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,zo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,jo(9,Do.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Io(),t=Ps.identifierPrefix;if(ia){var n=Ji;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=wo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=bo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Sa,useCallback:$o,useContext:Sa,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Go,useMemo:Jo,useReducer:No,useRef:Vo,useState:function(){return No(Co)},useDebugValue:Yo,useDeferredValue:function(e){return Xo(To(),yo.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Sa,useCallback:$o,useContext:Sa,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Go,useMemo:Jo,useReducer:Po,useRef:Vo,useState:function(){return Po(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=To();return null===yo?t.memoizedState=e:Xo(t,yo.memoizedState,e)},useTransition:function(){return[Po(Co)[0],To().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Oa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ks||(Ks=!0,Gs=r),hu(0,t)},n}function vu(e,t,n){(n=Oa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Hs?Hs=new Set([this]):Hs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function yu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ic.bind(null,e,t,n),t.then(e,e))}function mu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oa(-1,1)).tag=2,Da(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=w.ReactCurrentOwner,wu=!1;function bu(e,t,n,r){t.child=null===e?Ja(t,null,n,r):$a(t,e.child,n,r)}function _u(e,t,n,r,i){n=n.render;var a=t.ref;return Ea(t,i),r=Eo(e,t,n,r,a,i),n=So(),null===e||wu?(ia&&n&&ea(t),t.flags|=1,bu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function xu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Oc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Eu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Ku(e,t,i)}return t.flags|=1,(e=Dc(a,r)).ref=t.ref,e.return=t,t.child=e}function Eu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(wu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ku(e,t,i);0!==(131072&e.flags)&&(wu=!0)}}return Tu(e,t,n,r,i)}function Su(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ii(Ds,Os),Os|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ii(Ds,Os),Os|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ii(Ds,Os),Os|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ii(Ds,Os),Os|=r;return bu(e,t,i,n),t.child}function Iu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Ri(n)?Pi:Ci.current;return a=Ai(t,a),Ea(t,i),n=Eo(e,t,n,r,a,i),r=So(),null===e||wu?(ia&&r&&ea(t),t.flags|=1,bu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function Cu(e,t,n,r,i){if(Ri(n)){var a=!0;Mi(t)}else a=!1;if(Ea(t,i),null===t.stateNode)Wu(e,t),za(t,n,r),Ka(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Sa(c):c=Ai(t,c=Ri(n)?Pi:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Wa(t,o,r,c),Pa=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ni.current||Pa?("function"===typeof l&&(Va(t,n,l,r),s=t.memoizedState),(u=Pa||qa(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ra(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ya(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Sa(s):s=Ai(t,s=Ri(n)?Pi:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Wa(t,o,r,s),Pa=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ni.current||Pa?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(c=Pa||qa(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Nu(e,t,n,r,a,i)}function Nu(e,t,n,r,i,a){Iu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ku(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$a(t,e.child,null,a),t.child=$a(t,null,u,a)):bu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Pu(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),ro(e,t.containerInfo)}function Au(e,t,n,r,i){return da(),pa(i),t.flags|=256,bu(e,t,n,r),t.child}var Ru,Ou,Du,Lu,Mu={dehydrated:null,treeContext:null,retryLane:0};function Fu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ii(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Fc(s,i,0,null),e=Mc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Fu(n),t.memoizedState=Mu,e):ju(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Vu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$a(t,e.child,null,u),t.child.memoizedState=Fu(u),t.memoizedState=Mu,o);if(0===(1&t.mode))return Vu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Vu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),wu||s){if(null!==(r=Ps)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),rc(r,e,i,-1))}return yc(),Vu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Hi[Qi++]=$i,Hi[Qi++]=Ji,Hi[Qi++]=Yi,$i=e.id,Ji=e.overflow,Yi=t),t=ju(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Dc(r,u):(u=Mc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Fu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Mu,i}return e=(u=e.child).sibling,i=Dc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function ju(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vu(e,t,n,r){return null!==r&&pa(r),$a(t,e.child,null,n),(e=ju(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function qu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(bu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bu(e,n,t);else if(19===e.tag)Bu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ii(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),qu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}qu(t,!0,n,null,a);break;case"together":qu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ku(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fs|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hu(t),null;case 1:case 17:return Ri(t.type)&&Oi(),Hu(t),null;case 3:return r=t.stateNode,io(),Si(Ni),Si(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(uc(aa),aa=null))),Ou(e,t),Hu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Du(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Hu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":$(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&jr("scroll",r)}switch(n){case"input":G(r),Z(r,o,!0);break;case"textarea":G(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Ru(e,t,!1,!1),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&jr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hu(t),null;case 6:if(e&&null!=t.stateNode)Lu(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Hu(t),null;case 13:if(Si(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hu(t),o=!1}else null!==aa&&(uc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ls&&(Ls=3):yc())),null!==t.updateQueue&&(t.flags|=4),Hu(t),null);case 4:return io(),Ou(e,t),null===e&&qr(t.stateNode.containerInfo),Hu(t),null;case 10:return _a(t.type._context),Hu(t),null;case 19:if(Si(uo),null===(o=t.memoizedState))return Hu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Gu(o,!1);else{if(0!==Ls||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Gu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ii(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>zs&&(t.flags|=128,r=!0,Gu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Hu(t),null}else 2*Je()-o.renderingStartTime>zs&&1073741824!==n&&(t.flags|=128,r=!0,Gu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=uo.current,Ii(uo,r?1&n|2:1&n),t):(Hu(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Os)&&(Hu(t),6&t.subtreeFlags&&(t.flags|=8192)):Hu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Yu(e,t){switch(ta(t),t.tag){case 1:return Ri(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Si(Ni),Si(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Si(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(uo),null;case 4:return io(),null;case 10:return _a(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ru=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ou=function(){},Du=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&jr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var $u=!1,Ju=!1,Xu="function"===typeof WeakSet?WeakSet:Set,Zu=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ts(t,n,a)}i=i.next}while(i!==r)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}var fs=null,hs=!1;function ds(e,t,n){for(n=n.child;null!==n;)ps(e,t,n),n=n.sibling}function ps(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Ju||es(n,t);case 6:var r=fs,i=hs;fs=null,ds(e,t,n),hs=i,null!==(fs=r)&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fs.removeChild(n.stateNode));break;case 18:null!==fs&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),qt(e)):si(fs,n.stateNode));break;case 4:r=fs,i=hs,fs=n.stateNode.containerInfo,hs=!0,ds(e,t,n),fs=r,hs=i;break;case 0:case 11:case 14:case 15:if(!Ju&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&ts(n,t,o),i=i.next}while(i!==r)}ds(e,t,n);break;case 1:if(!Ju&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Sc(n,t,u)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?(Ju=(r=Ju)||null!==n.memoizedState,ds(e,t,n),Ju=r):ds(e,t,n);break;default:ds(e,t,n)}}function vs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xu),t.forEach((function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ys(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:fs=s.stateNode,hs=!1;break e;case 3:case 4:fs=s.stateNode.containerInfo,hs=!0;break e}s=s.return}if(null===fs)throw Error(a(160));ps(o,u,i),fs=null,hs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Sc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ms(t,e),t=t.sibling}function ms(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ys(t,e),gs(e),4&r){try{rs(3,e,e.return),is(3,e)}catch(y){Sc(e,e.return,y)}try{rs(5,e,e.return)}catch(y){Sc(e,e.return,y)}}break;case 1:ys(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(ys(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(y){Sc(e,e.return,y)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&J(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?ye(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":X(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(y){Sc(e,e.return,y)}}break;case 6:if(ys(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){Sc(e,e.return,y)}}break;case 3:if(ys(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(y){Sc(e,e.return,y)}break;case 4:default:ys(t,e),gs(e);break;case 13:ys(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(qs=Je())),4&r&&vs(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Ju=(l=Ju)||f,ys(t,e),Ju=l):ys(t,e),gs(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Zu=e,f=e.child;null!==f;){for(h=Zu=f;null!==Zu;){switch(p=(d=Zu).child,d.tag){case 0:case 11:case 14:case 15:rs(4,d,d.return);break;case 1:es(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){Sc(r,n,y)}}break;case 5:es(d,d.return);break;case 22:if(null!==d.memoizedState){_s(h);continue}}null!==p?(p.return=d,Zu=p):_s(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(y){Sc(e,e.return,y)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(y){Sc(e,e.return,y)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ys(t,e),gs(e),4&r&&vs(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(us(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ls(e,ss(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cs(e,ss(e),o);break;default:throw Error(a(161))}}catch(u){Sc(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ks(e,t,n){Zu=e,ws(e,t,n)}function ws(e,t,n){for(var r=0!==(1&e.mode);null!==Zu;){var i=Zu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$u;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Ju;u=$u;var c=Ju;if($u=o,(Ju=s)&&!c)for(Zu=i;null!==Zu;)s=(o=Zu).child,22===o.tag&&null!==o.memoizedState?xs(i):null!==s?(s.return=o,Zu=s):xs(i);for(;null!==a;)Zu=a,ws(a,t,n),a=a.sibling;Zu=i,$u=u,Ju=c}bs(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zu=a):bs(e)}}function bs(e){for(;null!==Zu;){var t=Zu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ju||is(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ju)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&qt(h)}}}break;default:throw Error(a(163))}Ju||512&t.flags&&as(t)}catch(d){Sc(t,t.return,d)}}if(t===e){Zu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zu=n;break}Zu=t.return}}function _s(e){for(;null!==Zu;){var t=Zu;if(t===e){Zu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zu=n;break}Zu=t.return}}function xs(e){for(;null!==Zu;){var t=Zu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{is(4,t)}catch(s){Sc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Sc(t,i,s)}}var a=t.return;try{as(t)}catch(s){Sc(t,a,s)}break;case 5:var o=t.return;try{as(t)}catch(s){Sc(t,o,s)}}}catch(s){Sc(t,t.return,s)}if(t===e){Zu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Zu=u;break}Zu=t.return}}var Es,Ss=Math.ceil,Is=w.ReactCurrentDispatcher,Ts=w.ReactCurrentOwner,Cs=w.ReactCurrentBatchConfig,Ns=0,Ps=null,As=null,Rs=0,Os=0,Ds=Ei(0),Ls=0,Ms=null,Fs=0,Us=0,js=0,Vs=null,Bs=null,qs=0,zs=1/0,Ws=null,Ks=!1,Gs=null,Hs=null,Qs=!1,Ys=null,$s=0,Js=0,Xs=null,Zs=-1,ec=0;function tc(){return 0!==(6&Ns)?Je():-1!==Zs?Zs:Zs=Je()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Ns)&&0!==Rs?Rs&-Rs:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function rc(e,t,n,r){if(50<Js)throw Js=0,Xs=null,Error(a(185));mt(e,n,r),0!==(2&Ns)&&e===Ps||(e===Ps&&(0===(2&Ns)&&(Us|=n),4===Ls&&sc(e,Rs)),ic(e,r),1===n&&0===Ns&&0===(1&t.mode)&&(zs=Je()+500,ji&&qi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ps?Rs:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){ji=!0,Bi(e)}(cc.bind(null,e)):Bi(cc.bind(null,e)),oi((function(){0===(6&Ns)&&qi()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Pc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zs=-1,ec=0,0!==(6&Ns))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===Ps?Rs:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Ns;Ns|=2;var o=vc();for(Ps===e&&Rs===t||(Ws=null,zs=Je()+500,dc(e,t));;)try{kc();break}catch(s){pc(e,s)}ba(),Is.current=o,Ns=i,null!==As?t=0:(Ps=null,Rs=0,t=Ls)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ms,dc(e,0),sc(e,r),ic(e,Je()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ms,dc(e,0),sc(e,r),ic(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:_c(e,Bs,Ws);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=qs+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_c.bind(null,e,Bs,Ws),t);break}_c(e,Bs,Ws);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ss(r/1960))-r)){e.timeoutHandle=ri(_c.bind(null,e,Bs,Ws),r);break}_c(e,Bs,Ws);break;default:throw Error(a(329))}}}return ic(e,Je()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Vs;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Bs,Bs=n,null!==t&&uc(t)),e}function uc(e){null===Bs?Bs=e:Bs.push.apply(Bs,e)}function sc(e,t){for(t&=~js,t&=~Us,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Ns))throw Error(a(327));xc();var t=ht(e,0);if(0===(1&t))return ic(e,Je()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ms,dc(e,0),sc(e,t),ic(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,Bs,Ws),ic(e,Je()),null}function lc(e,t){var n=Ns;Ns|=1;try{return e(t)}finally{0===(Ns=n)&&(zs=Je()+500,ji&&qi())}}function fc(e){null!==Ys&&0===Ys.tag&&0===(6&Ns)&&xc();var t=Ns;Ns|=1;var n=Cs.transition,r=kt;try{if(Cs.transition=null,kt=1,e)return e()}finally{kt=r,Cs.transition=n,0===(6&(Ns=t))&&qi()}}function hc(){Os=Ds.current,Si(Ds)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==As)for(n=As.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:io(),Si(Ni),Si(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Si(uo);break;case 10:_a(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Ps=e,As=e=Dc(e.current,null),Rs=Os=t,Ls=0,Ms=null,js=Us=Fs=0,Bs=Vs=null,null!==Ia){for(t=0;t<Ia.length;t++)if(null!==(r=(n=Ia[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ia=null}return e}function pc(e,t){for(;;){var n=As;try{if(ba(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,mo=yo=vo=null,ko=!1,wo=0,Ts.current=null,null===n||null===n.return){Ls=1,Ms=t,As=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Rs,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=mu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&yu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){yu(o,l,t),yc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var m=mu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gu(m,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Ls&&(Ls=2),null===Vs?Vs=[o]:Vs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Hs||!Hs.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(w){t=w,As===n&&null!==n&&(As=n=n.return);continue}break}}function vc(){var e=Is.current;return Is.current=ou,null===e?ou:e}function yc(){0!==Ls&&3!==Ls&&2!==Ls||(Ls=4),null===Ps||0===(268435455&Fs)&&0===(268435455&Us)||sc(Ps,Rs)}function mc(e,t){var n=Ns;Ns|=2;var r=vc();for(Ps===e&&Rs===t||(Ws=null,dc(e,t));;)try{gc();break}catch(i){pc(e,i)}if(ba(),Ns=n,Is.current=r,null!==As)throw Error(a(261));return Ps=null,Rs=0,Ls}function gc(){for(;null!==As;)wc(As)}function kc(){for(;null!==As&&!Ye();)wc(As)}function wc(e){var t=Es(e.alternate,e,Os);e.memoizedProps=e.pendingProps,null===t?bc(e):As=t,Ts.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qu(n,t,Os)))return void(As=n)}else{if(null!==(n=Yu(n,t)))return n.flags&=32767,void(As=n);if(null===e)return Ls=6,void(As=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(As=t);As=t=e}while(null!==t);0===Ls&&(Ls=5)}function _c(e,t,n){var r=kt,i=Cs.transition;try{Cs.transition=null,kt=1,function(e,t,n,r){do{xc()}while(null!==Ys);if(0!==(6&Ns))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ps&&(As=Ps=null,Rs=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qs||(Qs=!0,Pc(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cs.transition,Cs.transition=null;var u=kt;kt=1;var s=Ns;Ns|=4,Ts.current=null,function(e,t){if(ei=Wt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Zu=t;null!==Zu;)if(e=(t=Zu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zu=e;else for(;null!==Zu;){t=Zu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ya(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(a(163))}}catch(b){Sc(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Zu=e;break}Zu=t.return}v=ns,ns=!1}(e,n),ms(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,ks(n,e,i),$e(),Ns=s,kt=u,Cs.transition=o}else e.current=n;if(Qs&&(Qs=!1,Ys=e,$s=i),o=e.pendingLanes,0===o&&(Hs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ks)throw Ks=!1,e=Gs,Gs=null,e;0!==(1&$s)&&0!==e.tag&&xc(),o=e.pendingLanes,0!==(1&o)?e===Xs?Js++:(Js=0,Xs=e):Js=0,qi()}(e,t,n,r)}finally{Cs.transition=i,kt=r}return null}function xc(){if(null!==Ys){var e=wt($s),t=Cs.transition,n=kt;try{if(Cs.transition=null,kt=16>e?16:e,null===Ys)var r=!1;else{if(e=Ys,Ys=null,$s=0,0!==(6&Ns))throw Error(a(331));var i=Ns;for(Ns|=4,Zu=e.current;null!==Zu;){var o=Zu,u=o.child;if(0!==(16&Zu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Zu=l;null!==Zu;){var f=Zu;switch(f.tag){case 0:case 11:case 15:rs(8,f,o)}var h=f.child;if(null!==h)h.return=f,Zu=h;else for(;null!==Zu;){var d=(f=Zu).sibling,p=f.return;if(os(f),f===l){Zu=null;break}if(null!==d){d.return=p,Zu=d;break}Zu=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Zu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Zu=u;else e:for(;null!==Zu;){if(0!==(2048&(o=Zu).flags))switch(o.tag){case 0:case 11:case 15:rs(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zu=g;break e}Zu=o.return}}var k=e.current;for(Zu=k;null!==Zu;){var w=(u=Zu).child;if(0!==(2064&u.subtreeFlags)&&null!==w)w.return=u,Zu=w;else e:for(u=k;null!==Zu;){if(0!==(2048&(s=Zu).flags))try{switch(s.tag){case 0:case 11:case 15:is(9,s)}}catch(_){Sc(s,s.return,_)}if(s===u){Zu=null;break e}var b=s.sibling;if(null!==b){b.return=s.return,Zu=b;break e}Zu=s.return}}if(Ns=i,qi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{kt=n,Cs.transition=t}}return!1}function Ec(e,t,n){e=Da(e,t=pu(0,t=lu(n,t),1),1),t=tc(),null!==e&&(mt(e,1,t),ic(e,t))}function Sc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hs||!Hs.has(r))){t=Da(t,e=vu(t,e=lu(n,e),1),1),e=tc(),null!==t&&(mt(t,1,e),ic(t,e));break}}t=t.return}}function Ic(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Ps===e&&(Rs&n)===n&&(4===Ls||3===Ls&&(130023424&Rs)===Rs&&500>Je()-qs?dc(e,0):js|=n),ic(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Na(e,t))&&(mt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tc(e,n)}function Pc(e,t){return He(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Ac(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Oc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Mc(n.children,i,o,t);case E:u=8,i|=8;break;case S:return(e=Rc(12,n,t,2|i)).elementType=S,e.lanes=o,e;case N:return(e=Rc(13,n,t,i)).elementType=N,e.lanes=o,e;case P:return(e=Rc(19,n,t,i)).elementType=P,e.lanes=o,e;case O:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:u=10;break e;case T:u=9;break e;case C:u=11;break e;case A:u=14;break e;case R:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Rc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function jc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,i,a,o,u,s){return e=new Vc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Rc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Aa(a),e}function qc(e){if(!e)return Ti;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function zc(e,t,n,r,i,a,o,u,s){return(e=Bc(n,r,!0,e,0,a,0,u,s)).context=qc(null),n=e.current,(a=Oa(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Da(n,a,i),e.current.lanes=i,mt(e,i,r),ic(e,r),e}function Wc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=qc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Da(i,t,o))&&(rc(e,i,o,a),La(e,i,o)),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}Es=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)wu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wu=!1,function(e,t,n){switch(t.tag){case 3:Pu(t),da();break;case 5:ao(t);break;case 1:Ri(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ii(ma,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ii(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Uu(e,t,n):(Ii(uo,1&uo.current),null!==(e=Ku(e,t,n))?e.sibling:null);Ii(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ii(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Su(e,t,n)}return Ku(e,t,n)}(e,t,n);wu=0!==(131072&e.flags)}else wu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wu(e,t),e=t.pendingProps;var i=Ai(t,Ci.current);Ea(t,n),i=Eo(null,t,r,e,i,n);var o=So();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Aa(t),i.updater=Ba,t.stateNode=i,i._reactInternals=t,Ka(t,r,e,n),t=Nu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),bu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===A)return 14}return 2}(r),e=ya(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=_u(null,t,r,e,n);break e;case 14:t=xu(null,t,r,ya(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 3:e:{if(Pu(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ra(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Au(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Au(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ja(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Ku(e,t,n);break e}bu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Iu(e,t),bu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Uu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$a(t,null,r,n):bu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_u(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 7:return bu(e,t,t.pendingProps,n),t.child;case 8:case 12:return bu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ii(ma,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Ku(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Oa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),xa(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}bu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ea(t,n),r=r(i=Sa(i)),t.flags|=1,bu(e,t,r,n),t.child;case 14:return i=ya(r=t.type,t.pendingProps),xu(e,t,r,i=ya(r.type,i),n);case 15:return Eu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ya(r,i),Wu(e,t),t.tag=1,Ri(r)?(e=!0,Mi(t)):e=!1,Ea(t,n),za(t,r,i),Ka(t,r,i,n),Nu(null,t,r,!0,e,n);case 19:return zu(e,t,n);case 22:return Su(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Kc(o);u.call(e)}}Wc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Kc(o);a.call(e)}}var o=zc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,qr(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Kc(s);u.call(e)}}var s=Bc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,qr(8===e.nodeType?e.parentNode:e),fc((function(){Wc(t,s,n,r)})),s}(n,t,e,i,r);return Kc(o)}$c.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Wc(e,t,null,null)},$c.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Wc(null,e,null,null)})),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ft(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,Je()),0===(6&Ns)&&(zs=Je()+500,qi()))}break;case 13:fc((function(){var t=Na(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Hc(e,1)}},_t=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)rc(t,e,134217728,tc());Hc(e,134217728)}},xt=function(e){if(13===e.tag){var t=nc(e),n=Na(e,t);if(null!==n)rc(n,e,t,tc());Hc(e,t)}},Et=function(){return kt},St=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},_e=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=bi(r);if(!i)throw Error(a(90));H(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=lc,Ne=fc;var tl={usingClientEntryPoint:!1,Events:[ki,wi,bi,Ie,Te,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,qr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,qr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var r=n(164);t.s=r.createRoot,r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},459:function(e,t){"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.server_context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen");function m(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case u:case o:case h:case d:return e;default:switch(e=e&&e.$$typeof){case l:case c:case f:case v:case p:case s:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference")},900:function(e,t,n){"use strict";n(459)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var w=k.prototype=new g;w.constructor=k,v(w,m.prototype),w.isPureReactComponent=!0;var b=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!E.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,b(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",b(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function P(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},O={transition:null},D={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:O,ReactCurrentOwner:x};t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)_.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function b(e){if(y=!1,w(e),!v)if(null!==r(c))v=!0,O(_);else{var t=r(l);null!==t&&D(b,t.startTime-e)}}function _(e,n){v=!1,y&&(y=!1,g(I),I=-1),p=!0;var a=d;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),w(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&D(b,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,E=!1,S=null,I=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function P(){if(null!==S){var e=t.unstable_now();C=e;var n=!0;try{n=S(!0,e)}finally{n?x():(E=!1,S=null)}}else E=!1}if("function"===typeof k)x=function(){k(P)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,R=A.port2;A.port1.onmessage=P,x=function(){R.postMessage(null)}}else x=function(){m(P,0)};function O(e){S=e,E||(E=!0,x())}function D(e,n){I=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,O(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(I),I=-1):y=!0,D(b,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,O(_))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},457:function(e){"use strict";var t;t=function(){var e={},t={};return e.on=function(e,n){var r={name:e,handler:n};return t[e]=t[e]||[],t[e].unshift(r),r},e.off=function(e){var n=t[e.name].indexOf(e);-1!==n&&t[e.name].splice(n,1)},e.trigger=function(e,n){var r,i=t[e];if(i)for(r=i.length;r--;)i[r].handler(n)},e},e.exports=t},561:function(e,t,n){"use strict";var r=n(791);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=r.useState,o=r.useEffect,u=r.useLayoutEffect,s=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var l="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,l=r[1];return u((function(){i.value=n,i.getSnapshot=t,c(i)&&l({inst:i})}),[e,n,t]),o((function(){return c(i)&&l({inst:i}),e((function(){c(i)&&l({inst:i})}))}),[e]),s(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},595:function(e,t,n){"use strict";var r=n(791),i=n(248);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=i.useSyncExternalStore,u=r.useRef,s=r.useEffect,c=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var f=u(null);if(null===f.current){var h={hasValue:!1,value:null};f.current=h}else h=f.current;f=c((function(){function e(e){if(!s){if(s=!0,o=e,e=r(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return u=t}return u=e}if(t=u,a(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(o=e,u=n)}var o,u,s=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,i]);var d=o(e,f[0],f[1]);return s((function(){h.hasValue=!0,h.value=d}),[d]),l(d),d}},248:function(e,t,n){"use strict";e.exports=n(561)},327:function(e,t,n){"use strict";e.exports=n(595)},288:function(e,t,n){"use strict";n.r(t),n.d(t,{DOMException:function(){return _},Headers:function(){return l},Request:function(){return m},Response:function(){return w},fetch:function(){return x}});var r="undefined"!==typeof globalThis&&globalThis||"undefined"!==typeof self&&self||"undefined"!==typeof r&&r,i={searchParams:"URLSearchParams"in r,iterable:"Symbol"in r&&"iterator"in Symbol,blob:"FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in r,arrayBuffer:"ArrayBuffer"in r};if(i.arrayBuffer)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};function u(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function s(e){return"string"!==typeof e&&(e=String(e)),e}function c(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return i.iterable&&(t[Symbol.iterator]=function(){return t}),t}function l(e){this.map={},e instanceof l?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function f(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function h(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function d(e){var t=new FileReader,n=h(t);return t.readAsArrayBuffer(e),n}function p(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function v(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"===typeof e?this._bodyText=e:i.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:i.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:i.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():i.arrayBuffer&&i.blob&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=p(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):i.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||o(e))?this._bodyArrayBuffer=p(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i.blob&&(this.blob=function(){var e=f(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=f(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(d)}),this.text=function(){var e=f(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,n=h(t);return t.readAsText(e),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i.formData&&(this.formData=function(){return this.text().then(g)}),this.json=function(){return this.text().then(JSON.parse)},this}l.prototype.append=function(e,t){e=u(e),t=s(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},l.prototype.delete=function(e){delete this.map[u(e)]},l.prototype.get=function(e){return e=u(e),this.has(e)?this.map[e]:null},l.prototype.has=function(e){return this.map.hasOwnProperty(u(e))},l.prototype.set=function(e,t){this.map[u(e)]=s(t)},l.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},l.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),c(e)},l.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),c(e)},l.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),c(e)},i.iterable&&(l.prototype[Symbol.iterator]=l.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function m(e,t){if(!(this instanceof m))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n=(t=t||{}).body;if(e instanceof m){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new l(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new l(t.headers)),this.method=function(e){var t=e.toUpperCase();return y.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),("GET"===this.method||"HEAD"===this.method)&&("no-store"===t.cache||"no-cache"===t.cache)){var r=/([?&])_=[^&]*/;if(r.test(this.url))this.url=this.url.replace(r,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function g(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}})),t}function k(e){var t=new l;return e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}})),t}function w(e,t){if(!(this instanceof w))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new l(t.headers),this.url=t.url||"",this._initBody(e)}m.prototype.clone=function(){return new m(this,{body:this._bodyInit})},v.call(m.prototype),v.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},w.error=function(){var e=new w(null,{status:0,statusText:""});return e.type="error",e};var b=[301,302,303,307,308];w.redirect=function(e,t){if(-1===b.indexOf(t))throw new RangeError("Invalid status code");return new w(null,{status:t,headers:{location:e}})};var _=r.DOMException;try{new _}catch(E){(_=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),_.prototype.constructor=_}function x(e,t){return new Promise((function(n,a){var o=new m(e,t);if(o.signal&&o.signal.aborted)return a(new _("Aborted","AbortError"));var u=new XMLHttpRequest;function c(){u.abort()}u.onload=function(){var e={status:u.status,statusText:u.statusText,headers:k(u.getAllResponseHeaders()||"")};e.url="responseURL"in u?u.responseURL:e.headers.get("X-Request-URL");var t="response"in u?u.response:u.responseText;setTimeout((function(){n(new w(t,e))}),0)},u.onerror=function(){setTimeout((function(){a(new TypeError("Network request failed"))}),0)},u.ontimeout=function(){setTimeout((function(){a(new TypeError("Network request failed"))}),0)},u.onabort=function(){setTimeout((function(){a(new _("Aborted","AbortError"))}),0)},u.open(o.method,function(e){try{return""===e&&r.location.href?r.location.href:e}catch(t){return e}}(o.url),!0),"include"===o.credentials?u.withCredentials=!0:"omit"===o.credentials&&(u.withCredentials=!1),"responseType"in u&&(i.blob?u.responseType="blob":i.arrayBuffer&&o.headers.get("Content-Type")&&-1!==o.headers.get("Content-Type").indexOf("application/octet-stream")&&(u.responseType="arraybuffer")),!t||"object"!==typeof t.headers||t.headers instanceof l?o.headers.forEach((function(e,t){u.setRequestHeader(t,e)})):Object.getOwnPropertyNames(t.headers).forEach((function(e){u.setRequestHeader(e,s(t.headers[e]))})),o.signal&&(o.signal.addEventListener("abort",c),u.onreadystatechange=function(){4===u.readyState&&o.signal.removeEventListener("abort",c)}),u.send("undefined"===typeof o._bodyInit?null:o._bodyInit)}))}x.polyfill=!0,r.fetch||(r.fetch=x,r.Headers=l,r.Request=m,r.Response=w)},364:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(439),a=(r=i)&&r.__esModule?r:{default:r};t.default={pauseVideo:{acceptableStates:[a.default.ENDED,a.default.PAUSED],stateChangeRequired:!1},playVideo:{acceptableStates:[a.default.ENDED,a.default.PLAYING],stateChangeRequired:!1},seekTo:{acceptableStates:[a.default.ENDED,a.default.PLAYING,a.default.PAUSED],stateChangeRequired:!0,timeout:3e3}},e.exports=t.default},398:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(788)),i=u(n(506)),a=u(n(626)),o=u(n(364));function u(e){return e&&e.__esModule?e:{default:e}}var s=(0,r.default)("youtube-player"),c={proxyEvents:function(e){var t={},n=function(n){var r="on"+n.slice(0,1).toUpperCase()+n.slice(1);t[r]=function(t){s('event "%s"',r,t),e.trigger(n,t)}},r=!0,i=!1,o=void 0;try{for(var u,c=a.default[Symbol.iterator]();!(r=(u=c.next()).done);r=!0){n(u.value)}}catch(l){i=!0,o=l}finally{try{!r&&c.return&&c.return()}finally{if(i)throw o}}return t},promisifyPlayer:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={},r=function(r){t&&o.default[r]?n[r]=function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.then((function(e){var t=o.default[r],i=e.getPlayerState(),a=e[r].apply(e,n);return t.stateChangeRequired||Array.isArray(t.acceptableStates)&&-1===t.acceptableStates.indexOf(i)?new Promise((function(n){e.addEventListener("onStateChange",(function r(){var i=e.getPlayerState(),a=void 0;"number"===typeof t.timeout&&(a=setTimeout((function(){e.removeEventListener("onStateChange",r),n()}),t.timeout)),Array.isArray(t.acceptableStates)&&-1!==t.acceptableStates.indexOf(i)&&(e.removeEventListener("onStateChange",r),clearTimeout(a),n())}))})).then((function(){return a})):a}))}:n[r]=function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.then((function(e){return e[r].apply(e,n)}))}},a=!0,u=!1,s=void 0;try{for(var c,l=i.default[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){r(c.value)}}catch(f){u=!0,s=f}finally{try{!a&&l.return&&l.return()}finally{if(u)throw s}}return n}};t.default=c,e.exports=t.default},439:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={BUFFERING:3,ENDED:0,PAUSED:2,PLAYING:1,UNSTARTED:-1,VIDEO_CUED:5},e.exports=t.default},626:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["ready","stateChange","playbackQualityChange","playbackRateChange","error","apiChange","volumeChange"],e.exports=t.default},506:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["cueVideoById","loadVideoById","cueVideoByUrl","loadVideoByUrl","playVideo","pauseVideo","stopVideo","getVideoLoadedFraction","cuePlaylist","loadPlaylist","nextVideo","previousVideo","playVideoAt","setShuffle","setLoop","getPlaylist","getPlaylistIndex","setOption","mute","unMute","isMuted","setVolume","getVolume","seekTo","getPlayerState","getPlaybackRate","setPlaybackRate","getAvailablePlaybackRates","getPlaybackQuality","setPlaybackQuality","getAvailableQualityLevels","getCurrentTime","getDuration","removeEventListener","getVideoUrl","getVideoEmbedCode","getOptions","getOption","addEventListener","destroy","setSize","getIframe"],e.exports=t.default},867:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=u(n(457)),a=u(n(642)),o=u(n(398));function u(e){return e&&e.__esModule?e:{default:e}}var s=void 0;t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=(0,i.default)();if(s||(s=(0,a.default)(u)),t.events)throw new Error("Event handlers cannot be overwritten.");if("string"===typeof e&&!document.getElementById(e))throw new Error('Element "'+e+'" does not exist.');t.events=o.default.proxyEvents(u);var c=new Promise((function(n){"object"===("undefined"===typeof e?"undefined":r(e))&&e.playVideo instanceof Function?n(e):s.then((function(r){var i=new r.Player(e,t);return u.on("ready",(function(){n(i)})),null}))})),l=o.default.promisifyPlayer(c,n);return l.on=u.on,l.off=u.off,l},e.exports=t.default},642:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(102),a=(r=i)&&r.__esModule?r:{default:r};t.default=function(e){return new Promise((function(t){if(window.YT&&window.YT.Player&&window.YT.Player instanceof Function)t(window.YT);else{var n="http:"===window.location.protocol?"http:":"https:";(0,a.default)(n+"//www.youtube.com/iframe_api",(function(t){t&&e.trigger("error",t)}));var r=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){r&&r(),t(window.YT)}}}))},e.exports=t.default},788:function(e,t,n){function r(){var e;try{e=t.storage.debug}catch(n){}return!e&&"undefined"!==typeof process&&"env"in process&&(e={NODE_ENV:"production",PUBLIC_URL:"/BunnuFlix",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.DEBUG),e}(t=e.exports=n(572)).log=function(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,a=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(i++,"%c"===e&&(a=i))})),e.splice(a,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(n){}},t.load=r,t.useColors=function(){if("undefined"!==typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},t.enable(r())},572:function(e,t,n){var r;function i(e){function n(){if(n.enabled){var e=n,i=+new Date,a=i-(r||i);e.diff=a,e.prev=r,e.curr=i,r=i;for(var o=new Array(arguments.length),u=0;u<o.length;u++)o[u]=arguments[u];o[0]=t.coerce(o[0]),"string"!==typeof o[0]&&o.unshift("%O");var s=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;s++;var i=t.formatters[r];if("function"===typeof i){var a=o[s];n=i.call(e,a),o.splice(s,1),s--}return n})),t.formatArgs.call(e,o),(n.log||t.log||console.log.bind(console)).apply(e,o)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),"function"===typeof t.init&&t.init(n),n}(t=e.exports=i.debug=i.default=i).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"===typeof e?e:"").split(/[\s,]+/),r=n.length,i=0;i<r;i++)n[i]&&("-"===(e=n[i].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(426),t.names=[],t.skips=[],t.formatters={}},426:function(e){var t=1e3,n=60*t,r=60*n,i=24*r,a=365.25*i;function o(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,u){u=u||{};var s,c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var o=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!o)return;var u=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return u*a;case"days":case"day":case"d":return u*i;case"hours":case"hour":case"hrs":case"hr":case"h":return u*r;case"minutes":case"minute":case"mins":case"min":case"m":return u*n;case"seconds":case"second":case"secs":case"sec":case"s":return u*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}(e);if("number"===c&&!1===isNaN(e))return u.long?o(s=e,i,"day")||o(s,r,"hour")||o(s,n,"minute")||o(s,t,"second")||s+" ms":function(e){if(e>=i)return Math.round(e/i)+"d";if(e>=r)return Math.round(e/r)+"h";if(e>=n)return Math.round(e/n)+"m";if(e>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},897:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},405:function(e,t,n){var r=n(897);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},156:function(e){function t(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise((function(i,a){var o=e.apply(n,r);function u(e){t(o,i,a,u,s,"next",e)}function s(e){t(o,i,a,u,s,"throw",e)}u(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},498:function(e){e.exports=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},281:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},215:function(e,t,n){var r=n(71);e.exports=function(e,t){if(null==e)return{};var n,i,a=r(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a},e.exports.__esModule=!0,e.exports.default=e.exports},71:function(e){e.exports=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i},e.exports.__esModule=!0,e.exports.default=e.exports},61:function(e,t,n){var r=n(698).default;function i(){"use strict";e.exports=i=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,a=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},u="function"==typeof Symbol?Symbol:{},s=u.iterator||"@@iterator",c=u.asyncIterator||"@@asyncIterator",l=u.toStringTag||"@@toStringTag";function f(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(A){f=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),u=new C(r||[]);return o(a,"_invoke",{value:E(e,n,u)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(A){return{type:"throw",arg:A}}}t.wrap=h;var p={};function v(){}function y(){}function m(){}var g={};f(g,s,(function(){return this}));var k=Object.getPrototypeOf,w=k&&k(k(N([])));w&&w!==n&&a.call(w,s)&&(g=w);var b=m.prototype=v.prototype=Object.create(g);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(i,o,u,s){var c=d(e[i],e,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==r(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,u,s)}),(function(e){n("throw",e,u,s)})):t.resolve(f).then((function(e){l.value=e,u(l)}),(function(e){return n("throw",e,u,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}})}function E(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return P()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=S(o,n);if(u){if(u===p)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=d(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=d(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,p;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function N(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:P}}function P(){return{value:void 0,done:!0}}return y.prototype=m,o(b,"constructor",{value:m,configurable:!0}),o(m,"constructor",{value:y,configurable:!0}),y.displayName=f(m,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,f(e,l,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},_(x.prototype),f(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new x(h(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},_(b),f(b,l,"Generator"),f(b,s,(function(){return this})),f(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=a.call(i,"catchLoc"),s=a.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:N(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},t}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},861:function(e,t,n){var r=n(405),i=n(498),a=n(116),o=n(281);e.exports=function(e){return r(e)||i(e)||a(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},698:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},116:function(e,t,n){var r=n(897);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var u=2&i&&r;"object"==typeof u&&!~e.indexOf(u);u=t(u))Object.getOwnPropertyNames(u).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".440c4889.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="netflix-clone:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var h=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/BunnuFlix/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunknetflix_clone=self.webpackChunknetflix_clone||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return ro},SDK_VERSION:function(){return xu},_DEFAULT_ENTRY_NAME:function(){return lu},_addComponent:function(){return pu},_addOrOverwriteComponent:function(){return vu},_apps:function(){return hu},_clearComponents:function(){return ku},_components:function(){return du},_getProvider:function(){return mu},_registerComponent:function(){return yu},_removeServiceInstance:function(){return gu},deleteApp:function(){return Tu},getApp:function(){return Su},getApps:function(){return Iu},initializeApp:function(){return Eu},onLog:function(){return Pu},registerVersion:function(){return Nu},setLogLevel:function(){return Au}});var t=n(791),r=n.t(t,2),i=n(250),a=n(248),o=n(327),u=n(164);var s=function(e){e()},c=function(){return s};function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function f(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===l(t)?t:String(t)}function h(e,t,n){return(t=f(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=Symbol.for("react-redux-context-".concat(t.version)),p=globalThis;var v=new Proxy({},new Proxy({},{get:function(e,n){var r=function(){var e=p[d];return e||(e=(0,t.createContext)(null),p[d]=e),e}();return function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];return Reflect[n].apply(Reflect,[r].concat(i))}}}));function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;return function(){return(0,t.useContext)(e)}}var m=y(),g=function(){throw new Error("uSES not initialized!")},k=function(e,t){return e===t};function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,n=e===v?m:y(e);return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i="function"===typeof r?{equalityFn:r}:r,a=i.equalityFn,o=void 0===a?k:a,u=i.stabilityCheck,s=void 0===u?void 0:u;i.noopCheck;var c=n(),l=c.store,f=c.subscription,d=c.getServerState,p=c.stabilityCheck,v=(c.noopCheck,(0,t.useRef)(!0),(0,t.useCallback)(h({},e.name,(function(t){return e(t)}))[e.name],[e,p,s])),y=g(f.addNestedSub,l.getState,d||l.getState,v,o);return(0,t.useDebugValue)(y),y}}var b=w();n(110),n(900);var _={notify:function(){},get:function(){return[]}};function x(e,t){var n,r=_;function i(){o.onStateChange&&o.onStateChange()}function a(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=c(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var o={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=_)},getListeners:function(){return r}};return o}var E=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?t.useLayoutEffect:t.useEffect;var S=function(e){var n=e.store,r=e.context,i=e.children,a=e.serverState,o=e.stabilityCheck,u=void 0===o?"once":o,s=e.noopCheck,c=void 0===s?"once":s,l=(0,t.useMemo)((function(){var e=x(n);return{store:n,subscription:e,getServerState:a?function(){return a}:void 0,stabilityCheck:u,noopCheck:c}}),[n,a,u,c]),f=(0,t.useMemo)((function(){return n.getState()}),[n]);E((function(){var e=l.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),f!==n.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=void 0}}),[l,f]);var h=r||v;return t.createElement(h.Provider,{value:l},i)};function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=e===v?m:y(e);return function(){return t().store}}var T=I();function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=e===v?T:I(e);return function(){return t().dispatch}}var N,P=C();function A(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function R(e){return!!e&&!!e[be]}function O(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===_e}(e)||Array.isArray(e)||!!e[we]||!!(null===(t=e.constructor)||void 0===t?void 0:t[we])||V(e)||B(e))}function D(e,t,n){void 0===n&&(n=!1),0===L(e)?(n?Object.keys:xe)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function L(e){var t=e[be];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:V(e)?2:B(e)?3:0}function M(e,t){return 2===L(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function F(e,t){return 2===L(e)?e.get(t):e[t]}function U(e,t,n){var r=L(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function j(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function V(e){return ye&&e instanceof Map}function B(e){return me&&e instanceof Set}function q(e){return e.o||e.t}function z(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Ee(e);delete t[be];for(var n=xe(t),r=0;r<n.length;r++){var i=n[r],a=t[i];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function W(e,t){return void 0===t&&(t=!1),G(e)||R(e)||!O(e)||(L(e)>1&&(e.set=e.add=e.clear=e.delete=K),Object.freeze(e),t&&D(e,(function(e,t){return W(t,!0)}),!0)),e}function K(){A(2)}function G(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function H(e){var t=Se[e];return t||A(18,e),t}function Q(e,t){Se[e]||(Se[e]=t)}function Y(){return pe}function $(e,t){t&&(H("Patches"),e.u=[],e.s=[],e.v=t)}function J(e){X(e),e.p.forEach(ee),e.p=null}function X(e){e===pe&&(pe=e.l)}function Z(e){return pe={p:[],l:pe,h:e,m:!0,_:0}}function ee(e){var t=e[be];0===t.i||1===t.i?t.j():t.g=!0}function te(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.O||H("ES5").S(t,e,r),r?(n[be].P&&(J(t),A(4)),O(e)&&(e=ne(t,e),t.l||ie(t,e)),t.u&&H("Patches").M(n[be].t,e,t.u,t.s)):e=ne(t,n,[]),J(t),t.u&&t.v(t.u,t.s),e!==ke?e:void 0}function ne(e,t,n){if(G(t))return t;var r=t[be];if(!r)return D(t,(function(i,a){return re(e,r,t,i,a,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return ie(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=z(r.k):r.o,a=i,o=!1;3===r.i&&(a=new Set(i),i.clear(),o=!0),D(a,(function(t,a){return re(e,r,i,t,a,n,o)})),ie(e,i,!1),n&&e.u&&H("Patches").N(r,n,e.u,e.s)}return r.o}function re(e,t,n,r,i,a,o){if(R(i)){var u=ne(e,i,a&&t&&3!==t.i&&!M(t.R,r)?a.concat(r):void 0);if(U(n,r,u),!R(u))return;e.m=!1}else o&&n.add(i);if(O(i)&&!G(i)){if(!e.h.D&&e._<1)return;ne(e,i),t&&t.A.l||ie(e,i)}}function ie(e,t,n){void 0===n&&(n=!1),!e.l&&e.h.D&&e.m&&W(t,n)}function ae(e,t){var n=e[be];return(n?q(n):e)[t]}function oe(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function ue(e){e.P||(e.P=!0,e.l&&ue(e.l))}function se(e){e.o||(e.o=z(e.t))}function ce(e,t,n){var r=V(t)?H("MapSet").F(t,n):B(t)?H("MapSet").T(t,n):e.O?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:Y(),P:!1,I:!1,R:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,a=Ie;n&&(i=[r],a=Te);var o=Proxy.revocable(i,a),u=o.revoke,s=o.proxy;return r.k=s,r.j=u,s}(t,n):H("ES5").J(t,n);return(n?n.A:Y()).p.push(r),r}function le(e){return R(e)||A(22,e),function e(t){if(!O(t))return t;var n,r=t[be],i=L(t);if(r){if(!r.P&&(r.i<4||!H("ES5").K(r)))return r.t;r.I=!0,n=fe(t,i),r.I=!1}else n=fe(t,i);return D(n,(function(t,i){r&&F(r.t,t)===i||U(n,t,e(i))})),3===i?new Set(n):n}(e)}function fe(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return z(e)}function he(){function e(e,t){var n=i[e];return n?n.enumerable=t:i[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[be];return Ie.get(t,e)},set:function(t){var n=this[be];Ie.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][be];if(!i.P)switch(i.i){case 5:r(i)&&ue(i);break;case 4:n(i)&&ue(i)}}}function n(e){for(var t=e.t,n=e.k,r=xe(n),i=r.length-1;i>=0;i--){var a=r[i];if(a!==be){var o=t[a];if(void 0===o&&!M(t,a))return!0;var u=n[a],s=u&&u[be];if(s?s.t!==o:!j(u,o))return!0}}var c=!!t[be];return r.length!==xe(t).length+(c?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var i={};Q("ES5",{J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var a=Ee(n);delete a[be];for(var o=xe(a),u=0;u<o.length;u++){var s=o[u];a[s]=e(s,t||!!a[s].enumerable)}return Object.create(Object.getPrototypeOf(n),a)}(r,t),a={i:r?5:4,A:n?n.A:Y(),P:!1,I:!1,R:{},l:n,t:t,k:i,o:null,g:!1,C:!1};return Object.defineProperty(i,be,{value:a,writable:!0}),i},S:function(e,n,i){i?R(n)&&n[be].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[be];if(n){var i=n.t,a=n.k,o=n.R,u=n.i;if(4===u)D(a,(function(t){t!==be&&(void 0!==i[t]||M(i,t)?o[t]||e(a[t]):(o[t]=!0,ue(n)))})),D(i,(function(e){void 0!==a[e]||M(a,e)||(o[e]=!1,ue(n))}));else if(5===u){if(r(n)&&(ue(n),o.length=!0),a.length<i.length)for(var s=a.length;s<i.length;s++)o[s]=!1;else for(var c=i.length;c<a.length;c++)o[c]=!0;for(var l=Math.min(a.length,i.length),f=0;f<l;f++)a.hasOwnProperty(f)||(o[f]=!0),void 0===o[f]&&e(a[f])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}!function(e){g=e}(o.useSyncExternalStoreWithSelector),function(e){e}(a.useSyncExternalStore),N=u.unstable_batchedUpdates,s=N;var de,pe,ve="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),ye="undefined"!=typeof Map,me="undefined"!=typeof Set,ge="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,ke=ve?Symbol.for("immer-nothing"):((de={})["immer-nothing"]=!0,de),we=ve?Symbol.for("immer-draftable"):"__$immer_draftable",be=ve?Symbol.for("immer-state"):"__$immer_state",_e=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),xe="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Ee=Object.getOwnPropertyDescriptors||function(e){var t={};return xe(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},Se={},Ie={get:function(e,t){if(t===be)return e;var n=q(e);if(!M(n,t))return function(e,t,n){var r,i=oe(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!O(r)?r:r===ae(e.t,t)?(se(e),e.o[t]=ce(e.A.h,r,e)):r},has:function(e,t){return t in q(e)},ownKeys:function(e){return Reflect.ownKeys(q(e))},set:function(e,t,n){var r=oe(q(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=ae(q(e),t),a=null==i?void 0:i[be];if(a&&a.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(j(n,i)&&(void 0!==n||M(e.t,t)))return!0;se(e),ue(e)}return e.o[t]===n&&(void 0!==n||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==ae(e.t,t)||t in e.t?(e.R[t]=!1,se(e),ue(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=q(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){A(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){A(12)}},Te={};D(Ie,(function(e,t){Te[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Te.deleteProperty=function(e,t){return Te.set.call(this,e,t,void 0)},Te.set=function(e,t,n){return Ie.set.call(this,e[0],t,n,e[0])};var Ce=function(){function e(e){var t=this;this.O=ge,this.D=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var a=t;return function(e){var t=this;void 0===e&&(e=i);for(var r=arguments.length,o=Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=arguments[u];return a.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(o))}))}}var o;if("function"!=typeof n&&A(6),void 0!==r&&"function"!=typeof r&&A(7),O(e)){var u=Z(t),s=ce(t,e,void 0),c=!0;try{o=n(s),c=!1}finally{c?J(u):X(u)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return $(u,r),te(e,u)}),(function(e){throw J(u),e})):($(u,r),te(o,u))}if(!e||"object"!=typeof e){if(void 0===(o=n(e))&&(o=e),o===ke&&(o=void 0),t.D&&W(o,!0),r){var l=[],f=[];H("Patches").M(e,o,l,f),r(l,f)}return o}A(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))};var r,i,a=t.produce(e,n,(function(e,t){r=e,i=t}));return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return[e,r,i]})):[a,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){O(e)||A(8),R(e)&&(e=le(e));var t=Z(this),n=ce(this,e,void 0);return n[be].C=!0,X(t),n},t.finishDraft=function(e,t){var n=(e&&e[be]).A;return $(n,t),te(void 0,n)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!ge&&A(20),this.O=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var i=H("Patches").$;return R(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))},e}(),Ne=new Ce,Pe=Ne.produce,Ae=(Ne.produceWithPatches.bind(Ne),Ne.setAutoFreeze.bind(Ne),Ne.setUseProxies.bind(Ne),Ne.applyPatches.bind(Ne),Ne.createDraft.bind(Ne),Ne.finishDraft.bind(Ne),Pe);function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function De(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Le="function"===typeof Symbol&&Symbol.observable||"@@observable",Me=function(){return Math.random().toString(36).substring(7).split("").join(".")},Fe={INIT:"@@redux/INIT"+Me(),REPLACE:"@@redux/REPLACE"+Me(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Me()}};function Ue(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function je(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(De(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(De(1));return n(je)(e,t)}if("function"!==typeof e)throw new Error(De(2));var i=e,a=t,o=[],u=o,s=!1;function c(){u===o&&(u=o.slice())}function l(){if(s)throw new Error(De(3));return a}function f(e){if("function"!==typeof e)throw new Error(De(4));if(s)throw new Error(De(5));var t=!0;return c(),u.push(e),function(){if(t){if(s)throw new Error(De(6));t=!1,c();var n=u.indexOf(e);u.splice(n,1),o=null}}}function h(e){if(!Ue(e))throw new Error(De(7));if("undefined"===typeof e.type)throw new Error(De(8));if(s)throw new Error(De(9));try{s=!0,a=i(a,e)}finally{s=!1}for(var t=o=u,n=0;n<t.length;n++){(0,t[n])()}return e}return h({type:Fe.INIT}),(r={dispatch:h,subscribe:f,getState:l,replaceReducer:function(e){if("function"!==typeof e)throw new Error(De(10));i=e,h({type:Fe.REPLACE})}})[Le]=function(){var e,t=f;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(De(11));function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[Le]=function(){return this},e},r}function Ve(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var a,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:Fe.INIT}))throw new Error(De(12));if("undefined"===typeof n(void 0,{type:Fe.PROBE_UNKNOWN_ACTION()}))throw new Error(De(13))}))}(n)}catch(u){a=u}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},u=0;u<o.length;u++){var s=o[u],c=n[s],l=e[s],f=c(l,t);if("undefined"===typeof f){t&&t.type;throw new Error(De(14))}i[s]=f,r=r||f!==l}return(r=r||o.length!==Object.keys(e).length)?i:e}}function Be(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function qe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(De(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return r=Be.apply(void 0,a)(n.dispatch),Oe(Oe({},n),{},{dispatch:r})}}}function ze(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"===typeof i?i(n,r,e):t(i)}}}}var We=ze();We.withExtraArgument=ze;var Ke=We,Ge=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),He=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(u){a=[6,u],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Qe=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},Ye=Object.defineProperty,$e=Object.defineProperties,Je=Object.getOwnPropertyDescriptors,Xe=Object.getOwnPropertySymbols,Ze=Object.prototype.hasOwnProperty,et=Object.prototype.propertyIsEnumerable,tt=function(e,t,n){return t in e?Ye(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},nt=function(e,t){for(var n in t||(t={}))Ze.call(t,n)&&tt(e,n,t[n]);if(Xe)for(var r=0,i=Xe(t);r<i.length;r++){n=i[r];et.call(t,n)&&tt(e,n,t[n])}return e},rt=function(e,t){return $e(e,Je(t))},it=function(e,t,n){return new Promise((function(r,i){var a=function(e){try{u(n.next(e))}catch(t){i(t)}},o=function(e){try{u(n.throw(e))}catch(t){i(t)}},u=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(a,o)};u((n=n.apply(e,t)).next())}))},at="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?Be:Be.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function ot(e){if("object"!==typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}var ut=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Ge(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,Qe([void 0],e[0].concat(this)))):new(t.bind.apply(t,Qe([void 0],e.concat(this))))},t}(Array),st=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Ge(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,Qe([void 0],e[0].concat(this)))):new(t.bind.apply(t,Qe([void 0],e.concat(this))))},t}(Array);function ct(e){return O(e)?Ae(e,(function(){})):e}function lt(){return function(e){return function(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,r=(e.immutableCheck,e.serializableCheck,new ut);n&&(!function(e){return"boolean"===typeof e}(n)?r.push(Ke.withExtraArgument(n.extraArgument)):r.push(Ke));0;return r}(e)}}function ft(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return nt(nt({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}function ht(e){var t,n={},r=[],i={addCase:function(e,t){var r="string"===typeof e?e:e.type;if(r in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[r]=t,i},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[n,r,t]}var dt=function(e){void 0===e&&(e=21);for(var t="",n=e;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},pt=["name","message","stack","code"],vt=function(e,t){this.payload=e,this.meta=t},yt=function(e,t){this.payload=e,this.meta=t},mt=function(e){if("object"===typeof e&&null!==e){for(var t={},n=0,r=pt;n<r.length;n++){var i=r[n];"string"===typeof e[i]&&(t[i]=e[i])}return t}return{message:String(e)}};!function(){function e(e,t,n){var r=ft(e+"/fulfilled",(function(e,t,n,r){return{payload:e,meta:rt(nt({},r||{}),{arg:n,requestId:t,requestStatus:"fulfilled"})}})),i=ft(e+"/pending",(function(e,t,n){return{payload:void 0,meta:rt(nt({},n||{}),{arg:t,requestId:e,requestStatus:"pending"})}})),a=ft(e+"/rejected",(function(e,t,r,i,a){return{payload:i,error:(n&&n.serializeError||mt)(e||"Rejected"),meta:rt(nt({},a||{}),{arg:r,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}})),o="undefined"!==typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){0},e}();return Object.assign((function(e){return function(u,s,c){var l,f=(null==n?void 0:n.idGenerator)?n.idGenerator(e):dt(),h=new o;function d(e){l=e,h.abort()}var p=function(){return it(this,null,(function(){var o,p,v,y,m,g;return He(this,(function(k){switch(k.label){case 0:return k.trys.push([0,4,,5]),y=null==(o=null==n?void 0:n.condition)?void 0:o.call(n,e,{getState:s,extra:c}),null===(w=y)||"object"!==typeof w||"function"!==typeof w.then?[3,2]:[4,y];case 1:y=k.sent(),k.label=2;case 2:if(!1===y||h.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return!0,m=new Promise((function(e,t){return h.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:l||"Aborted"})}))})),u(i(f,e,null==(p=null==n?void 0:n.getPendingMeta)?void 0:p.call(n,{requestId:f,arg:e},{getState:s,extra:c}))),[4,Promise.race([m,Promise.resolve(t(e,{dispatch:u,getState:s,extra:c,requestId:f,signal:h.signal,abort:d,rejectWithValue:function(e,t){return new vt(e,t)},fulfillWithValue:function(e,t){return new yt(e,t)}})).then((function(t){if(t instanceof vt)throw t;return t instanceof yt?r(t.payload,f,e,t.meta):r(t,f,e)}))])];case 3:return v=k.sent(),[3,5];case 4:return g=k.sent(),v=g instanceof vt?a(null,f,e,g.payload,g.meta):a(g,f,e),[3,5];case 5:return n&&!n.dispatchConditionRejection&&a.match(v)&&v.meta.condition||u(v),[2,v]}var w}))}))}();return Object.assign(p,{abort:d,requestId:f,arg:e,unwrap:function(){return p.then(gt)}})}}),{pending:i,rejected:a,fulfilled:r,typePrefix:e})}e.withTypes=function(){return e}}();function gt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}Object.assign;var kt="listenerMiddleware";ft(kt+"/add"),ft(kt+"/removeAll"),ft(kt+"/remove");"function"===typeof queueMicrotask&&queueMicrotask.bind("undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:globalThis);var wt,bt=function(e){return function(t){setTimeout(t,e)}};"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:bt(10);he();var _t,xt=function(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n,r="function"==typeof e.initialState?e.initialState:ct(e.initialState),i=e.reducers||{},a=Object.keys(i),o={},u={},s={};function c(){var t="function"===typeof e.extraReducers?ht(e.extraReducers):[e.extraReducers],n=t[0],i=void 0===n?{}:n,a=t[1],o=void 0===a?[]:a,s=t[2],c=void 0===s?void 0:s,l=nt(nt({},i),u);return function(e,t,n,r){void 0===n&&(n=[]);var i,a="function"===typeof t?ht(t):[t,n,r],o=a[0],u=a[1],s=a[2];if(function(e){return"function"===typeof e}(e))i=function(){return ct(e())};else{var c=ct(e);i=function(){return c}}function l(e,t){void 0===e&&(e=i());var n=Qe([o[t.type]],u.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===n.filter((function(e){return!!e})).length&&(n=[s]),n.reduce((function(e,n){if(n){var r;if(R(e))return void 0===(r=n(e,t))?e:r;if(O(e))return Ae(e,(function(e){return n(e,t)}));if(void 0===(r=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e}),e)}return l.getInitialState=i,l}(r,(function(e){for(var t in l)e.addCase(t,l[t]);for(var n=0,r=o;n<r.length;n++){var i=r[n];e.addMatcher(i.matcher,i.reducer)}c&&e.addDefaultCase(c)}))}return a.forEach((function(e){var n,r,a=i[e],c=t+"/"+e;"reducer"in a?(n=a.reducer,r=a.prepare):n=a,o[e]=n,u[c]=n,s[e]=r?ft(c,r):ft(c)})),{name:t,reducer:function(e,t){return n||(n=c()),n(e,t)},actions:s,caseReducers:o,getInitialState:function(){return n||(n=c()),n.getInitialState()}}}({name:"user",initialState:{user:null},reducers:{login:function(e,t){e.user=t.payload},logout:function(e){e.user=null}}}),Et=xt.actions,St=Et.login,It=Et.logout,Tt=function(e){return e.user.user},Ct=function(e){var t,n=lt(),r=e||{},i=r.reducer,a=void 0===i?void 0:i,o=r.middleware,u=void 0===o?n():o,s=r.devTools,c=void 0===s||s,l=r.preloadedState,f=void 0===l?void 0:l,h=r.enhancers,d=void 0===h?void 0:h;if("function"===typeof a)t=a;else{if(!ot(a))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=Ve(a)}var p=u;"function"===typeof p&&(p=p(n));var v=qe.apply(void 0,p),y=Be;c&&(y=at(nt({trace:!1},"object"===typeof c&&c)));var m=new st(v),g=m;return Array.isArray(d)?g=Qe([v],d):"function"===typeof d&&(g=d(m)),je(t,f,y.apply(void 0,g))}({reducer:{user:xt.reducer}});function Nt(e){if(Array.isArray(e))return e}function Pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function At(e,t){if(e){if("string"===typeof e)return Pt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pt(e,t):void 0}}function Rt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ot(e,t){return Nt(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||At(e,t)||Rt()}function Dt(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Lt(e){return function(e){if(Array.isArray(e))return Pt(e)}(e)||Dt(e)||At(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function Ut(e,t,n){return t&&Ft(e.prototype,t),n&&Ft(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function jt(e,t){return jt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},jt(e,t)}function Vt(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jt(e,t)}function Bt(e){return Bt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Bt(e)}function qt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function zt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wt(e){var t=qt();return function(){var n,r=Bt(e);if(t){var i=Bt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return zt(e)}(this,n)}}function Kt(e,t,n){return Kt=qt()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&jt(i,n.prototype),i},Kt.apply(null,arguments)}function Gt(e){var t="function"===typeof Map?new Map:void 0;return Gt=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Kt(e,arguments,Bt(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),jt(n,e)},Gt(e)}function Ht(e){return Nt(e)||Dt(e)||At(e)||Rt()}function Qt(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=At(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function Yt(){return Yt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yt.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(_t||(_t={}));var $t,Jt="popstate";function Xt(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function Zt(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function en(e,t){return{usr:e.state,key:e.key,idx:t}}function tn(e,t,n,r){return void 0===n&&(n=null),Yt({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?rn(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function nn(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function rn(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function an(e,t,n,r){void 0===r&&(r={});var i=r,a=i.window,o=void 0===a?document.defaultView:a,u=i.v5Compat,s=void 0!==u&&u,c=o.history,l=_t.Pop,f=null,h=d();function d(){return(c.state||{idx:null}).idx}function p(){l=_t.Pop;var e=d(),t=null==e?null:e-h;h=e,f&&f({action:l,location:y.location,delta:t})}function v(e){var t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:nn(e);return Xt(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==h&&(h=0,c.replaceState(Yt({},c.state,{idx:h}),""));var y={get action(){return l},get location(){return e(o,c)},listen:function(e){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(Jt,p),f=e,function(){o.removeEventListener(Jt,p),f=null}},createHref:function(e){return t(o,e)},createURL:v,encodeLocation:function(e){var t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=_t.Push;var r=tn(y.location,e,t);n&&n(r,e);var i=en(r,h=d()+1),a=y.createHref(r);try{c.pushState(i,"",a)}catch(PO){if(PO instanceof DOMException&&"DataCloneError"===PO.name)throw PO;o.location.assign(a)}s&&f&&f({action:l,location:y.location,delta:1})},replace:function(e,t){l=_t.Replace;var r=tn(y.location,e,t);n&&n(r,e);var i=en(r,h=d()),a=y.createHref(r);c.replaceState(i,"",a),s&&f&&f({action:l,location:y.location,delta:0})},go:function(e){return c.go(e)}};return y}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}($t||($t={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function on(e,t,n){void 0===n&&(n="/");var r=wn(("string"===typeof t?rn(t):t).pathname||"/",n);if(null==r)return null;var i=un(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=mn(i[o],kn(r));return a}function un(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(Xt(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var u=En([r,o.relativePath]),s=n.concat(o);e.children&&e.children.length>0&&(Xt(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+u+'".'),un(e.children,t,s,u)),(null!=e.path||e.index)&&t.push({path:u,score:yn(u,e.index),routesMeta:s})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=Qt(sn(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(u){a.e(u)}finally{a.f()}}else i(e,t)})),t}function sn(e){var t=e.split("/");if(0===t.length)return[];var n=Ht(t),r=n[0],i=n.slice(1),a=r.endsWith("?"),o=r.replace(/\?$/,"");if(0===i.length)return a?[o,""]:[o];var u=sn(i.join("/")),s=[];return s.push.apply(s,Lt(u.map((function(e){return""===e?o:[o,e].join("/")})))),a&&s.push.apply(s,Lt(u)),s.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var cn=/^:\w+$/,ln=3,fn=2,hn=1,dn=10,pn=-2,vn=function(e){return"*"===e};function yn(e,t){var n=e.split("/"),r=n.length;return n.some(vn)&&(r+=pn),t&&(r+=fn),n.filter((function(e){return!vn(e)})).reduce((function(e,t){return e+(cn.test(t)?ln:""===t?hn:dn)}),r)}function mn(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=gn({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:En([i,l.pathname]),pathnameBase:Sn(En([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=En([i,l.pathnameBase]))}return a}function gn(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);Zt("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=Ot(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),c=o.slice(1),l=a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(PO){return Zt(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+PO+")."),e}}(c[n]||"",t),e}),{});return{params:l,pathname:u,pathnameBase:s,pattern:e}}function kn(e){try{return decodeURI(e)}catch(PO){return Zt(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+PO+")."),e}}function wn(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function bn(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function _n(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function xn(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=rn(e):(Xt(!(i=Yt({},e)).pathname||!i.pathname.includes("?"),bn("?","pathname","search",i)),Xt(!i.pathname||!i.pathname.includes("#"),bn("#","pathname","hash",i)),Xt(!i.search||!i.search.includes("#"),bn("#","search","hash",i)));var a,o=""===e||""===i.pathname,u=o?"/":i.pathname;if(r||null==u)a=n;else{var s=t.length-1;if(u.startsWith("..")){for(var c=u.split("/");".."===c[0];)c.shift(),s-=1;i.pathname=c.join("/")}a=s>=0?t[s]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?rn(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:In(a),hash:Tn(u)}}(i,a),f=u&&"/"!==u&&u.endsWith("/"),h=(o||"."===u)&&n.endsWith("/");return l.pathname.endsWith("/")||!f&&!h||(l.pathname+="/"),l}var En=function(e){return e.join("/").replace(/\/\/+/g,"/")},Sn=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},In=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},Tn=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},Cn=function(e){Vt(n,e);var t=Wt(n);function n(){return Mt(this,n),t.apply(this,arguments)}return Ut(n)}(Gt(Error));function Nn(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var Pn=["post","put","patch","delete"],An=(new Set(Pn),["get"].concat(Pn));new Set(An),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function Rn(){return Rn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rn.apply(this,arguments)}var On=t.createContext(null);var Dn=t.createContext(null);var Ln=t.createContext(null);var Mn=t.createContext(null);var Fn=t.createContext(null);var Un=t.createContext({outlet:null,matches:[],isDataRoute:!1});var jn=t.createContext(null);function Vn(){return null!=t.useContext(Fn)}function Bn(){return Vn()||Xt(!1),t.useContext(Fn).location}function qn(e){t.useContext(Mn).static||t.useLayoutEffect(e)}function zn(){return t.useContext(Un).isDataRoute?function(){var e=Xn(Gn.UseNavigateStable).router,n=er(Hn.UseNavigateStable),r=t.useRef(!1);qn((function(){r.current=!0}));var i=t.useCallback((function(t,i){void 0===i&&(i={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,Rn({fromRouteId:n},i)))}),[e,n]);return i}():function(){Vn()||Xt(!1);var e=t.useContext(On),n=t.useContext(Mn),r=n.basename,i=n.navigator,a=t.useContext(Un).matches,o=Bn().pathname,u=JSON.stringify(_n(a).map((function(e){return e.pathnameBase}))),s=t.useRef(!1);qn((function(){s.current=!0}));var c=t.useCallback((function(t,n){if(void 0===n&&(n={}),s.current)if("number"!==typeof t){var a=xn(t,JSON.parse(u),o,"path"===n.relative);null==e&&"/"!==r&&(a.pathname="/"===a.pathname?r:En([r,a.pathname])),(n.replace?i.replace:i.push)(a,n.state,n)}else i.go(t)}),[r,i,u,o,e]);return c}()}function Wn(e,n,r){Vn()||Xt(!1);var i,a=t.useContext(Mn).navigator,o=t.useContext(Un).matches,u=o[o.length-1],s=u?u.params:{},c=(u&&u.pathname,u?u.pathnameBase:"/"),l=(u&&u.route,Bn());if(n){var f,h="string"===typeof n?rn(n):n;"/"===c||(null==(f=h.pathname)?void 0:f.startsWith(c))||Xt(!1),i=h}else i=l;var d=i.pathname||"/",p=on(e,{pathname:"/"===c?d:d.slice(c.length)||"/"});var v=Jn(p&&p.map((function(e){return Object.assign({},e,{params:Object.assign({},s,e.params),pathname:En([c,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:En([c,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),o,r);return n&&v?t.createElement(Fn.Provider,{value:{location:Rn({pathname:"/",search:"",hash:"",state:null,key:"default"},i),navigationType:_t.Pop}},v):v}function Kn(){var e=function(){var e,n=t.useContext(jn),r=Zn(Hn.UseRouteError),i=er(Hn.UseRouteError);if(n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=Nn(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:a},r):null,null)}var Gn,Hn,Qn=t.createElement(Kn,null),Yn=function(e){Vt(r,e);var n=Wt(r);function r(e){var t;return Mt(this,r),(t=n.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},t}return Ut(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?t.createElement(Un.Provider,{value:this.props.routeContext},t.createElement(jn.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),r}(t.Component);function $n(e){var n=e.routeContext,r=e.match,i=e.children,a=t.useContext(On);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(Un.Provider,{value:n},i)}function Jn(e,n,r){var i;if(void 0===n&&(n=[]),void 0===r&&(r=null),null==e){var a;if(null==(a=r)||!a.errors)return null;e=r.matches}var o=e,u=null==(i=r)?void 0:i.errors;if(null!=u){var s=o.findIndex((function(e){return e.route.id&&(null==u?void 0:u[e.route.id])}));s>=0||Xt(!1),o=o.slice(0,Math.min(o.length,s+1))}return o.reduceRight((function(e,i,a){var s=i.route.id?null==u?void 0:u[i.route.id]:null,c=null;r&&(c=i.route.errorElement||Qn);var l=n.concat(o.slice(0,a+1)),f=function(){var n;return n=s?c:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement($n,{match:i,routeContext:{outlet:e,matches:l,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===a)?t.createElement(Yn,{location:r.location,revalidation:r.revalidation,component:c,error:s,children:f(),routeContext:{outlet:null,matches:l,isDataRoute:!0}}):f()}),null)}function Xn(e){var n=t.useContext(On);return n||Xt(!1),n}function Zn(e){var n=t.useContext(Dn);return n||Xt(!1),n}function er(e){var n=function(e){var n=t.useContext(Un);return n||Xt(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||Xt(!1),r.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"}(Gn||(Gn={})),function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"}(Hn||(Hn={}));var tr;r.startTransition;function nr(e){Xt(!1)}function rr(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,a=void 0===i?null:i,o=e.location,u=e.navigationType,s=void 0===u?_t.Pop:u,c=e.navigator,l=e.static,f=void 0!==l&&l;Vn()&&Xt(!1);var h=r.replace(/^\/*/,"/"),d=t.useMemo((function(){return{basename:h,navigator:c,static:f}}),[h,c,f]);"string"===typeof o&&(o=rn(o));var p=o,v=p.pathname,y=void 0===v?"/":v,m=p.search,g=void 0===m?"":m,k=p.hash,w=void 0===k?"":k,b=p.state,_=void 0===b?null:b,x=p.key,E=void 0===x?"default":x,S=t.useMemo((function(){var e=wn(y,h);return null==e?null:{location:{pathname:e,search:g,hash:w,state:_,key:E},navigationType:s}}),[h,y,g,w,_,E,s]);return null==S?null:t.createElement(Mn.Provider,{value:d},t.createElement(Fn.Provider,{children:a,value:S}))}function ir(e){var t=e.children,n=e.location;return Wn(or(t),n)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(tr||(tr={}));var ar=new Promise((function(){}));t.Component;function or(e,n){void 0===n&&(n=[]);var r=[];return t.Children.forEach(e,(function(e,i){if(t.isValidElement(e)){var a=[].concat(Lt(n),[i]);if(e.type!==t.Fragment){e.type!==nr&&Xt(!1),e.props.index&&e.props.children&&Xt(!1);var o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=or(e.props.children,a)),r.push(o)}else r.push.apply(r,or(e.props.children,a))}})),r}var ur=n(184);var sr=function(){var e=Ot((0,t.useState)(!1),2),n=e[0],r=e[1],i=zn(),a=function(){window.scrollY>100?r(!0):r(!1)};return(0,t.useEffect)((function(){return window.addEventListener("scroll",a),function(){return window.removeEventListener("scroll",a)}}),[]),(0,ur.jsx)("div",{className:"nav ".concat(n&&"nav_black"),children:(0,ur.jsxs)("div",{className:"nav_contents",children:[(0,ur.jsx)("img",{onClick:function(){return i("/")},className:"nav_logo",src:"https://assets.stickpng.com/images/580b57fcd9996e24bc43c529.png",alt:""}),(0,ur.jsx)("img",{onClick:function(){return i("/profile")},className:"nav_avatar",src:"https://wallpapers.com/images/hd/netflix-profile-pictures-400-x-400-88wkdmjrorckekha.jpg",alt:""})]})})};function cr(){cr=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(N){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof d?t:d,o=Object.create(a.prototype),u=new I(i||[]);return r(o,"_invoke",{value:_(e,n,u)}),o}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(N){return{type:"throw",arg:N}}}e.wrap=c;var h={};function d(){}function p(){}function v(){}var y={};s(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(T([])));g&&g!==t&&n.call(g,a)&&(y=g);var k=v.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,a,o,u){var s=f(e[r],e,a);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"==l(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,o,u)}),(function(e){i("throw",e,o,u)})):t.resolve(h).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,u)}))}u(s.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function _(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return C()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=x(o,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=f(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=v,r(k,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:p,configurable:!0}),p.displayName=s(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},w(b.prototype),s(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new b(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(k),s(k,u,"Generator"),s(k,a,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function lr(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(PO){return void n(PO)}u.done?t(s):Promise.resolve(s).then(r,i)}function fr(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){lr(a,r,i,o,u,"next",e)}function u(e){lr(a,r,i,o,u,"throw",e)}o(void 0)}))}}function hr(e,t){return function(){return e.apply(t,arguments)}}var dr,pr=Object.prototype.toString,vr=Object.getPrototypeOf,yr=(dr=Object.create(null),function(e){var t=pr.call(e);return dr[t]||(dr[t]=t.slice(8,-1).toLowerCase())}),mr=function(e){return e=e.toLowerCase(),function(t){return yr(t)===e}},gr=function(e){return function(t){return typeof t===e}},kr=Array.isArray,wr=gr("undefined");var br=mr("ArrayBuffer");var _r=gr("string"),xr=gr("function"),Er=gr("number"),Sr=function(e){return null!==e&&"object"===typeof e},Ir=function(e){if("object"!==yr(e))return!1;var t=vr(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Tr=mr("Date"),Cr=mr("File"),Nr=mr("Blob"),Pr=mr("FileList"),Ar=mr("URLSearchParams");function Rr(e,t){var n,r,i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).allOwnKeys,a=void 0!==i&&i;if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),kr(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{var o,u=a?Object.getOwnPropertyNames(e):Object.keys(e),s=u.length;for(n=0;n<s;n++)o=u[n],t.call(null,e[o],o,e)}}function Or(e,t){t=t.toLowerCase();for(var n,r=Object.keys(e),i=r.length;i-- >0;)if(t===(n=r[i]).toLowerCase())return n;return null}var Dr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,Lr=function(e){return!wr(e)&&e!==Dr};var Mr,Fr=(Mr="undefined"!==typeof Uint8Array&&vr(Uint8Array),function(e){return Mr&&e instanceof Mr}),Ur=mr("HTMLFormElement"),jr=function(e){var t=Object.prototype.hasOwnProperty;return function(e,n){return t.call(e,n)}}(),Vr=mr("RegExp"),Br=function(e,t){var n=Object.getOwnPropertyDescriptors(e),r={};Rr(n,(function(n,i){!1!==t(n,i,e)&&(r[i]=n)})),Object.defineProperties(e,r)},qr="abcdefghijklmnopqrstuvwxyz",zr="0123456789",Wr={DIGIT:zr,ALPHA:qr,ALPHA_DIGIT:qr+qr.toUpperCase()+zr};var Kr=mr("AsyncFunction"),Gr={isArray:kr,isArrayBuffer:br,isBuffer:function(e){return null!==e&&!wr(e)&&null!==e.constructor&&!wr(e.constructor)&&xr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:function(e){var t;return e&&("function"===typeof FormData&&e instanceof FormData||xr(e.append)&&("formdata"===(t=yr(e))||"object"===t&&xr(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&br(e.buffer)},isString:_r,isNumber:Er,isBoolean:function(e){return!0===e||!1===e},isObject:Sr,isPlainObject:Ir,isUndefined:wr,isDate:Tr,isFile:Cr,isBlob:Nr,isRegExp:Vr,isFunction:xr,isStream:function(e){return Sr(e)&&xr(e.pipe)},isURLSearchParams:Ar,isTypedArray:Fr,isFileList:Pr,forEach:Rr,merge:function e(){for(var t=(Lr(this)&&this||{}).caseless,n={},r=function(r,i){var a=t&&Or(n,i)||i;Ir(n[a])&&Ir(r)?n[a]=e(n[a],r):Ir(r)?n[a]=e({},r):kr(r)?n[a]=r.slice():n[a]=r},i=0,a=arguments.length;i<a;i++)arguments[i]&&Rr(arguments[i],r);return n},extend:function(e,t,n){return Rr(t,(function(t,r){n&&xr(t)?e[r]=hr(t,n):e[r]=t}),{allOwnKeys:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).allOwnKeys}),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n,r){var i,a,o,u={};if(t=t||{},null==e)return t;do{for(a=(i=Object.getOwnPropertyNames(e)).length;a-- >0;)o=i[a],r&&!r(o,e,t)||u[o]||(t[o]=e[o],u[o]=!0);e=!1!==n&&vr(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:yr,kindOfTest:mr,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;if(kr(e))return e;var t=e.length;if(!Er(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},forEachEntry:function(e,t){for(var n,r=(e&&e[Symbol.iterator]).call(e);(n=r.next())&&!n.done;){var i=n.value;t.call(e,i[0],i[1])}},matchAll:function(e,t){for(var n,r=[];null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:Ur,hasOwnProperty:jr,hasOwnProp:jr,reduceDescriptors:Br,freezeMethods:function(e){Br(e,(function(t,n){if(xr(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;var r=e[n];xr(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=function(){throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:function(e,t){var n={},r=function(e){e.forEach((function(e){n[e]=!0}))};return kr(e)?r(e):r(String(e).split(t)),n},toCamelCase:function(e){return e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))},noop:function(){},toFiniteNumber:function(e,t){return e=+e,Number.isFinite(e)?e:t},findKey:Or,global:Dr,isContextDefined:Lr,ALPHABET:Wr,generateString:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wr.ALPHA_DIGIT,n="",r=t.length;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&xr(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:function(e){var t=new Array(10);return function e(n,r){if(Sr(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[r]=n;var i=kr(n)?[]:{};return Rr(n,(function(t,n){var a=e(t,r+1);!wr(a)&&(i[n]=a)})),t[r]=void 0,i}}return n}(e,0)},isAsyncFn:Kr,isThenable:function(e){return e&&(Sr(e)||xr(e))&&xr(e.then)&&xr(e.catch)}};function Hr(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}Gr.inherits(Hr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Gr.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var Qr=Hr.prototype,Yr={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(e){Yr[e]={value:e}})),Object.defineProperties(Hr,Yr),Object.defineProperty(Qr,"isAxiosError",{value:!0}),Hr.from=function(e,t,n,r,i,a){var o=Object.create(Qr);return Gr.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(function(e){return"isAxiosError"!==e})),Hr.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,a&&Object.assign(o,a),o};var $r=Hr;function Jr(e){return Gr.isPlainObject(e)||Gr.isArray(e)}function Xr(e){return Gr.endsWith(e,"[]")?e.slice(0,-2):e}function Zr(e,t,n){return e?e.concat(t).map((function(e,t){return e=Xr(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}var ei=Gr.toFlatObject(Gr,{},null,(function(e){return/^is[A-Z]/.test(e)}));var ti=function(e,t,n){if(!Gr.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;var r=(n=Gr.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Gr.isUndefined(t[e])}))).metaTokens,i=n.visitor||c,a=n.dots,o=n.indexes,u=(n.Blob||"undefined"!==typeof Blob&&Blob)&&Gr.isSpecCompliantForm(t);if(!Gr.isFunction(i))throw new TypeError("visitor must be a function");function s(e){if(null===e)return"";if(Gr.isDate(e))return e.toISOString();if(!u&&Gr.isBlob(e))throw new $r("Blob is not supported. Use a Buffer instead.");return Gr.isArrayBuffer(e)||Gr.isTypedArray(e)?u&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,i){var u=e;if(e&&!i&&"object"===typeof e)if(Gr.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(Gr.isArray(e)&&function(e){return Gr.isArray(e)&&!e.some(Jr)}(e)||(Gr.isFileList(e)||Gr.endsWith(n,"[]"))&&(u=Gr.toArray(e)))return n=Xr(n),u.forEach((function(e,r){!Gr.isUndefined(e)&&null!==e&&t.append(!0===o?Zr([n],r,a):null===o?n:n+"[]",s(e))})),!1;return!!Jr(e)||(t.append(Zr(i,n,a),s(e)),!1)}var l=[],f=Object.assign(ei,{defaultVisitor:c,convertValue:s,isVisitable:Jr});if(!Gr.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!Gr.isUndefined(n)){if(-1!==l.indexOf(n))throw Error("Circular reference detected in "+r.join("."));l.push(n),Gr.forEach(n,(function(n,a){!0===(!(Gr.isUndefined(n)||null===n)&&i.call(t,n,Gr.isString(a)?a.trim():a,r,f))&&e(n,r?r.concat(a):[a])})),l.pop()}}(e),t};function ni(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function ri(e,t){this._pairs=[],e&&ti(e,this,t)}var ii=ri.prototype;ii.append=function(e,t){this._pairs.push([e,t])},ii.toString=function(e){var t=e?function(t){return e.call(this,t,ni)}:ni;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var ai=ri;function oi(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ui(e,t,n){if(!t)return e;var r,i=n&&n.encode||oi,a=n&&n.serialize;if(r=a?a(t,n):Gr.isURLSearchParams(t)?t.toString():new ai(t,n).toString(i)){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}var si=function(){function e(){Mt(this,e),this.handlers=[]}return Ut(e,[{key:"use",value:function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(e){this.handlers[e]&&(this.handlers[e]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(e){Gr.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}]),e}(),ci=si,li={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},fi={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:ai,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},isStandardBrowserEnv:function(){var e;return("undefined"===typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&("undefined"!==typeof window&&"undefined"!==typeof document)}(),isStandardBrowserWebWorkerEnv:"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,protocols:["http","https","file","blob","url","data"]};var hi=function(e){function t(e,n,r,i){var a=e[i++],o=Number.isFinite(+a),u=i>=e.length;return a=!a&&Gr.isArray(r)?r.length:a,u?(Gr.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!o):(r[a]&&Gr.isObject(r[a])||(r[a]=[]),t(e,n,r[a],i)&&Gr.isArray(r[a])&&(r[a]=function(e){var t,n,r={},i=Object.keys(e),a=i.length;for(t=0;t<a;t++)r[n=i[t]]=e[n];return r}(r[a])),!o)}if(Gr.isFormData(e)&&Gr.isFunction(e.entries)){var n={};return Gr.forEachEntry(e,(function(e,r){t(function(e){return Gr.matchAll(/\w+|\[(\w*)]/g,e).map((function(e){return"[]"===e[0]?"":e[1]||e[0]}))}(e),r,n,0)})),n}return null},di={"Content-Type":void 0};var pi={transitional:li,adapter:["xhr","http"],transformRequest:[function(e,t){var n,r=t.getContentType()||"",i=r.indexOf("application/json")>-1,a=Gr.isObject(e);if(a&&Gr.isHTMLForm(e)&&(e=new FormData(e)),Gr.isFormData(e))return i&&i?JSON.stringify(hi(e)):e;if(Gr.isArrayBuffer(e)||Gr.isBuffer(e)||Gr.isStream(e)||Gr.isFile(e)||Gr.isBlob(e))return e;if(Gr.isArrayBufferView(e))return e.buffer;if(Gr.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return ti(e,new fi.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return fi.isNode&&Gr.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((n=Gr.isFileList(e))||r.indexOf("multipart/form-data")>-1){var o=this.env&&this.env.FormData;return ti(n?{"files[]":e}:e,o&&new o,this.formSerializer)}}return a||i?(t.setContentType("application/json",!1),function(e,t,n){if(Gr.isString(e))try{return(t||JSON.parse)(e),Gr.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||pi.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&Gr.isString(e)&&(n&&!this.responseType||r)){var i=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(a){if(i){if("SyntaxError"===a.name)throw $r.from(a,$r.ERR_BAD_RESPONSE,this,null,this.response);throw a}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:fi.classes.FormData,Blob:fi.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Gr.forEach(["delete","get","head"],(function(e){pi.headers[e]={}})),Gr.forEach(["post","put","patch"],(function(e){pi.headers[e]=Gr.merge(di)}));var vi=pi,yi=Gr.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),mi=Symbol("internals");function gi(e){return e&&String(e).trim().toLowerCase()}function ki(e){return!1===e||null==e?e:Gr.isArray(e)?e.map(ki):String(e)}function wi(e,t,n,r,i){return Gr.isFunction(r)?r.call(this,t,n):(i&&(t=n),Gr.isString(t)?Gr.isString(r)?-1!==t.indexOf(r):Gr.isRegExp(r)?r.test(t):void 0:void 0)}var bi=function(e,t){function n(e){Mt(this,n),e&&this.set(e)}return Ut(n,[{key:"set",value:function(e,t,n){var r=this;function i(e,t,n){var i=gi(t);if(!i)throw new Error("header name must be a non-empty string");var a=Gr.findKey(r,i);(!a||void 0===r[a]||!0===n||void 0===n&&!1!==r[a])&&(r[a||t]=ki(e))}var a=function(e,t){return Gr.forEach(e,(function(e,n){return i(e,n,t)}))};return Gr.isPlainObject(e)||e instanceof this.constructor?a(e,t):Gr.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?a(function(e){var t,n,r,i={};return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),t=e.substring(0,r).trim().toLowerCase(),n=e.substring(r+1).trim(),!t||i[t]&&yi[t]||("set-cookie"===t?i[t]?i[t].push(n):i[t]=[n]:i[t]=i[t]?i[t]+", "+n:n)})),i}(e),t):null!=e&&i(t,e,n),this}},{key:"get",value:function(e,t){if(e=gi(e)){var n=Gr.findKey(this,e);if(n){var r=this[n];if(!t)return r;if(!0===t)return function(e){for(var t,n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;t=r.exec(e);)n[t[1]]=t[2];return n}(r);if(Gr.isFunction(t))return t.call(this,r,n);if(Gr.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}},{key:"has",value:function(e,t){if(e=gi(e)){var n=Gr.findKey(this,e);return!(!n||void 0===this[n]||t&&!wi(0,this[n],n,t))}return!1}},{key:"delete",value:function(e,t){var n=this,r=!1;function i(e){if(e=gi(e)){var i=Gr.findKey(n,e);!i||t&&!wi(0,n[i],i,t)||(delete n[i],r=!0)}}return Gr.isArray(e)?e.forEach(i):i(e),r}},{key:"clear",value:function(e){for(var t=Object.keys(this),n=t.length,r=!1;n--;){var i=t[n];e&&!wi(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}},{key:"normalize",value:function(e){var t=this,n={};return Gr.forEach(this,(function(r,i){var a=Gr.findKey(n,i);if(a)return t[a]=ki(r),void delete t[i];var o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))}(i):String(i).trim();o!==i&&delete t[i],t[o]=ki(r),n[o]=!0})),this}},{key:"concat",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.constructor).concat.apply(e,[this].concat(n))}},{key:"toJSON",value:function(e){var t=Object.create(null);return Gr.forEach(this,(function(n,r){null!=n&&!1!==n&&(t[r]=e&&Gr.isArray(n)?n.join(", "):n)})),t}},{key:Symbol.iterator,value:function(){return Object.entries(this.toJSON())[Symbol.iterator]()}},{key:"toString",value:function(){return Object.entries(this.toJSON()).map((function(e){var t=Ot(e,2);return t[0]+": "+t[1]})).join("\n")}},{key:Symbol.toStringTag,get:function(){return"AxiosHeaders"}}],[{key:"from",value:function(e){return e instanceof this?e:new this(e)}},{key:"concat",value:function(e){for(var t=new this(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((function(e){return t.set(e)})),t}},{key:"accessor",value:function(e){var t=(this[mi]=this[mi]={accessors:{}}).accessors,n=this.prototype;function r(e){var r=gi(e);t[r]||(!function(e,t){var n=Gr.toCamelCase(" "+t);["get","set","has"].forEach((function(r){Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return Gr.isArray(e)?e.forEach(r):r(e),this}}]),n}();bi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Gr.freezeMethods(bi.prototype),Gr.freezeMethods(bi);var _i=bi;function xi(e,t){var n=this||vi,r=t||n,i=_i.from(r.headers),a=r.data;return Gr.forEach(e,(function(e){a=e.call(n,a,i.normalize(),t?t.status:void 0)})),i.normalize(),a}function Ei(e){return!(!e||!e.__CANCEL__)}function Si(e,t,n){$r.call(this,null==e?"canceled":e,$r.ERR_CANCELED,t,n),this.name="CanceledError"}Gr.inherits(Si,$r,{__CANCEL__:!0});var Ii=Si;var Ti=fi.isStandardBrowserEnv?{write:function(e,t,n,r,i,a){var o=[];o.push(e+"="+encodeURIComponent(t)),Gr.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Gr.isString(r)&&o.push("path="+r),Gr.isString(i)&&o.push("domain="+i),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function Ci(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}var Ni=fi.isStandardBrowserEnv?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=Gr.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0};var Pi=function(e,t){e=e||10;var n,r=new Array(e),i=new Array(e),a=0,o=0;return t=void 0!==t?t:1e3,function(u){var s=Date.now(),c=i[o];n||(n=s),r[a]=u,i[a]=s;for(var l=o,f=0;l!==a;)f+=r[l++],l%=e;if((a=(a+1)%e)===o&&(o=(o+1)%e),!(s-n<t)){var h=c&&s-c;return h?Math.round(1e3*f/h):void 0}}};function Ai(e,t){var n=0,r=Pi(50,250);return function(i){var a=i.loaded,o=i.lengthComputable?i.total:void 0,u=a-n,s=r(u);n=a;var c={loaded:a,total:o,progress:o?a/o:void 0,bytes:u,rate:s||void 0,estimated:s&&o&&a<=o?(o-a)/s:void 0,event:i};c[t?"download":"upload"]=!0,e(c)}}var Ri="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){var r,i=e.data,a=_i.from(e.headers).normalize(),o=e.responseType;function u(){e.cancelToken&&e.cancelToken.unsubscribe(r),e.signal&&e.signal.removeEventListener("abort",r)}Gr.isFormData(i)&&(fi.isStandardBrowserEnv||fi.isStandardBrowserWebWorkerEnv?a.setContentType(!1):a.setContentType("multipart/form-data;",!1));var s=new XMLHttpRequest;if(e.auth){var c=e.auth.username||"",l=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";a.set("Authorization","Basic "+btoa(c+":"+l))}var f=Ci(e.baseURL,e.url);function h(){if(s){var r=_i.from("getAllResponseHeaders"in s&&s.getAllResponseHeaders());!function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new $r("Request failed with status code "+n.status,[$r.ERR_BAD_REQUEST,$r.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),u()}),(function(e){n(e),u()}),{data:o&&"text"!==o&&"json"!==o?s.response:s.responseText,status:s.status,statusText:s.statusText,headers:r,config:e,request:s}),s=null}}if(s.open(e.method.toUpperCase(),ui(f,e.params,e.paramsSerializer),!0),s.timeout=e.timeout,"onloadend"in s?s.onloadend=h:s.onreadystatechange=function(){s&&4===s.readyState&&(0!==s.status||s.responseURL&&0===s.responseURL.indexOf("file:"))&&setTimeout(h)},s.onabort=function(){s&&(n(new $r("Request aborted",$r.ECONNABORTED,e,s)),s=null)},s.onerror=function(){n(new $r("Network Error",$r.ERR_NETWORK,e,s)),s=null},s.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||li;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new $r(t,r.clarifyTimeoutError?$r.ETIMEDOUT:$r.ECONNABORTED,e,s)),s=null},fi.isStandardBrowserEnv){var d=(e.withCredentials||Ni(f))&&e.xsrfCookieName&&Ti.read(e.xsrfCookieName);d&&a.set(e.xsrfHeaderName,d)}void 0===i&&a.setContentType(null),"setRequestHeader"in s&&Gr.forEach(a.toJSON(),(function(e,t){s.setRequestHeader(t,e)})),Gr.isUndefined(e.withCredentials)||(s.withCredentials=!!e.withCredentials),o&&"json"!==o&&(s.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&s.addEventListener("progress",Ai(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&s.upload&&s.upload.addEventListener("progress",Ai(e.onUploadProgress)),(e.cancelToken||e.signal)&&(r=function(t){s&&(n(!t||t.type?new Ii(null,e,s):t),s.abort(),s=null)},e.cancelToken&&e.cancelToken.subscribe(r),e.signal&&(e.signal.aborted?r():e.signal.addEventListener("abort",r)));var p=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(f);p&&-1===fi.protocols.indexOf(p)?n(new $r("Unsupported protocol "+p+":",$r.ERR_BAD_REQUEST,e)):s.send(i||null)}))},Oi={http:null,xhr:Ri};Gr.forEach(Oi,(function(e,t){if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}}));var Di=function(e){for(var t,n,r=(e=Gr.isArray(e)?e:[e]).length,i=0;i<r&&(t=e[i],!(n=Gr.isString(t)?Oi[t.toLowerCase()]:t));i++);if(!n){if(!1===n)throw new $r("Adapter ".concat(t," is not supported by the environment"),"ERR_NOT_SUPPORT");throw new Error(Gr.hasOwnProp(Oi,t)?"Adapter '".concat(t,"' is not available in the build"):"Unknown adapter '".concat(t,"'"))}if(!Gr.isFunction(n))throw new TypeError("adapter is not a function");return n};function Li(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ii(null,e)}function Mi(e){return Li(e),e.headers=_i.from(e.headers),e.data=xi.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Di(e.adapter||vi.adapter)(e).then((function(t){return Li(e),t.data=xi.call(e,e.transformResponse,t),t.headers=_i.from(t.headers),t}),(function(t){return Ei(t)||(Li(e),t&&t.response&&(t.response.data=xi.call(e,e.transformResponse,t.response),t.response.headers=_i.from(t.response.headers))),Promise.reject(t)}))}var Fi=function(e){return e instanceof _i?e.toJSON():e};function Ui(e,t){t=t||{};var n={};function r(e,t,n){return Gr.isPlainObject(e)&&Gr.isPlainObject(t)?Gr.merge.call({caseless:n},e,t):Gr.isPlainObject(t)?Gr.merge({},t):Gr.isArray(t)?t.slice():t}function i(e,t,n){return Gr.isUndefined(t)?Gr.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function a(e,t){if(!Gr.isUndefined(t))return r(void 0,t)}function o(e,t){return Gr.isUndefined(t)?Gr.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function u(n,i,a){return a in t?r(n,i):a in e?r(void 0,n):void 0}var s={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:u,headers:function(e,t){return i(Fi(e),Fi(t),!0)}};return Gr.forEach(Object.keys(Object.assign({},e,t)),(function(r){var a=s[r]||i,o=a(e[r],t[r],r);Gr.isUndefined(o)&&a!==u||(n[r]=o)})),n}var ji="1.4.0",Vi={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){Vi[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var Bi={};Vi.transitional=function(e,t,n){function r(e,t){return"[Axios v1.4.0] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,i,a){if(!1===e)throw new $r(r(i," has been removed"+(t?" in "+t:"")),$r.ERR_DEPRECATED);return t&&!Bi[i]&&(Bi[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,a)}};var qi={assertOptions:function(e,t,n){if("object"!==typeof e)throw new $r("options must be an object",$r.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),i=r.length;i-- >0;){var a=r[i],o=t[a];if(o){var u=e[a],s=void 0===u||o(u,a,e);if(!0!==s)throw new $r("option "+a+" must be "+s,$r.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new $r("Unknown option "+a,$r.ERR_BAD_OPTION)}},validators:Vi},zi=qi.validators,Wi=function(){function e(t){Mt(this,e),this.defaults=t,this.interceptors={request:new ci,response:new ci}}return Ut(e,[{key:"request",value:function(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{};var n,r=t=Ui(this.defaults,t),i=r.transitional,a=r.paramsSerializer,o=r.headers;void 0!==i&&qi.assertOptions(i,{silentJSONParsing:zi.transitional(zi.boolean),forcedJSONParsing:zi.transitional(zi.boolean),clarifyTimeoutError:zi.transitional(zi.boolean)},!1),null!=a&&(Gr.isFunction(a)?t.paramsSerializer={serialize:a}:qi.assertOptions(a,{encode:zi.function,serialize:zi.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase(),(n=o&&Gr.merge(o.common,o[t.method]))&&Gr.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete o[e]})),t.headers=_i.concat(n,o);var u=[],s=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,u.unshift(e.fulfilled,e.rejected))}));var c,l=[];this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));var f,h=0;if(!s){var d=[Mi.bind(this),void 0];for(d.unshift.apply(d,u),d.push.apply(d,l),f=d.length,c=Promise.resolve(t);h<f;)c=c.then(d[h++],d[h++]);return c}f=u.length;var p=t;for(h=0;h<f;){var v=u[h++],y=u[h++];try{p=v(p)}catch(PO){y.call(this,PO);break}}try{c=Mi.call(this,p)}catch(PO){return Promise.reject(PO)}for(h=0,f=l.length;h<f;)c=c.then(l[h++],l[h++]);return c}},{key:"getUri",value:function(e){return ui(Ci((e=Ui(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}]),e}();Gr.forEach(["delete","get","head","options"],(function(e){Wi.prototype[e]=function(t,n){return this.request(Ui(n||{},{method:e,url:t,data:(n||{}).data}))}})),Gr.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(Ui(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Wi.prototype[e]=t(),Wi.prototype[e+"Form"]=t(!0)}));var Ki=Wi,Gi=function(){function e(t){if(Mt(this,e),"function"!==typeof t)throw new TypeError("executor must be a function.");var n;this.promise=new Promise((function(e){n=e}));var r=this;this.promise.then((function(e){if(r._listeners){for(var t=r._listeners.length;t-- >0;)r._listeners[t](e);r._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},t((function(e,t,i){r.reason||(r.reason=new Ii(e,t,i),n(r.reason))}))}return Ut(e,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}},{key:"unsubscribe",value:function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}}}],[{key:"source",value:function(){var t,n=new e((function(e){t=e}));return{token:n,cancel:t}}}]),e}(),Hi=Gi;var Qi={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Qi).forEach((function(e){var t=Ot(e,2),n=t[0],r=t[1];Qi[r]=n}));var Yi=Qi;var $i=function e(t){var n=new Ki(t),r=hr(Ki.prototype.request,n);return Gr.extend(r,Ki.prototype,n,{allOwnKeys:!0}),Gr.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Ui(t,n))},r}(vi);$i.Axios=Ki,$i.CanceledError=Ii,$i.CancelToken=Hi,$i.isCancel=Ei,$i.VERSION=ji,$i.toFormData=ti,$i.AxiosError=$r,$i.Cancel=$i.CanceledError,$i.all=function(e){return Promise.all(e)},$i.spread=function(e){return function(t){return e.apply(null,t)}},$i.isAxiosError=function(e){return Gr.isObject(e)&&!0===e.isAxiosError},$i.mergeConfig=Ui,$i.AxiosHeaders=_i,$i.formToJSON=function(e){return hi(Gr.isHTMLForm(e)?new FormData(e):e)},$i.HttpStatusCode=Yi,$i.default=$i;var Ji=$i.create({baseURL:"https://api.themoviedb.org/3"}),Xi="c98d017c65499b9f27cb56a66414cb88",Zi={fetchTrending:"/trending/all/week?api_key=".concat(Xi,"&language=en-US"),fetchNetflixOriginals:"/discover/tv?api_key=".concat(Xi,"&with_networks=213"),fetchTopRated:"/movie/top_rated?api_key=".concat(Xi,"&language=en-US"),fetchActionMovies:"/discover/movie?api_key=".concat(Xi,"&with_genres=28"),fetchComedyMovies:"/discover/movie?api_key=".concat(Xi,"&with_genres=35"),fetchHorrorMovies:"/discover/movie?api_key=".concat(Xi,"&with_genres=27"),fetchRomanceMovies:"/discover/movie?api_key=".concat(Xi,"&with_genres=10749"),fetchDocumentaries:"/discover/movie?api_key=".concat(Xi,"&with_genres=99")};var ea=function(){var e=Ot((0,t.useState)([]),2),n=e[0],r=e[1];return(0,t.useEffect)((function(){function e(){return(e=fr(cr().mark((function e(){var t;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ji.get(Zi.fetchNetflixOriginals);case 2:return t=e.sent,r(t.data.results[Math.floor(Math.random()*t.data.results.length-1)]),e.abrupt("return",Zi);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),console.log(n),(0,ur.jsxs)("header",{className:"banner",style:{backgroundSize:"cover",backgroundImage:null!==n&&void 0!==n&&n.backdrop_path?'url("https://image.tmdb.org/t/p/original/'.concat(n.backdrop_path,'")'):"url('fallback_image_url')",backgroundPosition:"center"},children:[(0,ur.jsxs)("div",{className:"banner_contents",children:[(0,ur.jsx)("h1",{className:"banner_title",children:(null===n||void 0===n?void 0:n.title)||n.name||n.original_name}),(0,ur.jsxs)("h2",{children:[" ",null===n||void 0===n?void 0:n.original_language]}),(0,ur.jsxs)("div",{className:"banner_buttons",children:[(0,ur.jsx)("button",{className:"banner_button",children:"Play"}),(0,ur.jsx)("button",{className:"banner_button",children:"My List"})]}),(0,ur.jsx)("h1",{className:"banner_description",children:function(e,t){return(null===e||void 0===e?void 0:e.length)>t?e.substr(0,t-1)+"...":e}(null===n||void 0===n?void 0:n.overview,150)})]}),(0,ur.jsx)("div",{className:"banner--fadeBottom"})]})},ta=n(7),na=n.n(ta),ra=n(262),ia=n.n(ra),aa=n(867),oa=n.n(aa),ua=Object.defineProperty,sa=Object.defineProperties,ca=Object.getOwnPropertyDescriptors,la=Object.getOwnPropertySymbols,fa=Object.prototype.hasOwnProperty,ha=Object.prototype.propertyIsEnumerable,da=function(e,t,n){return t in e?ua(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},pa=function(e,t){for(var n in t||(t={}))fa.call(t,n)&&da(e,n,t[n]);if(la){var r,i=Qt(la(t));try{for(i.s();!(r=i.n()).done;){n=r.value;ha.call(t,n)&&da(e,n,t[n])}}catch(a){i.e(a)}finally{i.f()}}return e},va=function(e,t){return sa(e,ca(t))};function ya(e,t){var n,r;if(e.videoId!==t.videoId)return!0;var i=(null==(n=e.opts)?void 0:n.playerVars)||{},a=(null==(r=t.opts)?void 0:r.playerVars)||{};return i.start!==a.start||i.end!==a.end}function ma(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return va(pa({},e),{height:0,width:0,playerVars:va(pa({},e.playerVars),{autoplay:0,start:0,end:0})})}function ga(e,t){return e.videoId!==t.videoId||!ia()(ma(e.opts),ma(t.opts))}function ka(e,t){var n,r,i,a;return e.id!==t.id||e.className!==t.className||(null==(n=e.opts)?void 0:n.width)!==(null==(r=t.opts)?void 0:r.width)||(null==(i=e.opts)?void 0:i.height)!==(null==(a=t.opts)?void 0:a.height)||e.iframeClassName!==t.iframeClassName||e.title!==t.title}var wa={videoId:na().string,id:na().string,className:na().string,iframeClassName:na().string,style:na().object,title:na().string,loading:na().oneOf(["lazy","eager"]),opts:na().objectOf(na().any),onReady:na().func,onError:na().func,onPlay:na().func,onPause:na().func,onEnd:na().func,onStateChange:na().func,onPlaybackRateChange:na().func,onPlaybackQualityChange:na().func},ba=function(e){Vt(r,e);var n=Wt(r);function r(e){var t;return Mt(this,r),(t=n.call(this,e)).destroyPlayerPromise=void 0,t.onPlayerReady=function(e){var n,r;return null==(r=(n=t.props).onReady)?void 0:r.call(n,e)},t.onPlayerError=function(e){var n,r;return null==(r=(n=t.props).onError)?void 0:r.call(n,e)},t.onPlayerStateChange=function(e){var n,i,a,o,u,s,c,l;switch(null==(i=(n=t.props).onStateChange)||i.call(n,e),e.data){case r.PlayerState.ENDED:null==(o=(a=t.props).onEnd)||o.call(a,e);break;case r.PlayerState.PLAYING:null==(s=(u=t.props).onPlay)||s.call(u,e);break;case r.PlayerState.PAUSED:null==(l=(c=t.props).onPause)||l.call(c,e)}},t.onPlayerPlaybackRateChange=function(e){var n,r;return null==(r=(n=t.props).onPlaybackRateChange)?void 0:r.call(n,e)},t.onPlayerPlaybackQualityChange=function(e){var n,r;return null==(r=(n=t.props).onPlaybackQualityChange)?void 0:r.call(n,e)},t.destroyPlayer=function(){return t.internalPlayer?(t.destroyPlayerPromise=t.internalPlayer.destroy().then((function(){return t.destroyPlayerPromise=void 0})),t.destroyPlayerPromise):Promise.resolve()},t.createPlayer=function(){if("undefined"!==typeof document)if(t.destroyPlayerPromise)t.destroyPlayerPromise.then(t.createPlayer);else{var e=va(pa({},t.props.opts),{videoId:t.props.videoId});t.internalPlayer=oa()(t.container,e),t.internalPlayer.on("ready",t.onPlayerReady),t.internalPlayer.on("error",t.onPlayerError),t.internalPlayer.on("stateChange",t.onPlayerStateChange),t.internalPlayer.on("playbackRateChange",t.onPlayerPlaybackRateChange),t.internalPlayer.on("playbackQualityChange",t.onPlayerPlaybackQualityChange),(t.props.title||t.props.loading)&&t.internalPlayer.getIframe().then((function(e){t.props.title&&e.setAttribute("title",t.props.title),t.props.loading&&e.setAttribute("loading",t.props.loading)}))}},t.resetPlayer=function(){return t.destroyPlayer().then(t.createPlayer)},t.updatePlayer=function(){var e;null==(e=t.internalPlayer)||e.getIframe().then((function(e){t.props.id?e.setAttribute("id",t.props.id):e.removeAttribute("id"),t.props.iframeClassName?e.setAttribute("class",t.props.iframeClassName):e.removeAttribute("class"),t.props.opts&&t.props.opts.width?e.setAttribute("width",t.props.opts.width.toString()):e.removeAttribute("width"),t.props.opts&&t.props.opts.height?e.setAttribute("height",t.props.opts.height.toString()):e.removeAttribute("height"),t.props.title?e.setAttribute("title",t.props.title):e.setAttribute("title","YouTube video player"),t.props.loading?e.setAttribute("loading",t.props.loading):e.removeAttribute("loading")}))},t.getInternalPlayer=function(){return t.internalPlayer},t.updateVideo=function(){var e,n,r,i;if("undefined"!==typeof t.props.videoId&&null!==t.props.videoId){var a=!1,o={videoId:t.props.videoId};(null==(n=t.props.opts)?void 0:n.playerVars)&&(a=1===t.props.opts.playerVars.autoplay,"start"in t.props.opts.playerVars&&(o.startSeconds=t.props.opts.playerVars.start),"end"in t.props.opts.playerVars&&(o.endSeconds=t.props.opts.playerVars.end)),a?null==(r=t.internalPlayer)||r.loadVideoById(o):null==(i=t.internalPlayer)||i.cueVideoById(o)}else null==(e=t.internalPlayer)||e.stopVideo()},t.refContainer=function(e){t.container=e},t.container=null,t.internalPlayer=null,t}return Ut(r,[{key:"componentDidMount",value:function(){this.createPlayer()}},{key:"componentDidUpdate",value:function(e){return t=this,n=null,r=cr().mark((function t(){return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(ka(e,this.props)&&this.updatePlayer(),!ga(e,this.props)){t.next=4;break}return t.next=4,this.resetPlayer();case 4:ya(e,this.props)&&this.updateVideo();case 5:case"end":return t.stop()}}),t,this)})),new Promise((function(e,i){var a=function(e){try{u(r.next(e))}catch(t){i(t)}},o=function(e){try{u(r.throw(e))}catch(t){i(t)}},u=function(t){return t.done?e(t.value):Promise.resolve(t.value).then(a,o)};u((r=r.apply(t,n)).next())}));var t,n,r}},{key:"componentWillUnmount",value:function(){this.destroyPlayer()}},{key:"render",value:function(){return t.createElement("div",{className:this.props.className,style:this.props.style},t.createElement("div",{id:this.props.id,className:this.props.iframeClassName,ref:this.refContainer}))}}]),r}(t.Component),_a=ba;_a.propTypes=wa,_a.defaultProps={videoId:"",id:"",className:"",iframeClassName:"",style:{},title:"",loading:void 0,opts:{},onReady:function(){},onError:function(){},onPlay:function(){},onPause:function(){},onEnd:function(){},onStateChange:function(){},onPlaybackRateChange:function(){},onPlaybackQualityChange:function(){}},_a.PlayerState={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5};var xa=_a,Ea=n(453),Sa=n.n(Ea);var Ia=function(e){var n=e.title,r=e.fetchUrl,i=e.isLargeRow,a=void 0!==i&&i,o=Ot((0,t.useState)([]),2),u=o[0],s=o[1],c=Ot((0,t.useState)(""),2),l=c[0],f=c[1];return(0,t.useEffect)((function(){function e(){return(e=fr(cr().mark((function e(){var t;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ji.get(r);case 2:return t=e.sent,s(t.data.results),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[r]),(0,ur.jsxs)("div",{className:"row",children:[(0,ur.jsx)("h2",{children:n}),(0,ur.jsx)("div",{className:"row_posters",children:u.map((function(e){return(a&&e.poster_path||!a&&e.backdrop_path)&&(0,ur.jsx)("img",{className:"row_poster ".concat(a&&"row_posterLarge"),onClick:function(){return function(e){l?f(""):Sa()((null===e||void 0===e?void 0:e.name)||"").then((function(e){var t=new URLSearchParams(new URL(e).search);f(t.get("v"))})).catch((function(e){return console.log(e)}))}(e)},src:"".concat("https://image.tmdb.org/t/p/original/").concat(a?e.poster_path:e.backdrop_path),alt:e.name},e.id)}))}),l&&(0,ur.jsx)(xa,{videoId:l,opts:{height:"390",width:"100%",playerVars:{autoplay:1}}})]})};var Ta=function(){return(0,ur.jsxs)("div",{className:"homeScreen",children:[(0,ur.jsx)(sr,{}),(0,ur.jsx)(ea,{}),(0,ur.jsx)(Ia,{title:"NETFLIX ORIGINALS",fetchUrl:Zi.fetchNetflixOriginals,isLargeRow:!0}),(0,ur.jsx)(Ia,{title:"Trending Now",fetchUrl:Zi.fetchTrending}),(0,ur.jsx)(Ia,{title:"Top Rated",fetchUrl:Zi.fetchTopRated}),(0,ur.jsx)(Ia,{title:"Action Movies",fetchUrl:Zi.fetchActionMovies}),(0,ur.jsx)(Ia,{title:"Comedy Movies",fetchUrl:Zi.fetchComedyMovies}),(0,ur.jsx)(Ia,{title:"Horror Movies",fetchUrl:Zi.fetchHorrorMovies}),(0,ur.jsx)(Ia,{title:"Romance Movies",fetchUrl:Zi.fetchRomanceMovies}),(0,ur.jsx)(Ia,{title:"Documentaries",fetchUrl:Zi.fetchDocumentaries})]})};new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);var Ca=r.startTransition;function Na(e){var n,r=e.basename,i=e.children,a=e.future,o=e.window,u=t.useRef();null==u.current&&(u.current=(void 0===(n={window:o,v5Compat:!0})&&(n={}),an((function(e,t){var n=e.location;return tn("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:nn(t)}),null,n)));var s=u.current,c=Ot(t.useState({action:s.action,location:s.location}),2),l=c[0],f=c[1],h=(a||{}).v7_startTransition,d=t.useCallback((function(e){h&&Ca?Ca((function(){return f(e)})):f(e)}),[f,h]);return t.useLayoutEffect((function(){return s.listen(d)}),[s,d]),t.createElement(rr,{basename:r,children:i,location:l.location,navigationType:l.action,navigator:s})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var Pa,Aa;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(Pa||(Pa={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Aa||(Aa={}));var Ra=!1,Oa=!1,Da="${JSCORE_VERSION}",La=function(e,t){if(!e)throw Ma(t)},Ma=function(e){return new Error("Firebase Database ("+Da+") INTERNAL ASSERT FAILED: "+e)},Fa=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Ua={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Fa(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new ja;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},ja=function(e){Vt(n,e);var t=Wt(n);function n(){var e;return Mt(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return Ut(n)}(Gt(Error)),Va=function(e){var t=Fa(e);return Ua.encodeByteArray(t,!0)},Ba=function(e){return Va(e).replace(/\./g,"")},qa=function(e){try{return Ua.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function za(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=za(e[n],t[n]));return e}var Wa=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},Ka=function(){try{return Wa()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/BunnuFlix",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&qa(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Ga=function(){var e;return null===(e=Ka())||void 0===e?void 0:e.config},Ha=function(){function e(){var t=this;Mt(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return Ut(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Qa(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ba(JSON.stringify({alg:"none",type:"JWT"})),Ba(JSON.stringify(a)),""].join(".")}function Ya(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function $a(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ya())}function Ja(){var e,t=null===(e=Ka())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function Xa(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Za(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function eo(){var e=Ya();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function to(){return!0===Ra||!0===Oa}function no(){try{return"object"===typeof indexedDB}catch(e){return!1}}var ro=function(e){Vt(n,e);var t=Wt(n);function n(e,r,i){var a;return Mt(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(zt(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(zt(a),io.prototype.create),a}return Ut(n)}(Gt(Error)),io=function(){function e(t,n,r){Mt(this,e),this.service=t,this.serviceName=n,this.errors=r}return Ut(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(ao,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new ro(n,a,t)}}]),e}();var ao=/\{\$([^}]+)}/g;function oo(e){return JSON.parse(e)}function uo(e){return JSON.stringify(e)}var so=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=oo(qa(a[0])||""),n=oo(qa(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function co(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function lo(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function fo(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ho(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function po(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(vo(u)&&vo(s)){if(!po(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function vo(e){return null!==e&&"object"===typeof e}function yo(e){for(var t=[],n=function(){var e=Ot(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function mo(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=Ot(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function go(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var ko=function(){function e(){Mt(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return Ut(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var u,s,c=this.chain_[0],l=this.chain_[1],f=this.chain_[2],h=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(u=h^l&(f^h),s=1518500249):(u=l^f^h,s=1859775393):p<60?(u=l&f|h&(l|f),s=2400959708):(u=l^f^h,s=3395469782);var v=(c<<5|c>>>27)+u+d+s+n[p]&4294967295;d=h,h=f,f=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function wo(e,t){var n=new bo(e,t);return n.subscribe.bind(n)}var bo=function(){function e(t,n){var r=this;Mt(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return Ut(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=Qt(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=_o),void 0===r.error&&(r.error=_o),void 0===r.complete&&(r.complete=_o);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function _o(){}var xo=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function Eo(e,t){return"".concat(e," failed: ").concat(t," argument ")}function So(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(Eo(e,t)+"must be a valid function.")}function Io(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(Eo(e,t)+"must be a valid context object.")}var To=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function Co(e){return e&&e._delegate?e._delegate:e}var No=function(){function e(t,n,r){Mt(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return Ut(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Po="[DEFAULT]",Ao=function(){function e(t,n){Mt(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return Ut(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Ha;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Po})}catch(s){}var t,n=Qt(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=Ot(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Po;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=fr(cr().mark((function e(){var t;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(Lt(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),Lt(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Po;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Po;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=Qt(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=Ot(i.value,2),s=u[0],c=u[1];r===this.normalizeInstanceIdentifier(s)&&c.resolve(a)}}catch(l){o.e(l)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=Qt(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(aP){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Po?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(aP){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Po;return this.component?this.component.multipleInstances?e:Po:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Ro,Oo,Do=function(){function e(t){Mt(this,e),this.name=t,this.providers=new Map}return Ut(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Ao(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Lo=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Oo||(Oo={}));var Mo={debug:Oo.DEBUG,verbose:Oo.VERBOSE,info:Oo.INFO,warn:Oo.WARN,error:Oo.ERROR,silent:Oo.SILENT},Fo=Oo.INFO,Uo=(h(Ro={},Oo.DEBUG,"log"),h(Ro,Oo.VERBOSE,"log"),h(Ro,Oo.INFO,"info"),h(Ro,Oo.WARN,"warn"),h(Ro,Oo.ERROR,"error"),Ro),jo=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Uo[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Vo=function(){function e(t){Mt(this,e),this.name=t,this._logLevel=Fo,this._logHandler=jo,this._userLogHandler=null,Lo.push(this)}return Ut(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Oo))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Mo[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Oo.DEBUG].concat(t)),this._logHandler.apply(this,[this,Oo.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Oo.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Oo.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Oo.INFO].concat(t)),this._logHandler.apply(this,[this,Oo.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Oo.WARN].concat(t)),this._logHandler.apply(this,[this,Oo.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Oo.ERROR].concat(t)),this._logHandler.apply(this,[this,Oo.ERROR].concat(t))}}]),e}();var Bo,qo,zo=function(e,t){return t.some((function(t){return e instanceof t}))};var Wo=new WeakMap,Ko=new WeakMap,Go=new WeakMap,Ho=new WeakMap,Qo=new WeakMap;var Yo={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ko.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Go.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xo(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function $o(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(qo||(qo=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Zo(this),n),Xo(Wo.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Xo(e.apply(Zo(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Zo(this),t].concat(r));return Go.set(a,t.sort?t.sort():[t]),Xo(a)}}function Jo(e){return"function"===typeof e?$o(e):(e instanceof IDBTransaction&&function(e){if(!Ko.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Ko.set(e,t)}}(e),zo(e,Bo||(Bo=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Yo):e)}function Xo(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Xo(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Wo.set(t,e)})).catch((function(){})),Qo.set(t,e),t}(e);if(Ho.has(e))return Ho.get(e);var t=Jo(e);return t!==e&&(Ho.set(e,t),Qo.set(t,e)),t}var Zo=function(e){return Qo.get(e)};var eu,tu,nu=["get","getKey","getAll","getAllKeys","count"],ru=["put","add","delete","clear"],iu=new Map;function au(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(iu.get(t))return iu.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=ru.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||nu.includes(n))){var a=function(){var e=fr(cr().mark((function e(t){var a,o,u,s,c,l,f=arguments;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return iu.set(t,a),a}}}Yo=function(e){return Oe(Oe({},e),{},{get:function(t,n,r){return au(t,n)||e.get(t,n,r)},has:function(t,n){return!!au(t,n)||e.has(t,n)}})}(Yo);var ou=function(){function e(t){Mt(this,e),this.container=t}return Ut(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var uu="@firebase/app",su="0.9.13",cu=new Vo("@firebase/app"),lu="[DEFAULT]",fu=(h(eu={},uu,"fire-core"),h(eu,"@firebase/app-compat","fire-core-compat"),h(eu,"@firebase/analytics","fire-analytics"),h(eu,"@firebase/analytics-compat","fire-analytics-compat"),h(eu,"@firebase/app-check","fire-app-check"),h(eu,"@firebase/app-check-compat","fire-app-check-compat"),h(eu,"@firebase/auth","fire-auth"),h(eu,"@firebase/auth-compat","fire-auth-compat"),h(eu,"@firebase/database","fire-rtdb"),h(eu,"@firebase/database-compat","fire-rtdb-compat"),h(eu,"@firebase/functions","fire-fn"),h(eu,"@firebase/functions-compat","fire-fn-compat"),h(eu,"@firebase/installations","fire-iid"),h(eu,"@firebase/installations-compat","fire-iid-compat"),h(eu,"@firebase/messaging","fire-fcm"),h(eu,"@firebase/messaging-compat","fire-fcm-compat"),h(eu,"@firebase/performance","fire-perf"),h(eu,"@firebase/performance-compat","fire-perf-compat"),h(eu,"@firebase/remote-config","fire-rc"),h(eu,"@firebase/remote-config-compat","fire-rc-compat"),h(eu,"@firebase/storage","fire-gcs"),h(eu,"@firebase/storage-compat","fire-gcs-compat"),h(eu,"@firebase/firestore","fire-fst"),h(eu,"@firebase/firestore-compat","fire-fst-compat"),h(eu,"fire-js","fire-js"),h(eu,"firebase","fire-js-all"),eu),hu=new Map,du=new Map;function pu(e,t){try{e.container.addComponent(t)}catch(n){cu.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function vu(e,t){e.container.addOrOverwriteComponent(t)}function yu(e){var t=e.name;if(du.has(t))return cu.debug("There were multiple attempts to register component ".concat(t,".")),!1;du.set(t,e);var n,r=Qt(hu.values());try{for(r.s();!(n=r.n()).done;){pu(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function mu(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function gu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:lu;mu(e,t).clearInstance(n)}function ku(){du.clear()}var wu=(h(tu={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),h(tu,"bad-app-name","Illegal App name: '{$appName}"),h(tu,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),h(tu,"app-deleted","Firebase App named '{$appName}' already deleted"),h(tu,"no-options","Need to provide options, when not being deployed to hosting via source."),h(tu,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),h(tu,"invalid-log-argument","First argument to `onLog` must be null or a function."),h(tu,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),h(tu,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),h(tu,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),h(tu,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),tu),bu=new io("app","Firebase",wu),_u=function(){function e(t,n,r){var i=this;Mt(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new No("app",(function(){return i}),"PUBLIC"))}return Ut(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw bu.create("app-deleted",{appName:this._name})}}]),e}(),xu="9.23.0";function Eu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:lu,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw bu.create("bad-app-name",{appName:String(i)});if(n||(n=Ga()),!n)throw bu.create("no-options");var a=hu.get(i);if(a){if(po(n,a.options)&&po(r,a.config))return a;throw bu.create("duplicate-app",{appName:i})}var o,u=new Do(i),s=Qt(du.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new _u(n,r,u);return hu.set(i,l),l}function Su(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lu,t=hu.get(e);if(!t&&e===lu&&Ga())return Eu();if(!t)throw bu.create("no-app",{appName:e});return t}function Iu(){return Array.from(hu.values())}function Tu(e){return Cu.apply(this,arguments)}function Cu(){return(Cu=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!hu.has(n)){e.next=6;break}return hu.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nu(e,t,n){var r,i=null!==(r=fu[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void cu.warn(u.join(" "))}yu(new No("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Pu(e,t){if(null!==e&&"function"!==typeof e)throw bu.create("invalid-log-argument");!function(e,t){var n,r=Qt(Lo);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Mo[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Oo[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Au(e){var t;t=e,Lo.forEach((function(e){e.setLogLevel(t)}))}var Ru="firebase-heartbeat-database",Ou=1,Du="firebase-heartbeat-store",Lu=null;function Mu(){return Lu||(Lu=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=Xo(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(Xo(u.result),e.oldVersion,e.newVersion,Xo(u.transaction),e)})),r&&u.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),s}(Ru,Ou,{upgrade:function(e,t){if(0===t)e.createObjectStore(Du)}}).catch((function(e){throw bu.create("idb-open",{originalErrorMessage:e.message})}))),Lu}function Fu(e){return Uu.apply(this,arguments)}function Uu(){return Uu=fr(cr().mark((function e(t){var n,r,i;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Mu();case 3:return n=e.sent,e.next=6,n.transaction(Du).objectStore(Du).get(Bu(t));case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof ro?cu.warn(e.t0.message):(i=bu.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),cu.warn(i.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),Uu.apply(this,arguments)}function ju(e,t){return Vu.apply(this,arguments)}function Vu(){return Vu=fr(cr().mark((function e(t,n){var r,i,a,o;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Mu();case 3:return r=e.sent,i=r.transaction(Du,"readwrite"),a=i.objectStore(Du),e.next=8,a.put(n,Bu(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof ro?cu.warn(e.t0.message):(o=bu.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),cu.warn(o.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),Vu.apply(this,arguments)}function Bu(e){return"".concat(e.name,"!").concat(e.options.appId)}var qu=function(){function e(t){var n=this;Mt(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Hu(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return Ut(e,[{key:"triggerHeartbeat",value:function(){var e=fr(cr().mark((function e(){var t,n,r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=zu(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=fr(cr().mark((function e(){var t,n,r,i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=zu(),n=Wu(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=Ba(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function zu(){return(new Date).toISOString().substring(0,10)}function Wu(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=Qt(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Qu(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Qu(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Ku,Gu,Hu=function(){function e(t){Mt(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return Ut(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(no()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(PO){t(PO)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=fr(cr().mark((function e(){var t;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Fu(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=fr(cr().mark((function e(t){var n,r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",ju(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=fr(cr().mark((function e(t){var n,r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",ju(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(Lt(r.heartbeats),Lt(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Qu(e){return Ba(JSON.stringify({version:2,heartbeats:e})).length}Ku="",yu(new No("platform-logger",(function(e){return new ou(e)}),"PRIVATE")),yu(new No("heartbeat",(function(e){return new qu(e)}),"PRIVATE")),Nu(uu,su,Ku),Nu(uu,su,"esm2017"),Nu("fire-js","");var Yu=function(){function e(t,n){var r=this;Mt(this,e),this._delegate=t,this.firebase=n,pu(t,new No("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return Ut(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Tu(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lu;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lu;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){pu(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){vu(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),$u=(h(Gu={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),h(Gu,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Gu),Ju=new io("app-compat","Firebase",$u);var Xu=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Eu(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(co(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Nu,setLogLevel:Au,onLog:Pu,apps:null,SDK_VERSION:xu,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(yu(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Ju.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&za(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!co(n,e=e||lu))throw Ju.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Yu);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){za(n,e)},createSubscribe:wo,ErrorFactory:io,deepExtend:za}),n}(),Zu=new Vo("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Zu.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var es=self.firebase.SDK_VERSION;es&&es.indexOf("LITE")>=0&&Zu.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var ts=Xu;!function(e){Nu("@firebase/app-compat","0.2.13",e)}();function ns(){return ns="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Bt(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},ns.apply(this,arguments)}ts.registerVersion("firebase","9.23.0","app-compat");function rs(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;var is,as={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},os="EMAIL_SIGNIN",us="PASSWORD_RESET",ss="RECOVER_EMAIL",cs="REVERT_SECOND_FACTOR_ADDITION",ls="VERIFY_AND_CHANGE_EMAIL",fs="VERIFY_EMAIL";function hs(){return h({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var ds=function(){var e;return h(e={},"admin-restricted-operation","This operation is restricted to administrators only."),h(e,"argument-error",""),h(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),h(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),h(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),h(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),h(e,"cordova-not-ready","Cordova framework is not ready."),h(e,"cors-unsupported","This browser is not supported."),h(e,"credential-already-in-use","This credential is already associated with a different user account."),h(e,"custom-token-mismatch","The custom token corresponds to a different audience."),h(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),h(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),h(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),h(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),h(e,"email-already-in-use","The email address is already in use by another account."),h(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),h(e,"expired-action-code","The action code has expired."),h(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),h(e,"internal-error","An internal AuthError has occurred."),h(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),h(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),h(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),h(e,"invalid-auth-event","An internal AuthError has occurred."),h(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),h(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),h(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),h(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),h(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),h(e,"invalid-email","The email address is badly formatted."),h(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),h(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),h(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),h(e,"invalid-credential","The supplied auth credential is malformed or has expired."),h(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),h(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),h(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),h(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),h(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),h(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),h(e,"wrong-password","The password is invalid or the user does not have a password."),h(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),h(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),h(e,"invalid-provider-id","The specified provider ID is invalid."),h(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),h(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),h(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),h(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),h(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),h(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),h(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),h(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),h(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),h(e,"missing-continue-uri","A continue URL must be provided in the request."),h(e,"missing-iframe-start","An internal AuthError has occurred."),h(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),h(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),h(e,"missing-password","A non-empty password must be provided"),h(e,"missing-multi-factor-info","No second factor identifier is provided."),h(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),h(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),h(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),h(e,"app-deleted","This instance of FirebaseApp has been deleted."),h(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),h(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),h(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),h(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),h(e,"no-auth-event","An internal AuthError has occurred."),h(e,"no-such-provider","User was not linked to an account with the given provider."),h(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),h(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),h(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),h(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),h(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),h(e,"provider-already-linked","User can only be linked to one identity for the given provider."),h(e,"quota-exceeded","The project's quota for this operation has been exceeded."),h(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),h(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),h(e,"rejected-credential","The request contains malformed or mismatching credentials."),h(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),h(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),h(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),h(e,"timeout","The operation has timed out."),h(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),h(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),h(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),h(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),h(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),h(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),h(e,"unverified-email","The operation requires a verified email."),h(e,"user-cancelled","The user did not grant your application the permissions it requested."),h(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),h(e,"user-disabled","The user account has been disabled by an administrator."),h(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),h(e,"user-signed-out",""),h(e,"weak-password","The password must be 6 characters long or more."),h(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),h(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),h(e,"missing-recaptcha-token","The reCAPTCHA token is missing when sending request to the backend."),h(e,"invalid-recaptcha-token","The reCAPTCHA token is invalid when sending request to the backend."),h(e,"invalid-recaptcha-action","The reCAPTCHA action is invalid when sending request to the backend."),h(e,"recaptcha-not-enabled","reCAPTCHA Enterprise integration is not enabled for this project."),h(e,"missing-client-type","The reCAPTCHA client type is missing when sending request to the backend."),h(e,"missing-recaptcha-version","The reCAPTCHA version is missing when sending request to the backend."),h(e,"invalid-req-type","Invalid request parameters."),h(e,"invalid-recaptcha-version","The reCAPTCHA version is invalid when sending request to the backend."),e},ps=hs,vs=new io("auth","Firebase",hs()),ys=new Vo("@firebase/auth");function ms(e){if(ys.logLevel<=Oo.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ys.warn.apply(ys,["Auth (".concat(xu,"): ").concat(e)].concat(n))}}function gs(e){if(ys.logLevel<=Oo.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ys.error.apply(ys,["Auth (".concat(xu,"): ").concat(e)].concat(n))}}function ks(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw xs.apply(void 0,[e].concat(n))}function ws(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return xs.apply(void 0,[e].concat(n))}function bs(e,t,n){var r=Object.assign(Object.assign({},ps()),h({},t,n));return new io("auth","Firebase",r).create(t,{appName:e.name})}function _s(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&ks(e,"argument-error"),bs(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function xs(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=Lt(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(Lt(o)))}return vs.create.apply(vs,[e].concat(n))}function Es(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw xs.apply(void 0,[t].concat(r))}}function Ss(e){var t="INTERNAL ASSERTION FAILED: "+e;throw gs(t),new Error(t)}function Is(e,t){e||Ss(t)}function Ts(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Cs(){return"http:"===Ns()||"https:"===Ns()}function Ns(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Ps=function(){function e(t,n){Mt(this,e),this.shortDelay=t,this.longDelay=n,Is(n>t,"Short delay should be less than long delay!"),this.isMobile=$a()||Za()}return Ut(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Cs()||Xa()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function As(e,t){Is(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Rs=function(){function e(){Mt(this,e)}return Ut(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Ss("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Ss("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Ss("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Os=(h(is={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),h(is,"MISSING_CUSTOM_TOKEN","internal-error"),h(is,"INVALID_IDENTIFIER","invalid-email"),h(is,"MISSING_CONTINUE_URI","internal-error"),h(is,"INVALID_PASSWORD","wrong-password"),h(is,"MISSING_PASSWORD","missing-password"),h(is,"EMAIL_EXISTS","email-already-in-use"),h(is,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),h(is,"INVALID_IDP_RESPONSE","invalid-credential"),h(is,"INVALID_PENDING_TOKEN","invalid-credential"),h(is,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),h(is,"MISSING_REQ_TYPE","internal-error"),h(is,"EMAIL_NOT_FOUND","user-not-found"),h(is,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),h(is,"EXPIRED_OOB_CODE","expired-action-code"),h(is,"INVALID_OOB_CODE","invalid-action-code"),h(is,"MISSING_OOB_CODE","internal-error"),h(is,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),h(is,"INVALID_ID_TOKEN","invalid-user-token"),h(is,"TOKEN_EXPIRED","user-token-expired"),h(is,"USER_NOT_FOUND","user-token-expired"),h(is,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),h(is,"INVALID_CODE","invalid-verification-code"),h(is,"INVALID_SESSION_INFO","invalid-verification-id"),h(is,"INVALID_TEMPORARY_PROOF","invalid-credential"),h(is,"MISSING_SESSION_INFO","missing-verification-id"),h(is,"SESSION_EXPIRED","code-expired"),h(is,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),h(is,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),h(is,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),h(is,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),h(is,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),h(is,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),h(is,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),h(is,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),h(is,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),h(is,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),h(is,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),h(is,"RECAPTCHA_NOT_ENABLED","recaptcha-not-enabled"),h(is,"MISSING_RECAPTCHA_TOKEN","missing-recaptcha-token"),h(is,"INVALID_RECAPTCHA_TOKEN","invalid-recaptcha-token"),h(is,"INVALID_RECAPTCHA_ACTION","invalid-recaptcha-action"),h(is,"MISSING_CLIENT_TYPE","missing-client-type"),h(is,"MISSING_RECAPTCHA_VERSION","missing-recaptcha-version"),h(is,"INVALID_RECAPTCHA_VERSION","invalid-recaptcha-version"),h(is,"INVALID_REQ_TYPE","invalid-req-type"),is),Ds=new Ps(3e4,6e4);function Ls(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Ms(e,t,n,r){return Fs.apply(this,arguments)}function Fs(){return Fs=fr(cr().mark((function e(t,n,r,i){var a,o=arguments;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Us(t,a,fr(cr().mark((function e(){var a,o,u,s;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=yo(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Rs.fetch()(qs(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Fs.apply(this,arguments)}function Us(e,t,n){return js.apply(this,arguments)}function js(){return js=fr(cr().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Os),n),e.prev=2,a=new zs(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw Ws(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),l=Ot(c,2),f=l[0],h=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw Ws(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw Ws(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw Ws(t,"user-disabled",u);case 29:if(d=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!h){e.next=34;break}throw bs(t,d,h);case 34:ks(t,d);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof ro)){e.next=41;break}throw e.t0;case 41:ks(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),js.apply(this,arguments)}function Vs(e,t,n,r){return Bs.apply(this,arguments)}function Bs(){return Bs=fr(cr().mark((function e(t,n,r,i){var a,o,u=arguments;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,Ms(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&ks(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Bs.apply(this,arguments)}function qs(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?As(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var zs=function(){function e(t){var n=this;Mt(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(ws(n.auth,"network-request-failed"))}),Ds.get())}))}return Ut(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Ws(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=ws(e,t,r);return i.customData._tokenResponse=n,i}function Ks(e,t){return Gs.apply(this,arguments)}function Gs(){return Gs=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ms(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),Gs.apply(this,arguments)}function Hs(e,t){return Qs.apply(this,arguments)}function Qs(){return Qs=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ms(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Qs.apply(this,arguments)}function Ys(e,t){return $s.apply(this,arguments)}function $s(){return $s=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ms(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),$s.apply(this,arguments)}function Js(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Xs(){return Xs=fr(cr().mark((function e(t){var n,r,i,a,o,u,s=arguments;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=Co(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Es((a=ec(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Js(Zs(a.auth_time)),issuedAtTime:Js(Zs(a.iat)),expirationTime:Js(Zs(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Xs.apply(this,arguments)}function Zs(e){return 1e3*Number(e)}function ec(e){var t=Ot(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return gs("JWT malformed, contained fewer than 3 sections"),null;try{var a=qa(r);return a?JSON.parse(a):(gs("Failed to decode base64 JWT payload"),null)}catch(o){return gs("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function tc(e,t){return nc.apply(this,arguments)}function nc(){return nc=fr(cr().mark((function e(t,n){var r=arguments;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof ro&&rc(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),nc.apply(this,arguments)}function rc(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var ic=function(){function e(t){Mt(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return Ut(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(fr(cr().mark((function t(){return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),ac=function(){function e(t,n){Mt(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return Ut(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Js(this.lastLoginAt),this.creationTime=Js(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function oc(e){return uc.apply(this,arguments)}function uc(){return uc=fr(cr().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,tc(t,Ys(r,{idToken:i}));case 6:Es(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=rs(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],s=cc(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new ac(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),uc.apply(this,arguments)}function sc(){return(sc=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Co(t),e.next=3,oc(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cc(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(Lt(n),Lt(t))}function lc(e,t){return fc.apply(this,arguments)}function fc(){return fc=fr(cr().mark((function e(t,n){var r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Us(t,{},fr(cr().mark((function e(){var r,i,a,o,u,s;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yo({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=qs(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Rs.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),fc.apply(this,arguments)}var hc=function(){function e(){Mt(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return Ut(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Es(e.idToken,"internal-error"),Es("undefined"!==typeof e.idToken,"internal-error"),Es("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=ec(e);return Es(t,"internal-error"),Es("undefined"!==typeof t.exp,"internal-error"),Es("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=fr(cr().mark((function e(t){var n,r=arguments;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Es(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=fr(cr().mark((function e(t,n){var r,i,a,o;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lc(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Ss("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Es("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Es("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Es("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function dc(e,t){Es("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var pc=function(){function e(t){Mt(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=rs(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ic(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?Lt(a.providerData):[],this.metadata=new ac(a.createdAt||void 0,a.lastLoginAt||void 0)}return Ut(e,[{key:"getIdToken",value:function(){var e=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tc(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Es(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Xs.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return sc.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Es(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){Es(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=fr(cr().mark((function e(t){var n,r,i=arguments;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,oc(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=fr(cr().mark((function e(){var t;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,tc(this,Ks(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,b=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;Es(k&&x,t,"internal-error");var E=hc.fromJSON(this.name,x);Es("string"===typeof k,t,"internal-error"),dc(f,t.name),dc(h,t.name),Es("boolean"===typeof w,t,"internal-error"),Es("boolean"===typeof b,t,"internal-error"),dc(d,t.name),dc(p,t.name),dc(v,t.name),dc(y,t.name),dc(m,t.name),dc(g,t.name);var S=new e({uid:k,auth:t,email:h,emailVerified:w,displayName:f,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:E,createdAt:m,lastLoginAt:g});return _&&Array.isArray(_)&&(S.providerData=_.map((function(e){return Object.assign({},e)}))),y&&(S._redirectEventId=y),S}},{key:"_fromIdTokenResponse",value:function(){var t=fr(cr().mark((function t(n,r){var i,a,o,u=arguments;return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new hc).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,oc(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),vc=new Map;function yc(e){Is(e instanceof Function,"Expected a class definition");var t=vc.get(e);return t?(Is(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,vc.set(e,t),t)}var mc=function(){function e(){Mt(this,e),this.type="NONE",this.storage={}}return Ut(e,[{key:"_isAvailable",value:function(){var e=fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();mc.type="NONE";var gc=mc;function kc(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var wc=function(){function e(t,n,r){Mt(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=kc(this.userKey,a.apiKey,o),this.fullPersistenceKey=kc("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return Ut(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=fr(cr().mark((function e(){var t;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?pc._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=fr(cr().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(yc(gc),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||yc(gc),u=kc(i,n.config.apiKey,n.name),s=null,c=Qt(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=pc._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function bc(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Sc(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(_c(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Tc(t))return"Blackberry";if(Cc(t))return"Webos";if(xc(t))return"Safari";if((t.includes("chrome/")||Ec(t))&&!t.includes("edge/"))return"Chrome";if(Ic(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function _c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ya();return/firefox\//i.test(e)}function xc(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ya()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ec(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ya();return/crios\//i.test(e)}function Sc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ya();return/iemobile/i.test(e)}function Ic(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ya();return/android/i.test(e)}function Tc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ya();return/blackberry/i.test(e)}function Cc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ya();return/webos/i.test(e)}function Nc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ya();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Pc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ya();return Nc(e)||Ic(e)||Cc(e)||Tc(e)||/windows phone/i.test(e)||Sc(e)}function Ac(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=bc(Ya());break;case"Worker":t="".concat(bc(Ya()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(xu,"/").concat(r)}function Rc(e){return Oc.apply(this,arguments)}function Oc(){return Oc=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ms(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),Oc.apply(this,arguments)}function Dc(e,t){return Lc.apply(this,arguments)}function Lc(){return Lc=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ms(t,"GET","/v2/recaptchaConfig",Ls(t,n)));case 1:case"end":return e.stop()}}),e)}))),Lc.apply(this,arguments)}function Mc(e){return void 0!==e&&void 0!==e.getResponse}function Fc(e){return void 0!==e&&void 0!==e.enterprise}var Uc=Ut((function e(t){if(Mt(this,e),this.siteKey="",this.emailPasswordEnabled=!1,void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some((function(e){return"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState}))}));function jc(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=ws("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Vc(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Bc=function(){function e(t){Mt(this,e),this.type="recaptcha-enterprise",this.auth=Gc(t)}return Ut(e,[{key:"verify",value:function(){var e=fr(cr().mark((function e(){var t,n,r,i,a,o=this,u=arguments;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,n,r){var i=window.grecaptcha;Fc(i)?i.enterprise.ready((function(){i.enterprise.execute(e,{action:t}).then((function(e){n(e)})).catch((function(){n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))},i=function(){return i=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if(null!=t.tenantId||null==t._agentRecaptchaConfig){e.next=3;break}return e.abrupt("return",t._agentRecaptchaConfig.siteKey);case 3:if(null==t.tenantId||void 0===t._tenantRecaptchaConfigs[t.tenantId]){e.next=5;break}return e.abrupt("return",t._tenantRecaptchaConfigs[t.tenantId].siteKey);case 5:return e.abrupt("return",new Promise(function(){var e=fr(cr().mark((function e(n,r){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Dc(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((function(e){if(void 0!==e.recaptchaKey){var i=new Uc(e);return null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,n(i.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))})).catch((function(e){r(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)},r=function(e){return i.apply(this,arguments)},t=u.length>0&&void 0!==u[0]?u[0]:"verify",n=u.length>1&&void 0!==u[1]&&u[1],e.abrupt("return",new Promise((function(e,t){r(o.auth).then((function(r){if(!n&&Fc(window.grecaptcha))a(r,e,t);else{if("undefined"===typeof window)return void t(new Error("RecaptchaVerifier is only supported in browser"));jc("https://www.google.com/recaptcha/enterprise.js?render="+r).then((function(){a(r,e,t)})).catch((function(e){t(e)}))}})).catch((function(e){t(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();function qc(e,t,n){return zc.apply(this,arguments)}function zc(){return zc=fr(cr().mark((function e(t,n,r){var i,a,o,u,s=arguments;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>3&&void 0!==s[3]&&s[3],a=new Bc(t),e.prev=2,e.next=5,a.verify(r);case 5:o=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,a.verify(r,!0);case 12:o=e.sent;case 13:return u=Object.assign({},n),i?Object.assign(u,{captchaResp:o}):Object.assign(u,{captchaResponse:o}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),e.abrupt("return",u);case 18:case"end":return e.stop()}}),e,null,[[2,8]])}))),zc.apply(this,arguments)}var Wc=function(){function e(t){Mt(this,e),this.auth=t,this.queue=[]}return Ut(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=fr(cr().mark((function e(t){var n,r,i,a,o,u,s;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=Qt(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=Qt(n);try{for(o.s();!(u=o.n()).done;){s=u.value;try{s()}catch(Y){}}}catch(c){o.e(c)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Kc=function(){function e(t,n,r,i){Mt(this,e),this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Hc(this),this.idTokenSubscription=new Hc(this),this.beforeStateQueue=new Wc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vs,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}return Ut(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=yc(t)),this._initializationPromise=this.queue(fr(cr().mark((function r(){var i,a;return cr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,wc.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=fr(cr().mark((function e(){var t;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=fr(cr().mark((function e(t){var n,r,i,a,o,u,s;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return Es(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,oc(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Co(t):null)&&Es(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=fr(cr().mark((function e(t){var n,r=this,i=arguments;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&Es(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(fr(cr().mark((function n(){return cr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(yc(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"initializeRecaptchaConfig",value:function(){var e=fr(cr().mark((function e(){var t,n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dc(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"});case 2:t=e.sent,n=new Uc(t),null==this.tenantId?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new Bc(this).verify();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getRecaptchaConfig",value:function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new io("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=fr(cr().mark((function e(t,n){var r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Es(n=t&&yc(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,wc.create(this,[yc(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=fr(cr().mark((function e(t){var n,r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=fr(cr().mark((function e(t){var n=this;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Es(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Es(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ac(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=fr(cr().mark((function e(){var t,n,r,i;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.next=8,this._getAppCheckToken();case 8:return(i=e.sent)&&(n["X-Firebase-AppCheck"]=i),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=fr(cr().mark((function e(){var t,n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();case 2:return(null===(n=e.sent)||void 0===n?void 0:n.error)&&ms("Error while retrieving App Check token: ".concat(n.error)),e.abrupt("return",null===n||void 0===n?void 0:n.token);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Gc(e){return Co(e)}var Hc=function(){function e(t){var n=this;Mt(this,e),this.auth=t,this.observer=null,this.addObserver=wo((function(e){return n.observer=e}))}return Ut(e,[{key:"next",get:function(){return Es(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Qc(e,t,n){var r=Gc(e);Es(r._canInitEmulator,r,"emulator-config-failed"),Es(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Yc(t),o=function(e){var t=Yc(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:$c(r.substr(a.length+1))}}var o=Ot(r.split(":"),2);return{host:o[0],port:$c(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Yc(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function $c(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Jc=function(){function e(t,n){Mt(this,e),this.providerId=t,this.signInMethod=n}return Ut(e,[{key:"toJSON",value:function(){return Ss("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Ss("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Ss("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Ss("not implemented")}}]),e}();function Xc(e,t){return Zc.apply(this,arguments)}function Zc(){return Zc=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ms(t,"POST","/v1/accounts:resetPassword",Ls(t,n)));case 1:case"end":return e.stop()}}),e)}))),Zc.apply(this,arguments)}function el(e,t){return tl.apply(this,arguments)}function tl(){return tl=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ms(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),tl.apply(this,arguments)}function nl(e,t){return rl.apply(this,arguments)}function rl(){return rl=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ms(t,"POST","/v1/accounts:update",Ls(t,n)));case 1:case"end":return e.stop()}}),e)}))),rl.apply(this,arguments)}function il(e,t){return al.apply(this,arguments)}function al(){return al=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vs(t,"POST","/v1/accounts:signInWithPassword",Ls(t,n)));case 1:case"end":return e.stop()}}),e)}))),al.apply(this,arguments)}function ol(e,t){return ul.apply(this,arguments)}function ul(){return ul=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ms(t,"POST","/v1/accounts:sendOobCode",Ls(t,n)));case 1:case"end":return e.stop()}}),e)}))),ul.apply(this,arguments)}function sl(e,t){return cl.apply(this,arguments)}function cl(){return cl=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ol(t,n));case 1:case"end":return e.stop()}}),e)}))),cl.apply(this,arguments)}function ll(e,t){return fl.apply(this,arguments)}function fl(){return fl=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ol(t,n));case 1:case"end":return e.stop()}}),e)}))),fl.apply(this,arguments)}function hl(e,t){return dl.apply(this,arguments)}function dl(){return dl=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ol(t,n));case 1:case"end":return e.stop()}}),e)}))),dl.apply(this,arguments)}function pl(e,t){return vl.apply(this,arguments)}function vl(){return vl=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ol(t,n));case 1:case"end":return e.stop()}}),e)}))),vl.apply(this,arguments)}function yl(e,t){return ml.apply(this,arguments)}function ml(){return ml=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vs(t,"POST","/v1/accounts:signInWithEmailLink",Ls(t,n)));case 1:case"end":return e.stop()}}),e)}))),ml.apply(this,arguments)}function gl(e,t){return kl.apply(this,arguments)}function kl(){return kl=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vs(t,"POST","/v1/accounts:signInWithEmailLink",Ls(t,n)));case 1:case"end":return e.stop()}}),e)}))),kl.apply(this,arguments)}var wl=function(e){Vt(n,e);var t=Wt(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Mt(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return Ut(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=fr(cr().mark((function e(t){var n,r,i;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?12:13;break;case 3:if(r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},!(null===(n=t._getRecaptchaConfig())||void 0===n?void 0:n.emailPasswordEnabled)){e.next=11;break}return e.next=7,qc(t,r,"signInWithPassword");case 7:return i=e.sent,e.abrupt("return",il(t,i));case 11:return e.abrupt("return",il(t,r).catch(function(){var e=fr(cr().mark((function e(n){var i;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,qc(t,r,"signInWithPassword");case 4:return i=e.sent,e.abrupt("return",il(t,i));case 8:return e.abrupt("return",Promise.reject(n));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:return e.abrupt("return",yl(t,{email:this._email,oobCode:this._password}));case 13:ks(t,"internal-error");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",el(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",gl(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:ks(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Jc);function bl(e,t){return _l.apply(this,arguments)}function _l(){return _l=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vs(t,"POST","/v1/accounts:signInWithIdp",Ls(t,n)));case 1:case"end":return e.stop()}}),e)}))),_l.apply(this,arguments)}var xl=function(e){Vt(n,e);var t=Wt(n);function n(){var e;return Mt(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return Ut(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return bl(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,bl(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,bl(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=yo(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ks("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=rs(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Jc);function El(e,t){return Sl.apply(this,arguments)}function Sl(){return Sl=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ms(t,"POST","/v1/accounts:sendVerificationCode",Ls(t,n)));case 1:case"end":return e.stop()}}),e)}))),Sl.apply(this,arguments)}function Il(){return Il=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vs(t,"POST","/v1/accounts:signInWithPhoneNumber",Ls(t,n)));case 1:case"end":return e.stop()}}),e)}))),Il.apply(this,arguments)}function Tl(){return Tl=fr(cr().mark((function e(t,n){var r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vs(t,"POST","/v1/accounts:signInWithPhoneNumber",Ls(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Ws(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Tl.apply(this,arguments)}var Cl=h({},"USER_NOT_FOUND","user-not-found");function Nl(){return Nl=fr(cr().mark((function e(t,n){var r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Vs(t,"POST","/v1/accounts:signInWithPhoneNumber",Ls(t,r),Cl));case 2:case"end":return e.stop()}}),e)}))),Nl.apply(this,arguments)}var Pl=function(e){Vt(n,e);var t=Wt(n);function n(e){var r;return Mt(this,n),(r=t.call(this,"phone","phone")).params=e,r}return Ut(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Il.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Tl.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Nl.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Jc);var Al=function(){function e(t){var n,r,i,a,o,u;Mt(this,e);var s=mo(go(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);Es(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return Ut(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=mo(go(e)).link,n=t?mo(go(t)).deep_link_id:null,r=mo(go(e)).deep_link_id;return(r?mo(go(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(aP){return null}}}]),e}();var Rl=function(){function e(){Mt(this,e),this.providerId=e.PROVIDER_ID}return Ut(e,null,[{key:"credential",value:function(e,t){return wl._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Al.parseLink(t);return Es(n,"argument-error"),wl._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Rl.PROVIDER_ID="password",Rl.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Rl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Ol=function(){function e(t){Mt(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return Ut(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Dl=function(e){Vt(n,e);var t=Wt(n);function n(){var e;return Mt(this,n),(e=t.apply(this,arguments)).scopes=[],e}return Ut(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return Lt(this.scopes)}}]),n}(Ol),Ll=function(e){Vt(n,e);var t=Wt(n);function n(){return Mt(this,n),t.apply(this,arguments)}return Ut(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Es(e.idToken||e.accessToken,"argument-error"),xl._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Es("providerId"in t&&"signInMethod"in t,"argument-error"),xl._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(Dl),Ml=function(e){Vt(n,e);var t=Wt(n);function n(){return Mt(this,n),t.call(this,"facebook.com")}return Ut(n,null,[{key:"credential",value:function(e){return xl._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(aP){return null}}}]),n}(Dl);Ml.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ml.PROVIDER_ID="facebook.com";var Fl=function(e){Vt(n,e);var t=Wt(n);function n(){var e;return Mt(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return Ut(n,null,[{key:"credential",value:function(e,t){return xl._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(aP){return null}}}]),n}(Dl);Fl.GOOGLE_SIGN_IN_METHOD="google.com",Fl.PROVIDER_ID="google.com";var Ul=function(e){Vt(n,e);var t=Wt(n);function n(){return Mt(this,n),t.call(this,"github.com")}return Ut(n,null,[{key:"credential",value:function(e){return xl._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(aP){return null}}}]),n}(Dl);Ul.GITHUB_SIGN_IN_METHOD="github.com",Ul.PROVIDER_ID="github.com";var jl=function(e){Vt(n,e);var t=Wt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return Ut(n,[{key:"_getIdTokenResponse",value:function(e){return bl(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,bl(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,bl(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Jc),Vl=function(e){Vt(n,e);var t=Wt(n);function n(e){return Mt(this,n),Es(e.startsWith("saml."),"argument-error"),t.call(this,e)}return Ut(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=jl.fromJSON(e);return Es(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return jl._create(r,n)}catch(i){return null}}}]),n}(Ol),Bl=function(e){Vt(n,e);var t=Wt(n);function n(){return Mt(this,n),t.call(this,"twitter.com")}return Ut(n,null,[{key:"credential",value:function(e,t){return xl._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(aP){return null}}}]),n}(Dl);function ql(e,t){return zl.apply(this,arguments)}function zl(){return zl=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vs(t,"POST","/v1/accounts:signUp",Ls(t,n)));case 1:case"end":return e.stop()}}),e)}))),zl.apply(this,arguments)}Bl.TWITTER_SIGN_IN_METHOD="twitter.com",Bl.PROVIDER_ID="twitter.com";var Wl=function(){function e(t){Mt(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return Ut(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=fr(cr().mark((function t(n,r,i){var a,o,u,s,c=arguments;return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,pc._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=Kl(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=fr(cr().mark((function t(n,r,i){var a;return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Kl(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Kl(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Gl(){return Gl=fr(cr().mark((function e(t){var n,r,i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gc(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Wl({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,ql(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Wl._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),Gl.apply(this,arguments)}var Hl=function(e){Vt(n,e);var t=Wt(n);function n(e,r,i,a){var o,u;return Mt(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(zt(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return Ut(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(ro);function Ql(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Hl._fromErrorAndOperation(e,n,t,r);throw n}))}function Yl(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function $l(e,t){return Jl.apply(this,arguments)}function Jl(){return Jl=fr(cr().mark((function e(t,n){var r,i,a,o;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Co(t),e.next=3,ef(!0,r,n);case 3:return e.t0=Hs,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=Yl(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),Jl.apply(this,arguments)}function Xl(e,t){return Zl.apply(this,arguments)}function Zl(){return Zl=fr(cr().mark((function e(t,n){var r,i,a=arguments;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=tc,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Wl._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Zl.apply(this,arguments)}function ef(e,t,n){return tf.apply(this,arguments)}function tf(){return(tf=fr(cr().mark((function e(t,n,r){var i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oc(n);case 2:i=Yl(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Es(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nf(e,t){return rf.apply(this,arguments)}function rf(){return rf=fr(cr().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,tc(t,Ql(i,a,n,t),r);case 6:return Es((o=e.sent).idToken,i,"internal-error"),Es(u=ec(o.idToken),i,"internal-error"),s=u.sub,Es(t.uid===s,i,"user-mismatch"),e.abrupt("return",Wl._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&ks(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),rf.apply(this,arguments)}function af(e,t){return of.apply(this,arguments)}function of(){return of=fr(cr().mark((function e(t,n){var r,i,a,o,u=arguments;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,Ql(t,i,n);case 4:return a=e.sent,e.next=7,Wl._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),of.apply(this,arguments)}function uf(e,t){return sf.apply(this,arguments)}function sf(){return sf=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",af(Gc(t),n));case 1:case"end":return e.stop()}}),e)}))),sf.apply(this,arguments)}function cf(e,t){return lf.apply(this,arguments)}function lf(){return(lf=fr(cr().mark((function e(t,n){var r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Co(t),e.next=3,ef(!1,r,n.providerId);case 3:return e.abrupt("return",Xl(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ff(e,t){return hf.apply(this,arguments)}function hf(){return(hf=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nf(Co(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function df(e,t){return pf.apply(this,arguments)}function pf(){return pf=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vs(t,"POST","/v1/accounts:signInWithCustomToken",Ls(t,n)));case 1:case"end":return e.stop()}}),e)}))),pf.apply(this,arguments)}function vf(){return vf=fr(cr().mark((function e(t,n){var r,i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gc(t),e.next=3,df(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Wl._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),vf.apply(this,arguments)}var yf=function(){function e(t,n){Mt(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return Ut(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?mf._fromServerResponse(e,t):"totpInfo"in t?gf._fromServerResponse(e,t):ks(e,"internal-error")}}]),e}(),mf=function(e){Vt(n,e);var t=Wt(n);function n(e){var r;return Mt(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return Ut(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(yf),gf=function(e){Vt(n,e);var t=Wt(n);function n(e){return Mt(this,n),t.call(this,"totp",e)}return Ut(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(yf);function kf(e,t,n){var r;Es((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Es("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Es(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Es(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function wf(){return wf=fr(cr().mark((function e(t,n,r){var i,a,o,u;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Gc(t),o={requestType:"PASSWORD_RESET",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=11;break}return e.next=5,qc(a,o,"getOobCode",!0);case 5:return u=e.sent,r&&kf(a,u,r),e.next=9,ll(a,u);case 9:e.next=14;break;case 11:return r&&kf(a,o,r),e.next=14,ll(a,o).catch(function(){var e=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow."),e.next=4,qc(a,o,"getOobCode",!0);case 4:return n=e.sent,r&&kf(a,n,r),e.next=8,ll(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}}),e)}))),wf.apply(this,arguments)}function bf(){return bf=fr(cr().mark((function e(t,n,r){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xc(Co(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),bf.apply(this,arguments)}function _f(){return _f=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nl(Co(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),_f.apply(this,arguments)}function xf(e,t){return Ef.apply(this,arguments)}function Ef(){return Ef=fr(cr().mark((function e(t,n){var r,i,a,o;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Co(t),e.next=3,Xc(r,{oobCode:n});case 3:i=e.sent,Es(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Es(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Es(i.mfaInfo,r,"internal-error");case 13:Es(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=yf._fromServerResponse(Gc(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),Ef.apply(this,arguments)}function Sf(){return Sf=fr(cr().mark((function e(t,n){var r,i;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xf(Co(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),Sf.apply(this,arguments)}function If(e,t,n){return Tf.apply(this,arguments)}function Tf(){return Tf=fr(cr().mark((function e(t,n,r){var i,a,o,u,s,c,l;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Gc(t),o={returnSecureToken:!0,email:n,password:r,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=9;break}return e.next=5,qc(a,o,"signUpPassword");case 5:s=e.sent,u=ql(a,s),e.next=10;break;case 9:u=ql(a,o).catch(function(){var e=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow."),e.next=4,qc(a,o,"signUpPassword");case 4:return n=e.sent,e.abrupt("return",ql(a,n));case 8:return e.abrupt("return",Promise.reject(t));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:return e.next=12,u.catch((function(e){return Promise.reject(e)}));case 12:return c=e.sent,e.next=15,Wl._fromIdTokenResponse(a,"signIn",c);case 15:return l=e.sent,e.next=18,a._updateCurrentUser(l.user);case 18:return e.abrupt("return",l);case 19:case"end":return e.stop()}}),e)}))),Tf.apply(this,arguments)}function Cf(){return Cf=fr(cr().mark((function e(t,n,r){var i,a,o,u,s;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=function(e,t){Es(t.handleCodeInApp,a,"argument-error"),t&&kf(a,e,t)},a=Gc(t),o={requestType:"EMAIL_SIGNIN",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=12;break}return e.next=6,qc(a,o,"getOobCode",!0);case 6:return s=e.sent,u(s,r),e.next=10,hl(a,s);case 10:e.next=15;break;case 12:return u(o,r),e.next=15,hl(a,o).catch(function(){var e=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,qc(a,o,"getOobCode",!0);case 4:return n=e.sent,u(n,r),e.next=8,hl(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 15:case"end":return e.stop()}}),e)}))),Cf.apply(this,arguments)}function Nf(){return Nf=fr(cr().mark((function e(t,n,r){var i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Co(t),Es((a=Rl.credentialWithLink(n,r||Ts()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",uf(i,a));case 4:case"end":return e.stop()}}),e)}))),Nf.apply(this,arguments)}function Pf(e,t){return Af.apply(this,arguments)}function Af(){return Af=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ms(t,"POST","/v1/accounts:createAuthUri",Ls(t,n)));case 1:case"end":return e.stop()}}),e)}))),Af.apply(this,arguments)}function Rf(){return Rf=fr(cr().mark((function e(t,n){var r,i,a,o;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Cs()?Ts():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Pf(Co(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),Rf.apply(this,arguments)}function Of(){return(Of=fr(cr().mark((function e(t,n){var r,i,a,o;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Co(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&kf(r.auth,a,n),e.next=8,sl(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Df(){return(Df=fr(cr().mark((function e(t,n,r){var i,a,o,u;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Co(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&kf(i.auth,o,r),e.next=8,pl(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lf(e,t){return Mf.apply(this,arguments)}function Mf(){return Mf=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ms(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Mf.apply(this,arguments)}function Ff(){return(Ff=fr(cr().mark((function e(t,n){var r,i,a,o,u,s,c;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=Co(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,tc(a,Lf(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Uf(e,t,n){return jf.apply(this,arguments)}function jf(){return jf=fr(cr().mark((function e(t,n,r){var i,a,o,u;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,tc(t,el(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)}))),jf.apply(this,arguments)}var Vf=Ut((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Mt(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Bf=function(e){Vt(n,e);var t=Wt(n);function n(e,r,i,a){var o;return Mt(this,n),(o=t.call(this,e,r,i)).username=a,o}return Ut(n)}(Vf),qf=function(e){Vt(n,e);var t=Wt(n);function n(e,r){return Mt(this,n),t.call(this,e,"facebook.com",r)}return Ut(n)}(Vf),zf=function(e){Vt(n,e);var t=Wt(n);function n(e,r){return Mt(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return Ut(n)}(Bf),Wf=function(e){Vt(n,e);var t=Wt(n);function n(e,r){return Mt(this,n),t.call(this,e,"google.com",r)}return Ut(n)}(Vf),Kf=function(e){Vt(n,e);var t=Wt(n);function n(e,r,i){return Mt(this,n),t.call(this,e,"twitter.com",r,i)}return Ut(n)}(Bf);function Gf(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=ec(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Vf(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new qf(a,i);case"github.com":return new zf(a,i);case"google.com":return new Wf(a,i);case"twitter.com":return new Kf(a,i,e.screenName||null);case"custom":case"anonymous":return new Vf(a,null);default:return new Vf(a,r,i)}}(n)}var Hf=function(){function e(t,n,r){Mt(this,e),this.type=t,this.credential=n,this.auth=r}return Ut(e,[{key:"toJSON",value:function(){return{multiFactorSession:h({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Qf=function(){function e(t,n,r){Mt(this,e),this.session=t,this.hints=n,this.signInResolver=r}return Ut(e,[{key:"resolveSignIn",value:function(){var e=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Gc(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return yf._fromServerResponse(r,e)}));Es(i.mfaPendingCredential,r,"internal-error");var o=Hf._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=fr(cr().mark((function e(t){var a,u,s;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Wl._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return Es(n.user,r,"internal-error"),e.abrupt("return",Wl._forOperation(n.user,n.operationType,u));case 17:ks(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Yf(e,t){return Ms(e,"POST","/v2/accounts/mfaEnrollment:start",Ls(e,t))}function $f(e,t){return Ms(e,"POST","/v2/accounts/mfaEnrollment:start",Ls(e,t))}function Jf(e,t){return Ms(e,"POST","/v2/accounts/mfaEnrollment:finalize",Ls(e,t))}function Xf(e,t){return Ms(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Ls(e,t))}var Zf=function(){function e(t){var n=this;Mt(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return yf._fromServerResponse(t.auth,e)})))}))}return Ut(e,[{key:"getSession",value:function(){var e=fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Hf,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user.auth,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=fr(cr().mark((function e(t,n){var r,i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,tc(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=fr(cr().mark((function e(t){var n,r,i;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,tc(this.user,Xf(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 7:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(i);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),eh=new WeakMap;var th="__sak",nh=function(){function e(t,n){Mt(this,e),this.storageRetriever=t,this.type=n}return Ut(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(th,"1"),this.storage.removeItem(th),Promise.resolve(!0)):Promise.resolve(!1)}catch(aP){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var rh=function(e){Vt(n,e);var t=Wt(n);function n(){var e;return Mt(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Ya();return xc(e)||Nc(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Pc(),e._shouldAllowMigration=!0,e}return Ut(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);eo()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=fr(cr().mark((function e(t,r){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ns(Bt(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=fr(cr().mark((function e(t){var r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ns(Bt(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ns(Bt(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(nh);rh.type="LOCAL";var ih=rh,ah=function(e){Vt(n,e);var t=Wt(n);function n(){return Mt(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return Ut(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(nh);ah.type="SESSION";var oh=ah;function uh(e){return Promise.all(e.map(function(){var e=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var sh=function(){function e(t){Mt(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return Ut(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=fr(cr().mark((function e(t){var n,r,i,a,o,u,s,c;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,uh(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function ch(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}sh.receivers=[];var lh=function(){function e(t){Mt(this,e),this.target=t,this.handlers=new Set}return Ut(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=fr(cr().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=ch("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function fh(){return window}function hh(e){fh().location.href=e}function dh(){return"undefined"!==typeof fh().WorkerGlobalScope&&"function"===typeof fh().importScripts}function ph(){return vh.apply(this,arguments)}function vh(){return(vh=fr(cr().mark((function e(){var t;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function yh(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var mh="firebaseLocalStorageDb",gh="firebaseLocalStorage",kh="fbase_key",wh=function(){function e(t){Mt(this,e),this.request=t}return Ut(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function bh(e,t){return e.transaction([gh],t?"readwrite":"readonly").objectStore(gh)}function _h(){var e=indexedDB.deleteDatabase(mh);return new wh(e).toPromise()}function xh(){var e=indexedDB.open(mh,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(gh,{keyPath:kh})}catch(r){n(r)}})),e.addEventListener("success",fr(cr().mark((function n(){var r;return cr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(gh)){n.next=12;break}return r.close(),n.next=5,_h();case 5:return n.t0=t,n.next=8,xh();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Eh(e,t,n){return Sh.apply(this,arguments)}function Sh(){return Sh=fr(cr().mark((function e(t,n,r){var i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=bh(t,!0).put((h(i={},kh,n),h(i,"value",r),i)),e.abrupt("return",new wh(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Sh.apply(this,arguments)}function Ih(e,t){return Th.apply(this,arguments)}function Th(){return Th=fr(cr().mark((function e(t,n){var r,i;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=bh(t,!1).get(n),e.next=3,new wh(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Th.apply(this,arguments)}function Ch(e,t){var n=bh(e,!0).delete(t);return new wh(n).toPromise()}var Nh=function(){function e(){Mt(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return Ut(e,[{key:"_openDb",value:function(){var e=fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,xh();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=fr(cr().mark((function e(t){var n,r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dh()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=fr(cr().mark((function e(){var t=this;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=sh._getInstance(dh()?self:null),this.receiver._subscribe("keyChanged",function(){var e=fr(cr().mark((function e(n,r){var i;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=fr(cr().mark((function e(){var t,n,r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ph();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new lh(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&yh()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=fr(cr().mark((function e(){var t;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,xh();case 5:return t=e.sent,e.next=8,Eh(t,th,"1");case 8:return e.next=10,Ch(t,th);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=fr(cr().mark((function e(t,n){var r=this;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Eh(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Ih(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=fr(cr().mark((function e(t){var n=this;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Ch(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=fr(cr().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=bh(e,!1).getAll();return new wh(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=Qt(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(fr(cr().mark((function t(){return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Nh.type="LOCAL";var Ph=Nh;function Ah(e,t){return Ms(e,"POST","/v2/accounts/mfaSignIn:start",Ls(e,t))}function Rh(e,t){return Ms(e,"POST","/v2/accounts/mfaSignIn:finalize",Ls(e,t))}var Oh=1e12,Dh=function(){function e(t){Mt(this,e),this.auth=t,this.counter=Oh,this._widgets=new Map}return Ut(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Lh(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Oh;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Oh;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=fr(cr().mark((function e(t){var n,r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Oh,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Lh=function(){function e(t,n,r){var i=this;Mt(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Es(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return Ut(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var Mh=Vc("rcb"),Fh=new Ps(3e4,6e4),Uh=function(){function e(){var t;Mt(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=fh().grecaptcha)||void 0===t?void 0:t.render)}return Ut(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Es(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)&&Mc(fh().grecaptcha)?Promise.resolve(fh().grecaptcha):new Promise((function(r,i){var a=fh().setTimeout((function(){i(ws(e,"network-request-failed"))}),Fh.get());fh()[Mh]=function(){fh().clearTimeout(a),delete fh()[Mh];var o=fh().grecaptcha;if(o&&Mc(o)){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(ws(e,"internal-error"))},jc("".concat("https://www.google.com/recaptcha/api.js?","?").concat(yo({onload:Mh,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(ws(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=fh().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();var jh=function(){function e(){Mt(this,e)}return Ut(e,[{key:"load",value:function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Dh(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Vh="recaptcha",Bh={theme:"light",type:"image"},qh=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},Bh),r=arguments.length>2?arguments[2]:void 0;Mt(this,e),this.parameters=n,this.type=Vh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Gc(r),this.isInvisible="invisible"===this.parameters.size,Es("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;Es(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new jh:new Uh,this.validateStartingState()}return Ut(e,[{key:"verify",value:function(){var e=fr(cr().mark((function e(){var t,n,r,i=this;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Es(!this.parameters.sitekey,this.auth,"argument-error"),Es(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Es("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=fh()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Es(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=fr(cr().mark((function e(){var t,n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=fr(cr().mark((function e(){var t;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Es(Cs()&&!dh(),this.auth,"internal-error"),e.next=3,zh();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Rc(this.auth);case 8:Es(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Es(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function zh(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var Wh=function(){function e(t,n){Mt(this,e),this.verificationId=t,this.onConfirmation=n}return Ut(e,[{key:"confirm",value:function(e){var t=Pl._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function Kh(){return Kh=fr(cr().mark((function e(t,n,r){var i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Gc(t),e.next=3,Yh(i,n,Co(r));case 3:return a=e.sent,e.abrupt("return",new Wh(a,(function(e){return uf(i,e)})));case 5:case"end":return e.stop()}}),e)}))),Kh.apply(this,arguments)}function Gh(e,t,n){return Hh.apply(this,arguments)}function Hh(){return(Hh=fr(cr().mark((function e(t,n,r){var i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Co(t),e.next=3,ef(!1,i,"phone");case 3:return e.next=5,Yh(i.auth,n,Co(r));case 5:return a=e.sent,e.abrupt("return",new Wh(a,(function(e){return cf(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qh(){return(Qh=fr(cr().mark((function e(t,n,r){var i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Co(t),e.next=3,Yh(i.auth,n,Co(r));case 3:return a=e.sent,e.abrupt("return",new Wh(a,(function(e){return ff(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yh(e,t,n){return $h.apply(this,arguments)}function $h(){return $h=fr(cr().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Es("string"===typeof a,t,"argument-error"),Es(r.type===Vh,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return Es("enroll"===u.type,t,"internal-error"),e.next=13,Yf(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return Es("signin"===u.type,t,"internal-error"),Es(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Ah(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,El(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),$h.apply(this,arguments)}function Jh(){return(Jh=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xl(Co(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Xh=function(){function e(t){Mt(this,e),this.providerId=e.PROVIDER_ID,this.auth=Gc(t)}return Ut(e,[{key:"verifyPhoneNumber",value:function(e,t){return Yh(this.auth,e,Co(t))}}],[{key:"credential",value:function(e,t){return Pl._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Pl._fromTokenResponse(n,r):null}}]),e}();function Zh(e,t){return t?yc(t):(Es(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Xh.PROVIDER_ID="phone",Xh.PHONE_SIGN_IN_METHOD="phone";var ed=function(e){Vt(n,e);var t=Wt(n);function n(e){var r;return Mt(this,n),(r=t.call(this,"custom","custom")).params=e,r}return Ut(n,[{key:"_getIdTokenResponse",value:function(e){return bl(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return bl(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return bl(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Jc);function td(e){return af(e.auth,new ed(e),e.bypassAuthState)}function nd(e){var t=e.auth,n=e.user;return Es(n,t,"internal-error"),nf(n,new ed(e),e.bypassAuthState)}function rd(e){return id.apply(this,arguments)}function id(){return id=fr(cr().mark((function e(t){var n,r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Es(r=t.user,n,"internal-error"),e.abrupt("return",Xl(r,new ed(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),id.apply(this,arguments)}var ad=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Mt(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return Ut(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=fr(cr().mark((function t(n,r){return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=fr(cr().mark((function e(t){var n,r,i,a,o,u,s;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return td;case"linkViaPopup":case"linkViaRedirect":return rd;case"reauthViaPopup":case"reauthViaRedirect":return nd;default:ks(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),od=new Ps(2e3,1e4);function ud(e,t,n){return sd.apply(this,arguments)}function sd(){return sd=fr(cr().mark((function e(t,n,r){var i,a,o;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Gc(t),_s(t,n,Ol),a=Zh(i,r),o=new hd(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),sd.apply(this,arguments)}function cd(){return(cd=fr(cr().mark((function e(t,n,r){var i,a,o;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _s((i=Co(t)).auth,n,Ol),a=Zh(i.auth,r),o=new hd(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ld(e,t,n){return fd.apply(this,arguments)}function fd(){return(fd=fr(cr().mark((function e(t,n,r){var i,a,o;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _s((i=Co(t)).auth,n,Ol),a=Zh(i.auth,r),o=new hd(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var hd=function(e){Vt(n,e);var t=Wt(n);function n(e,r,i,a,o){var u;return Mt(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=zt(u),u}return Ut(n,[{key:"executeNotNull",value:function(){var e=fr(cr().mark((function e(){var t;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Es(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=fr(cr().mark((function e(){var t,n=this;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Is(1===this.filter.length,"Popup operations only handle one event"),t=ch(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(ws(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(ws(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(ws(e.auth,"popup-closed-by-user"))}),8e3):e.pollId=window.setTimeout(t,od.get())}()}}]),n}(ad);hd.currentPopupAction=null;var dd="pendingRedirect",pd=new Map,vd=function(e){Vt(n,e);var t=Wt(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Mt(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return Ut(n,[{key:"execute",value:function(){var e=fr(cr().mark((function e(){var t,r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=pd.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,yd(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,ns(Bt(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:pd.set(this.auth._key(),t);case 21:return this.bypassAuthState||pd.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=fr(cr().mark((function e(t){var r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",ns(Bt(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",ns(Bt(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(ad);function yd(e,t){return md.apply(this,arguments)}function md(){return md=fr(cr().mark((function e(t,n){var r,i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_d(n),i=bd(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),md.apply(this,arguments)}function gd(e,t){return kd.apply(this,arguments)}function kd(){return kd=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bd(t)._set(_d(n),"true"));case 1:case"end":return e.stop()}}),e)}))),kd.apply(this,arguments)}function wd(e,t){pd.set(e._key(),t)}function bd(e){return yc(e._redirectPersistence)}function _d(e){return kc(dd,e.config.apiKey,e.name)}function xd(e,t,n){return function(e,t,n){return Ed.apply(this,arguments)}(e,t,n)}function Ed(){return Ed=fr(cr().mark((function e(t,n,r){var i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Gc(t),_s(t,n,Ol),e.next=4,i._initializationPromise;case 4:return a=Zh(i,r),e.next=7,gd(a,i);case 7:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)}))),Ed.apply(this,arguments)}function Sd(e,t,n){return function(e,t,n){return Id.apply(this,arguments)}(e,t,n)}function Id(){return(Id=fr(cr().mark((function e(t,n,r){var i,a,o;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _s((i=Co(t)).auth,n,Ol),e.next=4,i.auth._initializationPromise;case 4:return a=Zh(i.auth,r),e.next=7,gd(a,i.auth);case 7:return e.next=9,Od(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Td(e,t,n){return function(e,t,n){return Cd.apply(this,arguments)}(e,t,n)}function Cd(){return(Cd=fr(cr().mark((function e(t,n,r){var i,a,o;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _s((i=Co(t)).auth,n,Ol),e.next=4,i.auth._initializationPromise;case 4:return a=Zh(i.auth,r),e.next=7,ef(!1,i,n.providerId);case 7:return e.next=9,gd(a,i.auth);case 9:return e.next=11,Od(i);case 11:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nd(e,t){return Pd.apply(this,arguments)}function Pd(){return Pd=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gc(t)._initializationPromise;case 2:return e.abrupt("return",Ad(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),Pd.apply(this,arguments)}function Ad(e,t){return Rd.apply(this,arguments)}function Rd(){return Rd=fr(cr().mark((function e(t,n){var r,i,a,o,u,s=arguments;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=Gc(t),a=Zh(i,n),o=new vd(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),Rd.apply(this,arguments)}function Od(e){return Dd.apply(this,arguments)}function Dd(){return(Dd=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ch("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ld=function(){function e(t){Mt(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return Ut(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Fd(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Fd(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(ws(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Md(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Md(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Md(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Fd(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Ud(e){return jd.apply(this,arguments)}function jd(){return jd=fr(cr().mark((function e(t){var n,r=arguments;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Ms(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),jd.apply(this,arguments)}var Vd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Bd=/^https?/;function qd(){return qd=fr(cr().mark((function e(t){var n,r,i,a,o;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Ud(t);case 4:n=e.sent,r=n.authorizedDomains,i=Qt(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!zd(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:ks(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),qd.apply(this,arguments)}function zd(e){var t=Ts(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Bd.test(r))return!1;if(Vd.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Wd=new Ps(3e4,6e4);function Kd(){var e=fh().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=Lt(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Gd=null;function Hd(e){return Gd=Gd||function(e){return new Promise((function(t,n){var r,i,a;function o(){Kd(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Kd(),n(ws(e,"network-request-failed"))},timeout:Wd.get()})}if(null===(i=null===(r=fh().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=fh().gapi)||void 0===a?void 0:a.load)){var u=Vc("iframefcb");return fh()[u]=function(){gapi.load?o():n(ws(e,"network-request-failed"))},jc("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Gd=null,e}))}(e),Gd}var Qd=new Ps(5e3,15e3),Yd="__/auth/iframe",$d="emulator/auth/iframe",Jd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Xd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Zd(e){var t=e.config;Es(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?As(t,$d):"https://".concat(e.config.authDomain,"/").concat(Yd),r={apiKey:t.apiKey,appName:e.name,v:xu},i=Xd.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(yo(r).slice(1))}function ep(e){return tp.apply(this,arguments)}function tp(){return tp=fr(cr().mark((function e(t){var n,r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hd(t);case 2:return n=e.sent,Es(r=fh().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Zd(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Jd,dontclear:!0},(function(e){return new Promise(function(){var n=fr(cr().mark((function n(r,i){var a,o,u;return cr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){fh().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=ws(t,"network-request-failed"),o=fh().setTimeout((function(){i(a)}),Qd.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),tp.apply(this,arguments)}var np={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rp=function(){function e(t){Mt(this,e),this.window=t,this.associatedEvent=null}return Ut(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function ip(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},np),{width:r.toString(),height:i.toString(),top:a,left:o}),c=Ya().toLowerCase();n&&(u=Ec(c)?"_blank":n),_c(c)&&(t=t||"http://localhost",s.scrollbars="yes");var l=Object.entries(s).reduce((function(e,t){var n=Ot(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return Nc(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ya())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==u)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new rp(null);var f=window.open(t||"",u,l);Es(f,e,"popup-blocked");try{f.focus()}catch(h){}return new rp(f)}var ap="__/auth/handler",op="emulator/auth/handler",up=encodeURIComponent("fac");function sp(e,t,n,r,i,a){return cp.apply(this,arguments)}function cp(){return cp=fr(cr().mark((function e(t,n,r,i,a,o){var u,s,c,l,f,h,d,p,v,y,m,g,k;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Es(t.config.authDomain,t,"auth-domain-config-required"),Es(t.config.apiKey,t,"invalid-api-key"),u={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:xu,eventId:a},n instanceof Ol)for(n.setDefaultLanguage(t.languageCode),u.providerId=n.providerId||"",fo(n.getCustomParameters())||(u.customParameters=JSON.stringify(n.getCustomParameters())),s=0,c=Object.entries(o||{});s<c.length;s++)l=Ot(c[s],2),f=l[0],h=l[1],u[f]=h;for(n instanceof Dl&&(d=n.getScopes().filter((function(e){return""!==e}))).length>0&&(u.scopes=d.join(",")),t.tenantId&&(u.tid=t.tenantId),p=u,v=0,y=Object.keys(p);v<y.length;v++)m=y[v],void 0===p[m]&&delete p[m];return e.next=10,t._getAppCheckToken();case 10:return g=e.sent,k=g?"#".concat(up,"=").concat(encodeURIComponent(g)):"",e.abrupt("return","".concat(lp(t),"?").concat(yo(p).slice(1)).concat(k));case 13:case"end":return e.stop()}}),e)}))),cp.apply(this,arguments)}function lp(e){var t=e.config;return t.emulator?As(t,op):"https://".concat(t.authDomain,"/").concat(ap)}var fp="webStorageSupport",hp=function(){function e(){Mt(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=oh,this._completeRedirectFn=Ad,this._overrideRedirectResult=wd}return Ut(e,[{key:"_openPopup",value:function(){var e=fr(cr().mark((function e(t,n,r,i){var a,o;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Is(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),e.next=3,sp(t,n,r,Ts(),i);case 3:return o=e.sent,e.abrupt("return",ip(t,o,ch()));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=fr(cr().mark((function e(t,n,r,i){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return e.next=4,sp(t,n,r,Ts(),i);case 4:return hh(e.sent),e.abrupt("return",new Promise((function(){})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Is(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=fr(cr().mark((function e(t){var n,r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ep(t);case 2:return n=e.sent,r=new Ld(t),n.register("authEvent",(function(e){return Es(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(fp,{type:fp},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[fp];void 0!==i&&t(!!i),ks(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return qd.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Pc()||xc()||Nc()}}]),e}(),dp=hp,pp=function(){function e(t){Mt(this,e),this.factorId=t}return Ut(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Ss("unexpected MultiFactorSessionType")}}}]),e}(),vp=function(e){Vt(n,e);var t=Wt(n);function n(e){var r;return Mt(this,n),(r=t.call(this,"phone")).credential=e,r}return Ut(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Ms(e,"POST","/v2/accounts/mfaEnrollment:finalize",Ls(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Ms(e,"POST","/v2/accounts/mfaSignIn:finalize",Ls(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(pp),yp=function(){function e(){Mt(this,e)}return Ut(e,null,[{key:"assertion",value:function(e){return vp._fromCredential(e)}}]),e}();yp.FACTOR_ID="phone";var mp=function(){function e(){Mt(this,e)}return Ut(e,null,[{key:"assertionForEnrollment",value:function(e,t){return gp._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return gp._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=fr(cr().mark((function e(t){var n,r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Es("undefined"!==typeof(n=t).auth,"internal-error"),e.next=4,$f(n.auth,{idToken:n.credential,totpEnrollmentInfo:{}});case 4:return r=e.sent,e.abrupt("return",kp._fromStartTotpMfaEnrollmentResponse(r,n.auth));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();mp.FACTOR_ID="totp";var gp=function(e){Vt(n,e);var t=Wt(n);function n(e,r,i){var a;return Mt(this,n),(a=t.call(this,"totp")).otp=e,a.enrollmentId=r,a.secret=i,a}return Ut(n,[{key:"_finalizeEnroll",value:function(){var e=fr(cr().mark((function e(t,n,r){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Es("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",Jf(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=fr(cr().mark((function e(t,n){var r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Es(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",Rh(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(pp),kp=function(){function e(t,n,r,i,a,o,u){Mt(this,e),this.sessionInfo=o,this.auth=u,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}return Ut(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(wp(e)||wp(t))&&(r=!0),r&&(wp(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),wp(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function wp(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var bp="@firebase/auth",_p="0.23.2",xp=function(){function e(t){Mt(this,e),this.auth=t,this.internalListeners=new Map}return Ut(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Es(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var Ep;!function(e){var t;null===(t=Ka())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function Sp(){return window}Ep="Browser",yu(new No("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),o=r.options,u=o.apiKey,s=o.authDomain;Es(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});var c={apiKey:u,authDomain:s,clientPlatform:Ep,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ac(Ep)},l=new Kc(r,i,a,c);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(yc);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),yu(new No("auth-internal",(function(e){return function(e){return new xp(e)}(Gc(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Nu(bp,_p,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Ep)),Nu(bp,_p,"esm2017");var Ip=2e3;function Tp(e,t,n){return Cp.apply(this,arguments)}function Cp(){return Cp=fr(cr().mark((function e(t,n,r){var i,a,o,u,s;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Sp(),o=a.BuildInfo,Is(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Dp(n.sessionId);case 4:return u=e.sent,s={},Nc()?s.ibi=o.packageName:Ic()?s.apn=o.packageName:ks(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",sp(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),Cp.apply(this,arguments)}function Np(){return Np=fr(cr().mark((function e(t){var n,r,i;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Sp(),r=n.BuildInfo,i={},Nc()?i.iosBundleId=r.packageName:Ic()?i.androidPackageName=r.packageName:ks(t,"operation-not-supported-in-this-environment"),e.next=5,Ud(t,i);case 5:case"end":return e.stop()}}),e)}))),Np.apply(this,arguments)}function Pp(e){var t=Sp().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ya();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function Ap(e,t,n){return Rp.apply(this,arguments)}function Rp(){return Rp=fr(cr().mark((function e(t,n,r){var i,a,o;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Sp(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(ws(t,"redirect-cancelled-by-user"))}),Ip))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),Ic()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Rp.apply(this,arguments)}function Op(e){var t,n,r,i,a,o,u,s,c,l,f=Sp();Es("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Es("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Es("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Es("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Es("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Dp(e){return Lp.apply(this,arguments)}function Lp(){return(Lp=fr(cr().mark((function e(t){var n,r,i;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Mp(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mp(e){if(Is(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Fp=20,Up=function(e){Vt(n,e);var t=Wt(n);function n(){var e;return Mt(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return Ut(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),ns(Bt(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Ld);function jp(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:Wp(),postBody:null,tenantId:e.tenantId,error:ws(e,"no-auth-event")}}function Vp(e,t){return Kp()._set(Gp(e),t)}function Bp(e){return qp.apply(this,arguments)}function qp(){return qp=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kp()._get(Gp(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,Kp()._remove(Gp(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),qp.apply(this,arguments)}function zp(e,t){var n,r,i=function(e){var t=Hp(e),n=t.link?decodeURIComponent(t.link):void 0,r=Hp(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Hp(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=Hp(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?ws(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Wp(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<Fp;n++){var r=Math.floor(62*Math.random());e.push(t.charAt(r))}return e.join("")}function Kp(){return yc(ih)}function Gp(e){return kc("authEvent",e.config.apiKey,e.name)}function Hp(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t=Ht(e.split("?"));t[0];return mo(t.slice(1).join("?"))}var Qp=function(){function e(){Mt(this,e),this._redirectPersistence=oh,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ad,this._overrideRedirectResult=wd}return Ut(e,[{key:"_initialize",value:function(){var e=fr(cr().mark((function e(t){var n,r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Up(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){ks(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=fr(cr().mark((function e(t,n,r,i){var a,o,u,s;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Op(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),pd.clear(),e.next=10,this._originValidation(t);case 10:return o=jp(t,r,i),e.next=13,Vp(t,o);case 13:return e.next=15,Tp(t,o,n);case 15:return u=e.sent,e.next=18,Pp(u);case 18:return s=e.sent,e.abrupt("return",Ap(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Np.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Sp(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(fr(cr().mark((function n(){return cr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Bp(e);case 2:t.onEvent($p());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=fr(cr().mark((function n(r){var i,a;return cr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,Bp(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=zp(i,r.url)),t.onEvent(a||$p());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");Sp().handleOpenURL=function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),Yp=Qp;function $p(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ws("no-auth-event")}}var Jp=1e3;function Xp(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Zp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ya();return!("file:"!==Xp()&&"ionic:"!==Xp()&&"capacitor:"!==Xp()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function ev(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ya();return eo()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ya();return/Edge\/\d+/.test(e)}(e)}function tv(){try{var e=self.localStorage,t=ch();if(e)return e.setItem(t,"1"),e.removeItem(t),!ev()||no()}catch(n){return nv()&&no()}return!1}function nv(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function rv(){return("http:"===Xp()||"https:"===Xp()||Xa()||Zp())&&!(Za()||Ja())&&tv()&&!nv()}function iv(){return Zp()&&"undefined"!==typeof document}function av(){return ov.apply(this,arguments)}function ov(){return(ov=fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(iv()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),Jp);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var uv={LOCAL:"local",NONE:"none",SESSION:"session"},sv=Es,cv="persistence";function lv(e,t){sv(Object.values(uv).includes(t),e,"invalid-persistence-type"),Za()?sv(t!==uv.SESSION,e,"unsupported-persistence-type"):Ja()?sv(t===uv.NONE,e,"unsupported-persistence-type"):nv()?sv(t===uv.NONE||t===uv.LOCAL&&no(),e,"unsupported-persistence-type"):sv(t===uv.NONE||tv(),e,"unsupported-persistence-type")}function fv(e){return hv.apply(this,arguments)}function hv(){return hv=fr(cr().mark((function e(t){var n,r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=dv(),r=kc(cv,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),hv.apply(this,arguments)}function dv(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var pv=Es,vv=function(){function e(){Mt(this,e),this.browserResolver=yc(dp),this.cordovaResolver=yc(Yp),this.underlyingResolver=null,this._redirectPersistence=oh,this._completeRedirectFn=Ad,this._overrideRedirectResult=wd}return Ut(e,[{key:"_initialize",value:function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=fr(cr().mark((function e(t,n,r,i){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=fr(cr().mark((function e(t,n,r,i){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return iv()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return pv(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=fr(cr().mark((function e(){var t;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,av();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function yv(e){return e.unwrap()}function mv(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new _v(e,function(e,t){var n,r=Co(e),i=t;return Es(t.customData.operationType,r,"argument-error"),Es(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Qf._fromError(r,i)}(e,t));else if(r){var i=gv(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function gv(e){var t=(e instanceof ro?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof ro)&&"temporaryProof"in t&&"phoneNumber"in t)return Xh.credentialFromResult(e);var n,r=t.providerId;if(!r||r===as.PASSWORD)return null;switch(r){case as.GOOGLE:n=Fl;break;case as.FACEBOOK:n=Ml;break;case as.GITHUB:n=Ul;break;case as.TWITTER:n=Bl;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?jl._create(r,u):xl._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new Ll(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof ro?n.credentialFromError(e):n.credentialFromResult(e)}function kv(e,t){return t.catch((function(t){throw t instanceof ro&&mv(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,gv(t)),additionalUserInfo:Gf(e),user:xv.getOrCreate(r)}}))}function wv(e,t){return bv.apply(this,arguments)}function bv(){return bv=fr(cr().mark((function e(t,n){var r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return kv(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),bv.apply(this,arguments)}var _v=function(){function e(t,n){Mt(this,e),this.resolver=n,this.auth=t.wrapped()}return Ut(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return kv(yv(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),xv=function(){function e(t){Mt(this,e),this._delegate=t,this.multiFactor=function(e){var t=Co(e);return eh.has(t)||eh.set(t,Zf._fromUser(t)),eh.get(t)}(t)}return Ut(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kv(this.auth,cf(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wv(this.auth,Gh(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kv(this.auth,ld(this._delegate,t,vv)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fv(Gc(this.auth));case 2:return e.abrupt("return",Td(this._delegate,t,vv));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kv(this.auth,ff(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return wv(this.auth,function(e,t,n){return Qh.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return kv(this.auth,function(e,t,n){return cd.apply(this,arguments)}(this._delegate,e,vv))}},{key:"reauthenticateWithRedirect",value:function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fv(Gc(this.auth));case 2:return e.abrupt("return",Sd(this._delegate,t,vv));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Of.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$l(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Uf(Co(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Uf(Co(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return Jh.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Ff.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Df.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();xv.USER_MAP=new WeakMap;var Ev=Es,Sv=function(){function e(t,n){if(Mt(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Ev(r,"invalid-api-key",{appName:t.name}),Ev(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?vv:void 0;this._delegate=n.initialize({options:{persistence:Tv(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(ds),this.linkUnderlyingAuth()}return Ut(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?xv.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){Qc(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return _f.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return xf(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return bf.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kv(this._delegate,If(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Rf.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Al.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=fr(cr().mark((function e(){var t;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ev(rv(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Nd(this._delegate,vv);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",kv(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Gc(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Iv(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Iv(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Cf.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return wf.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=fr(cr().mark((function e(t){var n,r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:lv(this._delegate,t),e.t0=t,e.next=e.t0===uv.SESSION?4:e.t0===uv.LOCAL?6:e.t0===uv.NONE?11:13;break;case 4:return n=oh,e.abrupt("break",14);case 6:return e.next=8,yc(Ph)._isAvailable();case 8:return r=e.sent,n=r?Ph:ih,e.abrupt("break",14);case 11:return n=gc,e.abrupt("break",14);case 13:return e.abrupt("return",ks("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return kv(this._delegate,function(e){return Gl.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return kv(this._delegate,uf(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return kv(this._delegate,function(e,t){return vf.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return kv(this._delegate,function(e,t,n){return uf(Co(e),Rl.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return kv(this._delegate,function(e,t,n){return Nf.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return wv(this._delegate,function(e,t,n){return Kh.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ev(rv(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",kv(this._delegate,ud(this._delegate,t,vv)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ev(rv(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,fv(this._delegate);case 3:return e.abrupt("return",xd(this._delegate,t,vv));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Sf.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Iv(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&xv.getOrCreate(e))},error:t,complete:n}}function Tv(e,t){var n=function(e,t){var n=dv();if(!n)return[];var r=kc(cv,e,t);switch(n.getItem(r)){case uv.NONE:return[gc];case uv.LOCAL:return[Ph,oh];case uv.SESSION:return[oh];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Ph)||n.push(Ph),"undefined"!==typeof window)for(var r=0,i=[ih,oh];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(gc)||n.push(gc),n}Sv.Persistence=uv;var Cv=function(){function e(){Mt(this,e),this.providerId="phone",this._delegate=new Xh(yv(ts.auth()))}return Ut(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return Xh.credential(e,t)}}]),e}();Cv.PHONE_SIGN_IN_METHOD=Xh.PHONE_SIGN_IN_METHOD,Cv.PROVIDER_ID=Xh.PROVIDER_ID;var Nv=Es,Pv=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ts.app();Mt(this,e),Nv(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new qh(t,n,i.auth()),this.type=this._delegate.type}return Ut(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();!function(e){e.INTERNAL.registerComponent(new No("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Sv(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:os,PASSWORD_RESET:us,RECOVER_EMAIL:ss,REVERT_SECOND_FACTOR_ADDITION:cs,VERIFY_AND_CHANGE_EMAIL:ls,VERIFY_EMAIL:fs}},EmailAuthProvider:Rl,FacebookAuthProvider:Ml,GithubAuthProvider:Ul,GoogleAuthProvider:Fl,OAuthProvider:Ll,SAMLAuthProvider:Vl,PhoneAuthProvider:Cv,PhoneMultiFactorGenerator:yp,RecaptchaVerifier:Pv,TwitterAuthProvider:Bl,Auth:Sv,AuthCredential:Jc,Error:ro}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.4.2")}(ts);var Av,Rv="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Ov={},Dv=Dv||{},Lv=Rv||self;function Mv(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Fv(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Uv="closure_uid_"+(1e9*Math.random()>>>0),jv=0;function Vv(e,t,n){return e.call.apply(e.bind,arguments)}function Bv(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function qv(e,t,n){return(qv=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Vv:Bv).apply(null,arguments)}function zv(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Wv(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Kv(){this.s=this.s,this.o=this.o}Kv.prototype.s=!1,Kv.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function(e){Object.prototype.hasOwnProperty.call(e,Uv)&&e[Uv]||(e[Uv]=++jv)}(this)},Kv.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Gv=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Hv(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Qv(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Mv(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function Yv(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Yv.prototype.h=function(){this.defaultPrevented=!0};var $v=function(){if(!Lv.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Lv.addEventListener("test",(function(){}),t),Lv.removeEventListener("test",(function(){}),t)}catch(j){}return e}();function Jv(e){return/^[\s\xa0]*$/.test(e)}function Xv(){var e=Lv.navigator;return e&&(e=e.userAgent)?e:""}function Zv(e){return-1!=Xv().indexOf(e)}function ey(e){return ey[" "](e),e}ey[" "]=function(){};var ty,ny,ry=Zv("Opera"),iy=Zv("Trident")||Zv("MSIE"),ay=Zv("Edge"),oy=ay||iy,uy=Zv("Gecko")&&!(-1!=Xv().toLowerCase().indexOf("webkit")&&!Zv("Edge"))&&!(Zv("Trident")||Zv("MSIE"))&&!Zv("Edge"),sy=-1!=Xv().toLowerCase().indexOf("webkit")&&!Zv("Edge");function cy(){var e=Lv.document;return e?e.documentMode:void 0}e:{var ly="",fy=function(){var e=Xv();return uy?/rv:([^\);]+)(\)|;)/.exec(e):ay?/Edge\/([\d\.]+)/.exec(e):iy?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):sy?/WebKit\/(\S+)/.exec(e):ry?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(fy&&(ly=fy?fy[1]:""),iy){var hy=cy();if(null!=hy&&hy>parseFloat(ly)){ty=String(hy);break e}}ty=ly}if(Lv.document&&iy){var dy=cy();ny=dy||(parseInt(ty,10)||void 0)}else ny=void 0;var py=ny;function vy(e,t){if(Yv.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(uy){e:{try{ey(t.nodeName);var i=!0;break e}catch(U){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:yy[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&vy.$.h.call(this)}}Wv(vy,Yv);var yy={2:"touch",3:"pen",4:"mouse"};vy.prototype.h=function(){vy.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var my="closure_listenable_"+(1e6*Math.random()|0),gy=0;function ky(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++gy,this.fa=this.ia=!1}function wy(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function by(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function _y(e){var t={};for(var n in e)t[n]=e[n];return t}var xy="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ey(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<xy.length;a++)n=xy[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Sy(e){this.src=e,this.g={},this.h=0}function Iy(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Gv(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(wy(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Ty(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}Sy.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Ty(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new ky(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var Cy="closure_lm_"+(1e6*Math.random()|0),Ny={};function Py(e,t,n,r,i){if(r&&r.once)return Ry(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Py(e,t[a],n,r,i);return null}return n=jy(n),e&&e[my]?e.O(t,n,Fv(r)?!!r.capture:!!r,i):Ay(e,t,n,!1,r,i)}function Ay(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Fv(i)?!!i.capture:!!i,u=Fy(e);if(u||(e[Cy]=u=new Sy(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=My;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)$v||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Ly(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Ry(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Ry(e,t[a],n,r,i);return null}return n=jy(n),e&&e[my]?e.P(t,n,Fv(r)?!!r.capture:!!r,i):Ay(e,t,n,!0,r,i)}function Oy(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Oy(e,t[a],n,r,i);else r=Fv(r)?!!r.capture:!!r,n=jy(n),e&&e[my]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Ty(a=e.g[t],n,r,i))&&(wy(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Fy(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Ty(t,n,r,i)),(n=-1<e?t[e]:null)&&Dy(n))}function Dy(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[my])Iy(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Ly(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Fy(t))?(Iy(n,e),0==n.h&&(n.src=null,t[Cy]=null)):wy(e)}}}function Ly(e){return e in Ny?Ny[e]:Ny[e]="on"+e}function My(e,t){if(e.fa)e=!0;else{t=new vy(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Dy(e),e=n.call(r,t)}return e}function Fy(e){return(e=e[Cy])instanceof Sy?e:null}var Uy="__closure_events_fn_"+(1e9*Math.random()>>>0);function jy(e){return"function"===typeof e?e:(e[Uy]||(e[Uy]=function(t){return e.handleEvent(t)}),e[Uy])}function Vy(){Kv.call(this),this.i=new Sy(this),this.S=this,this.J=null}function By(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Yv(t,e);else if(t instanceof Yv)t.target=t.target||e;else{var i=t;Ey(t=new Yv(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=qy(o,r,!0,t)&&i}if(i=qy(o=t.g=e,r,!0,t)&&i,i=qy(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=qy(o=t.g=n[a],r,!1,t)&&i}function qy(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var u=o.listener,s=o.la||o.src;o.ia&&Iy(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Wv(Vy,Kv),Vy.prototype[my]=!0,Vy.prototype.removeEventListener=function(e,t,n,r){Oy(this,e,t,n,r)},Vy.prototype.N=function(){if(Vy.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)wy(n[r]);delete t.g[e],t.h--}}this.J=null},Vy.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Vy.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var zy=Lv.JSON.stringify,Wy=function(){function e(t,n){Mt(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return Ut(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}();function Ky(){var e=Zy,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Gy=function(){function e(){Mt(this,e),this.h=this.g=null}return Ut(e,[{key:"add",value:function(e,t){var n=Hy.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Hy=new Wy((function(){return new Qy}),(function(e){return e.reset()})),Qy=function(){function e(){Mt(this,e),this.next=this.g=this.h=null}return Ut(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Yy(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function $y(e){Lv.setTimeout((function(){throw e}),0)}var Jy,Xy=!1,Zy=new Gy,em=function(){var e=Lv.Promise.resolve(void 0);Jy=function(){e.then(tm)}},tm=function(){for(var e;e=Ky();){try{e.h.call(e.g)}catch(j){$y(j)}var t=Hy;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Xy=!1};function nm(e,t){Vy.call(this),this.h=e||1,this.g=t||Lv,this.j=qv(this.qb,this),this.l=Date.now()}function rm(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function im(e,t,n){if("function"===typeof e)n&&(e=qv(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=qv(e.handleEvent,e)}return 2147483647<Number(t)?-1:Lv.setTimeout(e,t||0)}function am(e){e.g=im((function(){e.g=null,e.i&&(e.i=!1,am(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Wv(nm,Vy),(Av=nm.prototype).ga=!1,Av.T=null,Av.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),By(this,"tick"),this.ga&&(rm(this),this.start()))}},Av.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Av.N=function(){nm.$.N.call(this),rm(this),delete this.g};var om=function(e){Vt(n,e);var t=Wt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return Ut(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:am(this)}},{key:"N",value:function(){ns(Bt(n.prototype),"N",this).call(this),this.g&&(Lv.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Kv);function um(e){Kv.call(this),this.h=e,this.g={}}Wv(um,Kv);var sm=[];function cm(e,t,n,r){Array.isArray(n)||(n&&(sm[0]=n.toString()),n=sm);for(var i=0;i<n.length;i++){var a=Py(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function lm(e){by(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Dy(e)}),e),e.g={}}function fm(){this.g=!0}function hm(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return zy(n)}catch(A){return t}}(e,n)+(r?" "+r:"")}))}um.prototype.N=function(){um.$.N.call(this),lm(this)},um.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},fm.prototype.Ea=function(){this.g=!1},fm.prototype.info=function(){};var dm={},pm=null;function vm(){return pm=pm||new Vy}function ym(e){Yv.call(this,dm.Ta,e)}function mm(e){var t=vm();By(t,new ym(t))}function gm(e,t){Yv.call(this,dm.STAT_EVENT,e),this.stat=t}function km(e){var t=vm();By(t,new gm(t,e))}function wm(e,t){Yv.call(this,dm.Ua,e),this.size=t}function bm(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Lv.setTimeout((function(){e()}),t)}dm.Ta="serverreachability",Wv(ym,Yv),dm.STAT_EVENT="statevent",Wv(gm,Yv),dm.Ua="timingevent",Wv(wm,Yv);var _m={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},xm={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Em(){}function Sm(e){return e.h||(e.h=e.i())}function Im(){}Em.prototype.h=null;var Tm,Cm={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Nm(){Yv.call(this,"d")}function Pm(){Yv.call(this,"c")}function Am(){}function Rm(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new um(this),this.P=Dm,e=oy?125:void 0,this.V=new nm(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Om}function Om(){this.i=null,this.g="",this.h=!1}Wv(Nm,Yv),Wv(Pm,Yv),Wv(Am,Em),Am.prototype.g=function(){return new XMLHttpRequest},Am.prototype.i=function(){return{}},Tm=new Am;var Dm=45e3,Lm={},Mm={};function Fm(e,t,n){e.L=1,e.v=ng(Jm(t)),e.s=n,e.S=!0,Um(e,null)}function Um(e,t){e.G=Date.now(),qm(e),e.A=Jm(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),vg(n.i,"t",r),e.C=0,n=e.l.J,e.h=new Om,e.g=vk(e.l,n?t:null,!e.s),0<e.O&&(e.M=new om(qv(e.Pa,e,e.g),e.O)),cm(e.U,e.g,"readystatechange",e.nb),t=e.I?_y(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),mm(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function jm(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function Vm(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=Bm(e,n))==Mm){4==t&&(e.o=4,km(14),i=!1),hm(e.j,e.m,null,"[Incomplete Response]");break}if(r==Lm){e.o=4,km(15),hm(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}hm(e.j,e.m,r,null),Hm(e,r)}jm(e)&&r!=Mm&&r!=Lm&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,km(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),uk(t),t.M=!0,km(11))):(hm(e.j,e.m,n,"[Invalid Chunked Response]"),Gm(e),Km(e))}function Bm(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Mm:(n=Number(t.substring(n,r)),isNaN(n)?Lm:(r+=1)+n>t.length?Mm:(t=t.slice(r,r+n),e.C=r+n,t))}function qm(e){e.Y=Date.now()+e.P,zm(e,e.P)}function zm(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=bm(qv(e.lb,e),t)}function Wm(e){e.B&&(Lv.clearTimeout(e.B),e.B=null)}function Km(e){0==e.l.H||e.J||lk(e.l,e)}function Gm(e){Wm(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,rm(e.V),lm(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Hm(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||_g(n.i,e)))if(!e.K&&_g(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;ck(n),Zg(n)}ok(n),km(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=bm(qv(n.ib,n),6e3));if(1>=bg(n.i)&&n.oa){try{n.oa()}catch(a){}n.oa=void 0}}else hk(n,11)}else if((e.K||n.g==e)&&ck(n),!Jv(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.K=a[1],n.pa=a[2];var o=a[3];null!=o&&(n.ra=o,n.l.info("VER="+n.ra));var u=a[4];null!=u&&(n.Ga=u,n.l.info("SVER="+n.Ga));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(xg(f,f.h),f.h=null))}if(r.F){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.Da=h,tg(r.I,r.F,h))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=pk(r,r.J?r.pa:null,r.Y),d.K){Eg(r.i,d);var p=d,v=r.L;v&&p.setTimeout(v),p.B&&(Wm(p),qm(p)),r.g=d}else ak(r);0<n.j.length&&tk(n)}else"stop"!=a[0]&&"close"!=a[0]||hk(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?hk(n,7):Xg(n):"noop"!=a[0]&&n.h&&n.h.Aa(a),n.A=0)}mm()}catch(a){}}function Qm(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Mv(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Mv(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Mv(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Av=Rm.prototype).setTimeout=function(e){this.P=e},Av.nb=function(e){e=e.target;var t=this.M;t&&3==Gg(e)?t.l():this.Pa(e)},Av.Pa=function(e){try{if(e==this.g)e:{var t=Gg(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||oy||this.g&&(this.h.h||this.g.ja()||Hg(this.g)))){this.J||4!=t||7==n||mm(),Wm(this);var r=this.g.da();this.ca=r;t:if(jm(this)){var i=Hg(this.g);e="";var a=i.length,o=4==Gg(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Gm(this),Km(this);var u="";break t}this.h.i=new Lv.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Jv(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,km(12),Gm(this),Km(this);break e}hm(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hm(this,r)}this.S?(Vm(this,t,u),oy&&this.i&&3==t&&(cm(this.U,this.V,"tick",this.mb),this.V.start())):(hm(this.j,this.m,u,null),Hm(this,u)),4==t&&Gm(this),this.i&&!this.J&&(4==t?lk(this.l,this):(this.i=!1,qm(this)))}else(function(e){var t={};e=(e.g&&2<=Gg(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!Jv(e[n])){var r=Yy(e[n]),i=r[0];if("string"===typeof(r=r[1])){r=r.trim();var a=t[i]||[];t[i]=a,a.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<u.indexOf("Unknown SID")?(this.o=3,km(12)):(this.o=0,km(13)),Gm(this),Km(this)}}}catch(t){}},Av.mb=function(){if(this.g){var e=Gg(this.g),t=this.g.ja();this.C<t.length&&(Wm(this),Vm(this,e,t),this.i&&4!=e&&qm(this))}},Av.cancel=function(){this.J=!0,Gm(this)},Av.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(mm(),km(17)),Gm(this),this.o=2,Km(this)):zm(this,this.Y-e)};var Ym=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $m(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof $m){this.h=e.h,Xm(this,e.j),this.s=e.s,this.g=e.g,Zm(this,e.m),this.l=e.l;var t=e.i,n=new fg;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),eg(this,n),this.o=e.o}else e&&(t=String(e).match(Ym))?(this.h=!1,Xm(this,t[1]||"",!0),this.s=rg(t[2]||""),this.g=rg(t[3]||"",!0),Zm(this,t[4]),this.l=rg(t[5]||"",!0),eg(this,t[6]||"",!0),this.o=rg(t[7]||"")):(this.h=!1,this.i=new fg(null,this.h))}function Jm(e){return new $m(e)}function Xm(e,t,n){e.j=n?rg(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Zm(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function eg(e,t,n){t instanceof fg?(e.i=t,function(e,t){t&&!e.j&&(hg(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(dg(this,t),vg(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ig(t,cg)),e.i=new fg(t,e.h))}function tg(e,t,n){e.i.set(t,n)}function ng(e){return tg(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function rg(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ig(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,ag),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ag(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}$m.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ig(t,og,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(ig(t,og,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ig(n,"/"==n.charAt(0)?sg:ug,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",ig(n,lg)),e.join("")};var og=/[#\/\?@]/g,ug=/[#\?:]/g,sg=/[#\?]/g,cg=/[#\?@]/g,lg=/#/g;function fg(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function hg(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function dg(e,t){hg(e),t=yg(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function pg(e,t){return hg(e),t=yg(e,t),e.g.has(t)}function vg(e,t,n){dg(e,t),0<n.length&&(e.i=null,e.g.set(yg(e,t),Hv(n)),e.h+=n.length)}function yg(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Av=fg.prototype).add=function(e,t){hg(this),this.i=null,e=yg(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Av.forEach=function(e,t){hg(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Av.ta=function(){hg(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Av.Z=function(e){hg(this);var t=[];if("string"===typeof e)pg(this,e)&&(t=t.concat(this.g.get(yg(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Av.set=function(e,t){return hg(this),this.i=null,pg(this,e=yg(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Av.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Av.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var mg=Ut((function e(t,n){Mt(this,e),this.g=t,this.map=n}));function gg(e){this.l=e||kg,Lv.PerformanceNavigationTiming?e=0<(e=Lv.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Lv.g&&Lv.g.Ka&&Lv.g.Ka()&&Lv.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var kg=10;function wg(e){return!!e.h||!!e.g&&e.g.size>=e.j}function bg(e){return e.h?1:e.g?e.g.size:0}function _g(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function xg(e,t){e.g?e.g.add(t):e.h=t}function Eg(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Sg(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=Qt(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return Hv(e.i)}gg.prototype.cancel=function(){if(this.i=Sg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=Qt(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}};var Ig=function(){function e(){Mt(this,e)}return Ut(e,[{key:"stringify",value:function(e){return Lv.JSON.stringify(e,void 0)}},{key:"parse",value:function(e){return Lv.JSON.parse(e,void 0)}}]),e}();function Tg(){this.g=new Ig}function Cg(e,t,n){var r=n||"";try{Qm(e,(function(e,n){var i=e;Fv(e)&&(i=zy(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ng(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(U){}}function Pg(e){this.l=e.fc||null,this.j=e.ob||!1}function Ag(e,t){Vy.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Rg,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Wv(Pg,Em),Pg.prototype.g=function(){return new Ag(this.l,this.j)},Pg.prototype.i=function(e){return function(){return e}}({}),Wv(Ag,Vy);var Rg=0;function Og(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Dg(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Lg(e)}function Lg(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Av=Ag.prototype).open=function(e,t){if(this.readyState!=Rg)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Lg(this)},Av.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Lv).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Av.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Dg(this)),this.readyState=Rg},Av.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Lg(this)),this.g&&(this.readyState=3,Lg(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Lv.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Og(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Av.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Dg(this):Lg(this),3==this.readyState&&Og(this)}},Av.Za=function(e){this.g&&(this.response=this.responseText=e,Dg(this))},Av.Ya=function(e){this.g&&(this.response=e,Dg(this))},Av.ka=function(){this.g&&Dg(this)},Av.setRequestHeader=function(e,t){this.v.append(e,t)},Av.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Av.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ag.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Mg=Lv.JSON.parse;function Fg(e){Vy.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Ug,this.L=this.M=!1}Wv(Fg,Vy);var Ug="",jg=/^https?$/i,Vg=["POST","PUT"];function Bg(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,qg(e),Wg(e)}function qg(e){e.F||(e.F=!0,By(e,"complete"),By(e,"error"))}function zg(e){if(e.h&&"undefined"!=typeof Dv&&(!e.C[1]||4!=Gg(e)||2!=e.da()))if(e.v&&4==Gg(e))im(e.La,0,e);else if(By(e,"readystatechange"),4==Gg(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(Ym)[1]||null;!a&&Lv.self&&Lv.self.location&&(a=Lv.self.location.protocol.slice(0,-1)),i=!jg.test(a?a.toLowerCase():"")}t=i}if(t)By(e,"complete"),By(e,"success");else{e.m=6;try{var o=2<Gg(e)?e.g.statusText:""}catch(A){o=""}e.j=o+" ["+e.da()+"]",qg(e)}}finally{Wg(e)}}}function Wg(e,t){if(e.g){Kg(e);var n=e.g,r=e.C[0]?function(){}:null;e.g=null,e.C=null,t||By(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Kg(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Lv.clearTimeout(e.A),e.A=null)}function Gg(e){return e.g?e.g.readyState:0}function Hg(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Ug:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(H){return null}}function Qg(e){var t="";return by(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Yg(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Qg(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):tg(e,t,n))}function $g(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Jg(e){this.Ga=0,this.j=[],this.l=new fm,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=$g("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=$g("baseRetryDelayMs",5e3,e),this.hb=$g("retryDelaySeedMs",1e4,e),this.eb=$g("forwardChannelMaxRetries",2,e),this.xa=$g("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new gg(e&&e.concurrentRequestLimit),this.Ja=new Tg,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Xg(e){if(ek(e),3==e.H){var t=e.W++,n=Jm(e.I);if(tg(n,"SID",e.K),tg(n,"RID",t),tg(n,"TYPE","terminate"),rk(e,n),(t=new Rm(e,e.l,t)).L=2,t.v=ng(Jm(n)),n=!1,Lv.navigator&&Lv.navigator.sendBeacon)try{n=Lv.navigator.sendBeacon(t.v.toString(),"")}catch(W){}!n&&Lv.Image&&((new Image).src=t.v,n=!0),n||(t.g=vk(t.l,null),t.g.ha(t.v)),t.G=Date.now(),qm(t)}dk(e)}function Zg(e){e.g&&(uk(e),e.g.cancel(),e.g=null)}function ek(e){Zg(e),e.u&&(Lv.clearTimeout(e.u),e.u=null),ck(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Lv.clearTimeout(e.m),e.m=null)}function tk(e){if(!wg(e.i)&&!e.m){e.m=!0;var t=e.Na;Jy||em(),Xy||(Jy(),Xy=!0),Zy.add(t,e),e.C=0}}function nk(e,t){var n;n=t?t.m:e.W++;var r=Jm(e.I);tg(r,"SID",e.K),tg(r,"RID",n),tg(r,"AID",e.V),rk(e,r),e.o&&e.s&&Yg(r,e.o,e.s),n=new Rm(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=ik(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),xg(e.i,n),Fm(n,r,t)}function rk(e,t){e.na&&by(e.na,(function(e,n){tg(t,n,e)})),e.h&&Qm({},(function(e,n){tg(t,n,e)}))}function ik(e,t,n){n=Math.min(e.j.length,n);var r=e.h?qv(e.h.Va,e.h,e):null;e:for(var i=e.j,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].g,l=i[s].map;if(0>(c-=a))a=Math.max(0,i[s].g-100),u=!1;else try{Cg(l,o,"req"+c+"_")}catch(we){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.j.splice(0,n),t.F=e,r}function ak(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Jy||em(),Xy||(Jy(),Xy=!0),Zy.add(t,e),e.A=0}}function ok(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=bm(qv(e.Ma,e),fk(e,e.A)),e.A++,!0)}function uk(e){null!=e.B&&(Lv.clearTimeout(e.B),e.B=null)}function sk(e){e.g=new Rm(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Jm(e.wa);tg(t,"RID","rpc"),tg(t,"SID",e.K),tg(t,"AID",e.V),tg(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&tg(t,"TO",e.qa),tg(t,"TYPE","xmlhttp"),rk(e,t),e.o&&e.s&&Yg(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=ng(Jm(t)),n.s=null,n.S=!0,Um(n,e)}function ck(e){null!=e.v&&(Lv.clearTimeout(e.v),e.v=null)}function lk(e,t){var n=null;if(e.g==t){ck(e),uk(e),e.g=null;var r=2}else{if(!_g(e.i,t))return;n=t.F,Eg(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;By(r=vm(),new wm(r,n)),tk(e)}else ak(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(bg(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=bm(qv(e.Na,e,t),fk(e,e.C)),e.C++,!0))}(e,t)||2==r&&ok(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:hk(e,5);break;case 4:hk(e,10);break;case 3:hk(e,6);break;default:hk(e,2)}}function fk(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function hk(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=qv(e.pb,e);n||(n=new $m("//www.google.com/images/cleardot.gif"),Lv.location&&"http"==Lv.location.protocol||Xm(n,"https"),ng(n)),function(e,t){var n=new fm;if(Lv.Image){var r=new Image;r.onload=zv(Ng,n,r,"TestLoadImage: loaded",!0,t),r.onerror=zv(Ng,n,r,"TestLoadImage: error",!1,t),r.onabort=zv(Ng,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=zv(Ng,n,r,"TestLoadImage: timeout",!1,t),Lv.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else km(2);e.H=0,e.h&&e.h.za(t),dk(e),ek(e)}function dk(e){if(e.H=0,e.ma=[],e.h){var t=Sg(e.i);0==t.length&&0==e.j.length||(Qv(e.ma,t),Qv(e.ma,e.j),e.i.i.length=0,Hv(e.j),e.j.length=0),e.h.ya()}}function pk(e,t,n){var r=n instanceof $m?Jm(n):new $m(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Zm(r,r.m);else{var i=Lv.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new $m(null);r&&Xm(a,r),t&&(a.g=t),i&&Zm(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&tg(r,n,t),tg(r,"VER",e.ra),rk(e,r),r}function vk(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new Fg(new Pg({ob:!0})):new Fg(e.va)).Oa(e.J),t}function yk(){}function mk(){if(iy&&!(10<=Number(py)))throw Error("Environmental error: no available transport.")}function gk(e,t){Vy.call(this),this.g=new Jg(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Jv(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Jv(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new bk(this)}function kk(e){Nm.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function wk(){Pm.call(this),this.status=1}function bk(e){this.g=e}function _k(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function xk(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function Ek(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(Av=Fg.prototype).Oa=function(e){this.M=e},Av.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Tm.g(),this.C=this.u?Sm(this.u):Sm(Tm),this.g.onreadystatechange=qv(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(u){return void Bg(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=Qt(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(d){o.e(d)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=Lv.FormData&&e instanceof Lv.FormData,!(0<=Gv(Vg,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,c=Qt(n);try{for(c.s();!(s=c.n()).done;){var l=Ot(s.value,2),f=l[0],h=l[1];this.g.setRequestHeader(f,h)}}catch(d){c.e(d)}finally{c.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Kg(this),0<this.B&&((this.L=function(e){return iy&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=qv(this.ua,this)):this.A=im(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){Bg(this,u)}},Av.ua=function(){"undefined"!=typeof Dv&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,By(this,"timeout"),this.abort(8))},Av.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,By(this,"complete"),By(this,"abort"),Wg(this))},Av.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Wg(this,!0)),Fg.$.N.call(this)},Av.La=function(){this.s||(this.G||this.v||this.l?zg(this):this.kb())},Av.kb=function(){zg(this)},Av.isActive=function(){return!!this.g},Av.da=function(){try{return 2<Gg(this)?this.g.status:-1}catch(F){return-1}},Av.ja=function(){try{return this.g?this.g.responseText:""}catch(F){return""}},Av.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Mg(t)}},Av.Ia=function(){return this.m},Av.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Av=Jg.prototype).ra=8,Av.H=1,Av.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new Rm(this,this.l,e),n=this.s;if(this.U&&(n?Ey(n=_y(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.j.length;i++){var a=this.j[i];if(void 0===(a="__data__"in a.map&&"string"===typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.j.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=ik(this,t,r),tg(i=Jm(this.I),"RID",e),tg(i,"CVER",22),this.F&&tg(i,"X-HTTP-Session-Id",this.F),rk(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(Qg(n)))+"&"+r:this.o&&Yg(i,this.o,n)),xg(this.i,t),this.bb&&tg(i,"TYPE","init"),this.P?(tg(i,"$req",r),tg(i,"SID","null"),t.aa=!0,Fm(t,i,null)):Fm(t,i,r),this.H=2}}else 3==this.H&&(e?nk(this,e):0==this.j.length||wg(this.i)||nk(this))},Av.Ma=function(){if(this.u=null,sk(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=bm(qv(this.jb,this),e)}},Av.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,km(10),Zg(this),sk(this))},Av.ib=function(){null!=this.v&&(this.v=null,Zg(this),ok(this),km(19))},Av.pb=function(e){e?(this.l.info("Successfully pinged google.com"),km(2)):(this.l.info("Failed to ping google.com"),km(1))},Av.isActive=function(){return!!this.h&&this.h.isActive(this)},(Av=yk.prototype).Ba=function(){},Av.Aa=function(){},Av.za=function(){},Av.ya=function(){},Av.isActive=function(){return!0},Av.Va=function(){},mk.prototype.g=function(e,t){return new gk(e,t)},Wv(gk,Vy),gk.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;km(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=pk(e,null,e.Y),tk(e)},gk.prototype.close=function(){Xg(this.g)},gk.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=zy(e),e=n);t.j.push(new mg(t.fb++,e)),3==t.H&&tk(t)},gk.prototype.N=function(){this.g.h=null,delete this.j,Xg(this.g),delete this.g,gk.$.N.call(this)},Wv(kk,Nm),Wv(wk,Pm),Wv(bk,yk),bk.prototype.Ba=function(){By(this.g,"a")},bk.prototype.Aa=function(e){By(this.g,new kk(e))},bk.prototype.za=function(e){By(this.g,new wk)},bk.prototype.ya=function(){By(this.g,"b")},Wv(_k,(function(){this.blockSize=-1})),_k.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},_k.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)xk(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){xk(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){xk(this,r),i=0;break}}this.h=i,this.i+=t},_k.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Sk={};function Ik(e){return-128<=e&&128>e?function(e,t){var n=Sk;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Ek([0|e],0>e?-1:0)})):new Ek([0|e],0>e?-1:0)}function Tk(e){if(isNaN(e)||!isFinite(e))return Nk;if(0>e)return Dk(Tk(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Ck;return new Ek(t,0)}var Ck=4294967296,Nk=Ik(0),Pk=Ik(1),Ak=Ik(16777216);function Rk(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Ok(e){return-1==e.h}function Dk(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Ek(n,~e.h).add(Pk)}function Lk(e,t){return e.add(Dk(t))}function Mk(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Fk(e,t){this.g=e,this.h=t}function Uk(e,t){if(Rk(t))throw Error("division by zero");if(Rk(e))return new Fk(Nk,Nk);if(Ok(e))return t=Uk(Dk(e),t),new Fk(Dk(t.g),Dk(t.h));if(Ok(t))return t=Uk(e,Dk(t)),new Fk(Dk(t.g),t.h);if(30<e.g.length){if(Ok(e)||Ok(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Pk,r=t;0>=r.X(e);)n=jk(n),r=jk(r);var i=Vk(n,1),a=Vk(r,1);for(r=Vk(r,2),n=Vk(n,2);!Rk(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=Vk(r,1),n=Vk(n,1)}return t=Lk(e,i.R(t)),new Fk(i,t)}for(i=Nk;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=Tk(n)).R(t);Ok(o)||0<o.X(e);)o=(a=Tk(n-=r)).R(t);Rk(a)&&(a=Pk),i=i.add(a),e=Lk(e,o)}return new Fk(i,e)}function jk(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Ek(n,e.h)}function Vk(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new Ek(i,e.h)}(Av=Ek.prototype).ea=function(){if(Ok(this))return-Dk(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Ck+r)*t,t*=Ck}return e},Av.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Rk(this))return"0";if(Ok(this))return"-"+Dk(this).toString(e);for(var t=Tk(Math.pow(e,6)),n=this,r="";;){var i=Uk(n,t).g,a=((0<(n=Lk(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Rk(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},Av.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Av.X=function(e){return Ok(e=Lk(this,e))?-1:Rk(e)?0:1},Av.abs=function(){return Ok(this)?Dk(this):this},Av.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new Ek(n,-2147483648&n[n.length-1]?-1:0)},Av.R=function(e){if(Rk(this)||Rk(e))return Nk;if(Ok(this))return Ok(e)?Dk(this).R(Dk(e)):Dk(Dk(this).R(e));if(Ok(e))return Dk(this.R(Dk(e)));if(0>this.X(Ak)&&0>e.X(Ak))return Tk(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),u=e.D(i)>>>16,s=65535&e.D(i);n[2*r+2*i]+=o*s,Mk(n,2*r+2*i),n[2*r+2*i+1]+=a*s,Mk(n,2*r+2*i+1),n[2*r+2*i+1]+=o*u,Mk(n,2*r+2*i+1),n[2*r+2*i+2]+=a*u,Mk(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Ek(n,0)},Av.gb=function(e){return Uk(this,e).h},Av.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Ek(n,this.h&e.h)},Av.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Ek(n,this.h|e.h)},Av.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Ek(n,this.h^e.h)},mk.prototype.createWebChannel=mk.prototype.g,gk.prototype.send=gk.prototype.u,gk.prototype.open=gk.prototype.m,gk.prototype.close=gk.prototype.close,_m.NO_ERROR=0,_m.TIMEOUT=8,_m.HTTP_ERROR=6,xm.COMPLETE="complete",Im.EventType=Cm,Cm.OPEN="a",Cm.CLOSE="b",Cm.ERROR="c",Cm.MESSAGE="d",Vy.prototype.listen=Vy.prototype.O,Fg.prototype.listenOnce=Fg.prototype.P,Fg.prototype.getLastError=Fg.prototype.Sa,Fg.prototype.getLastErrorCode=Fg.prototype.Ia,Fg.prototype.getStatus=Fg.prototype.da,Fg.prototype.getResponseJson=Fg.prototype.Wa,Fg.prototype.getResponseText=Fg.prototype.ja,Fg.prototype.send=Fg.prototype.ha,Fg.prototype.setWithCredentials=Fg.prototype.Oa,_k.prototype.digest=_k.prototype.l,_k.prototype.reset=_k.prototype.reset,_k.prototype.update=_k.prototype.j,Ek.prototype.add=Ek.prototype.add,Ek.prototype.multiply=Ek.prototype.R,Ek.prototype.modulo=Ek.prototype.gb,Ek.prototype.compare=Ek.prototype.X,Ek.prototype.toNumber=Ek.prototype.ea,Ek.prototype.toString=Ek.prototype.toString,Ek.prototype.getBits=Ek.prototype.D,Ek.fromNumber=Tk,Ek.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Dk(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Tk(Math.pow(n,8)),i=Nk,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),u=parseInt(t.substring(a,a+o),n);8>o?(o=Tk(Math.pow(n,o)),i=i.R(o).add(Tk(u))):i=(i=i.R(r)).add(Tk(u))}return i};var Bk=Ov.createWebChannelTransport=function(){return new mk},qk=Ov.getStatEventTarget=function(){return vm()},zk=Ov.ErrorCode=_m,Wk=Ov.EventType=xm,Kk=Ov.Event=dm,Gk=Ov.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Hk=Ov.FetchXmlHttpFactory=Pg,Qk=Ov.WebChannel=Im,Yk=Ov.XhrIo=Fg,$k=Ov.Md5=_k,Jk=Ov.Integer=Ek,Xk="@firebase/firestore",Zk=function(){function e(t){Mt(this,e),this.uid=t}return Ut(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Zk.UNAUTHENTICATED=new Zk(null),Zk.GOOGLE_CREDENTIALS=new Zk("google-credentials-uid"),Zk.FIRST_PARTY=new Zk("first-party-uid"),Zk.MOCK_USER=new Zk("mock-user");var ew="9.23.0",tw=new Vo("@firebase/firestore");function nw(){return tw.logLevel}function rw(e){if(tw.logLevel<=Oo.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ow);tw.debug.apply(tw,["Firestore (".concat(ew,"): ").concat(e)].concat(Lt(i)))}}function iw(e){if(tw.logLevel<=Oo.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ow);tw.error.apply(tw,["Firestore (".concat(ew,"): ").concat(e)].concat(Lt(i)))}}function aw(e){if(tw.logLevel<=Oo.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ow);tw.warn.apply(tw,["Firestore (".concat(ew,"): ").concat(e)].concat(Lt(i)))}}function ow(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function uw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(ew,") INTERNAL ASSERTION FAILED: ")+e;throw iw(t),new Error(t)}function sw(e,t){e||uw()}function cw(e,t){return e}var lw={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},fw=function(e){Vt(n,e);var t=Wt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return Ut(n)}(ro),hw=Ut((function e(){var t=this;Mt(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),dw=Ut((function e(t,n){Mt(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),pw=function(){function e(){Mt(this,e)}return Ut(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Zk.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),vw=function(){function e(t){Mt(this,e),this.token=t,this.changeListener=null}return Ut(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),yw=function(){function e(t){Mt(this,e),this.t=t,this.currentUser=Zk.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return Ut(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new hw;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new hw,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){rw("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(rw("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new hw)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(rw("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(sw("string"==typeof n.accessToken),new dw(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return sw(null===e||"string"==typeof e),new Zk(e)}}]),e}(),mw=function(){function e(t,n,r){Mt(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=Zk.FIRST_PARTY,this.g=new Map}return Ut(e,[{key:"p",value:function(){return this.m?this.m():null}},{key:"headers",get:function(){this.g.set("X-Goog-AuthUser",this.h);var e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}]),e}(),gw=function(){function e(t,n,r){Mt(this,e),this.h=t,this.l=n,this.m=r}return Ut(e,[{key:"getToken",value:function(){return Promise.resolve(new mw(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Zk.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),kw=Ut((function e(t){Mt(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),ww=function(){function e(t){Mt(this,e),this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}return Ut(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&rw("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.T;return n.T=e.token,rw("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){rw("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.I.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.I.getImmediate({optional:!0});e?i(e):rw("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(sw("string"==typeof t.token),e.T=t.token,new kw(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function bw(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var _w=function(){function e(){Mt(this,e)}return Ut(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=bw(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function xw(e,t){return e<t?-1:e>t?1:0}function Ew(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Sw(e){return e+"\0"}var Iw=function(){function e(t,n){if(Mt(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new fw(lw.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new fw(lw.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new fw(lw.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new fw(lw.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return Ut(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?xw(this.nanoseconds,e.nanoseconds):xw(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Tw=function(){function e(t){Mt(this,e),this.timestamp=t}return Ut(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Iw(0,0))}},{key:"max",value:function(){return new e(new Iw(253402300799,999999999))}}]),e}(),Cw=function(){function e(t,n,r){Mt(this,e),void 0===n?n=0:n>t.length&&uw(),void 0===r?r=t.length-n:r>t.length-n&&uw(),this.segments=t,this.offset=n,this.len=r}return Ut(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Nw=function(e){Vt(n,e);var t=Wt(n);function n(){return Mt(this,n),t.apply(this,arguments)}return Ut(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new fw(lw.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,Lt(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Cw),Pw=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Aw=function(e){Vt(n,e);var t=Wt(n);function n(){return Mt(this,n),t.apply(this,arguments)}return Ut(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Pw.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new fw(lw.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new fw(lw.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new fw(lw.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new fw(lw.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Cw),Rw=function(){function e(t){Mt(this,e),this.path=t}return Ut(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Nw.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Nw.fromString(t))}},{key:"fromName",value:function(t){return new e(Nw.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Nw.emptyPath())}},{key:"comparator",value:function(e,t){return Nw.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Nw(t.slice()))}}]),e}(),Ow=Ut((function e(t,n,r,i){Mt(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Dw(e){return e.fields.find((function(e){return 2===e.kind}))}function Lw(e){return e.fields.filter((function(e){return 2!==e.kind}))}Ow.UNKNOWN_ID=-1;var Mw=Ut((function e(t,n){Mt(this,e),this.fieldPath=t,this.kind=n}));var Fw=function(){function e(t,n){Mt(this,e),this.sequenceNumber=t,this.offset=n}return Ut(e,null,[{key:"empty",value:function(){return new e(0,Vw.min())}}]),e}();function Uw(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Tw.fromTimestamp(1e9===r?new Iw(n+1,0):new Iw(n,r));return new Vw(i,Rw.empty(),t)}function jw(e){return new Vw(e.readTime,e.key,-1)}var Vw=function(){function e(t,n,r){Mt(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return Ut(e,null,[{key:"min",value:function(){return new e(Tw.min(),Rw.empty(),-1)}},{key:"max",value:function(){return new e(Tw.max(),Rw.empty(),-1)}}]),e}();function Bw(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Rw.comparator(e.documentKey,t.documentKey))?n:xw(e.largestBatchId,t.largestBatchId)}var qw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",zw=function(){function e(){Mt(this,e),this.onCommittedListeners=[]}return Ut(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Ww(e){return Kw.apply(this,arguments)}function Kw(){return Kw=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===lw.FAILED_PRECONDITION&&t.message===qw){e.next=2;break}throw t;case 2:rw("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Kw.apply(this,arguments)}var Gw=function(){function e(t){var n=this;Mt(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return Ut(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&uw(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=Qt(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Hw=function(){function e(t,n){var r=this;Mt(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.v=new hw,this.transaction.oncomplete=function(){r.v.resolve()},this.transaction.onabort=function(){n.error?r.v.reject(new $w(t,n.error)):r.v.resolve()},this.transaction.onerror=function(e){var n=tb(e.target.error);r.v.reject(new $w(t,n))}}return Ut(e,[{key:"R",get:function(){return this.v.promise}},{key:"abort",value:function(e){e&&this.v.reject(e),this.aborted||(rw("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"P",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Xw(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new $w(n,t)}}}]),e}(),Qw=function(){function e(t,n,r){Mt(this,e),this.name=t,this.version=n,this.V=r,12.2===e.S(Ya())&&iw("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return Ut(e,[{key:"$",value:function(){var e=fr(cr().mark((function e(t){var n=this;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return rw("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new $w(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new fw(lw.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new fw(lw.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new $w(t,n))},i.onupgradeneeded=function(e){rw("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.V.O(t,i.transaction,e.oldVersion,n.version).next((function(){rw("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.F&&(this.db.onversionchange=function(e){return n.F(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"B",value:function(e){this.F=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=fr(cr().mark((function e(t,n,r,i){var a,o,u,s,c=this;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,u=cr().mark((function e(){var n,u,s,l;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.$(t);case 4:return c.db=e.sent,n=Hw.open(c.db,t,a?"readonly":"readwrite",r),u=i(n).next((function(e){return n.P(),e})).catch((function(e){return n.abort(e),Gw.reject(e)})).toPromise(),u.catch((function(){})),e.next=9,n.R;case 9:return e.t0=u,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),s=e.t1,l="FirebaseError"!==s.name&&o<3,rw("SimpleDb","Transaction failed with error:",s.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(s)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(u(),"t0",4);case 4:if("object"!==typeof(s=e.t0)){e.next=7;break}return e.abrupt("return",s.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return rw("SimpleDb","Removing database:",e),Zw(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"D",value:function(){if(!no())return!1;if(e.C())return!0;var t=Ya(),n=e.S(t),r=0<n&&n<10,i=e.N(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/BunnuFlix",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.k)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"S",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"N",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Yw=function(){function e(t){Mt(this,e),this.L=t,this.q=!1,this.U=null}return Ut(e,[{key:"isDone",get:function(){return this.q}},{key:"K",get:function(){return this.U}},{key:"cursor",set:function(e){this.L=e}},{key:"done",value:function(){this.q=!0}},{key:"G",value:function(e){this.U=e}},{key:"delete",value:function(){return Zw(this.L.delete())}}]),e}(),$w=function(e){Vt(n,e);var t=Wt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this,lw.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return Ut(n)}(fw);function Jw(e){return"IndexedDbTransactionError"===e.name}var Xw=function(){function e(t){Mt(this,e),this.store=t}return Ut(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(rw("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(rw("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Zw(n)}},{key:"add",value:function(e){return rw("SimpleDb","ADD",this.store.name,e,e),Zw(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Zw(this.store.get(e)).next((function(n){return void 0===n&&(n=null),rw("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return rw("SimpleDb","DELETE",this.store.name,e),Zw(this.store.delete(e))}},{key:"count",value:function(){return rw("SimpleDb","COUNT",this.store.name),Zw(this.store.count())}},{key:"j",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.W(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Gw((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Gw((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){rw("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.W(r,(function(e,t,n){return n.delete()}))}},{key:"X",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.W(r,t)}},{key:"Z",value:function(e){var t=this.cursor({});return new Gw((function(n,r){t.onerror=function(e){var t=tb(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"W",value:function(e,t){var n=[];return new Gw((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Yw(i),o=t(i.primaryKey,i.value,a);if(o instanceof Gw){var u=o.catch((function(e){return a.done(),Gw.reject(e)}));n.push(u)}a.isDone?r():null===a.K?i.continue():i.continue(a.K)}else r()}})).next((function(){return Gw.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Zw(e){return new Gw((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=tb(e.target.error);n(t)}}))}var eb=!1;function tb(e){var t=Qw.S(Ya());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new fw("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return eb||(eb=!0,setTimeout((function(){throw r}),0)),r}}return e}var nb=function(){function e(t,n){Mt(this,e),this.asyncQueue=t,this.tt=n,this.task=null}return Ut(e,[{key:"start",value:function(){this.et(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"et",value:function(e){var t=this;rw("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=rw,e.t1="Documents written: ",e.next=6,t.tt.nt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Jw(e.t4)){e.next=17;break}rw("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Ww(e.t4);case 19:return e.next=21,t.et(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),rb=function(){function e(t,n){Mt(this,e),this.localStore=t,this.persistence=n}return Ut(e,[{key:"nt",value:function(){var e=fr(cr().mark((function e(){var t,n=this,r=arguments;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.st(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"st",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Gw.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return rw("IndexBackiller","Processing collection: ".concat(t)),n.it(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"it",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.rt(i,n)})).next((function(n){return rw("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"rt",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=jw(t);Bw(r,n)>0&&(n=r)})),new Vw(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),ib=function(){function e(t,n){var r=this;Mt(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ot(e)},this.ut=function(e){return n.writeSequenceNumber(e)})}return Ut(e,[{key:"ot",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ut&&this.ut(e),e}}]),e}();function ab(e){return null==e}function ob(e){return 0===e&&1/e==-1/0}function ub(e){return"number"==typeof e&&Number.isInteger(e)&&!ob(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function sb(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=lb(t)),t=cb(e.get(n),t);return lb(t)}function cb(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function lb(e){return e+"\x01\x01"}function fb(e){var t=e.length;if(sw(t>=2),2===t)return sw("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Nw.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&uw(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:uw()}a=o+2}return new Nw(r)}ib.ct=-1;var hb=["userId","batchId"];function db(e,t){return[e,sb(t)]}function pb(e,t,n){return[e,sb(t),n]}var vb={},yb=["prefixPath","collectionGroup","readTime","documentId"],mb=["prefixPath","collectionGroup","documentId"],gb=["collectionGroup","readTime","prefixPath","documentId"],kb=["canonicalId","targetId"],wb=["targetId","path"],bb=["path","targetId"],_b=["collectionId","parent"],xb=["indexId","uid"],Eb=["uid","sequenceNumber"],Sb=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ib=["indexId","uid","orderedDocumentKey"],Tb=["userId","collectionPath","documentId"],Cb=["userId","collectionPath","largestBatchId"],Nb=["userId","collectionGroup","largestBatchId"],Pb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Ab=[].concat(Lt(Pb),["documentOverlays"]),Rb=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ob=Rb,Db=[].concat(Ob,["indexConfiguration","indexState","indexEntries"]),Lb=function(e){Vt(n,e);var t=Wt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this)).ht=e,i.currentSequenceNumber=r,i}return Ut(n)}(zw);function Mb(e,t){var n=cw(e);return Qw.M(n.ht,t)}function Fb(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ub(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function jb(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Vb=function(){function e(t,n){Mt(this,e),this.comparator=t,this.root=n||qb.EMPTY}return Ut(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,qb.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,qb.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Bb(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Bb(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Bb(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Bb(this.root,e,this.comparator,!0)}}]),e}(),Bb=function(){function e(t,n,r,i){Mt(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return Ut(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),qb=function(){function e(t,n,r,i,a){Mt(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return Ut(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw uw();if(this.right.isRed())throw uw();var e=this.left.check();if(e!==this.right.check())throw uw();return e+(this.isRed()?0:1)}}]),e}();qb.EMPTY=null,qb.RED=!0,qb.BLACK=!1,qb.EMPTY=new(function(){function e(){Mt(this,e),this.size=0}return Ut(e,[{key:"key",get:function(){throw uw()}},{key:"value",get:function(){throw uw()}},{key:"color",get:function(){throw uw()}},{key:"left",get:function(){throw uw()}},{key:"right",get:function(){throw uw()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new qb(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var zb=function(){function e(t){Mt(this,e),this.comparator=t,this.data=new Vb(this.comparator)}return Ut(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Wb(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Wb(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Wb=function(){function e(t){Mt(this,e),this.iter=t}return Ut(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Kb(e){return e.hasNext()?e.getNext():void 0}var Gb=function(){function e(t){Mt(this,e),this.fields=t,t.sort(Aw.comparator)}return Ut(e,[{key:"unionWith",value:function(t){var n,r=new zb(Aw.comparator),i=Qt(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=Qt(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=Qt(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Ew(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),Hb=function(e){Vt(n,e);var t=Wt(n);function n(){var e;return Mt(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return Ut(n)}(Gt(Error));var Qb=function(e){function t(e){Mt(this,t),this.binaryString=e}return Ut(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return xw(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Hb("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Qb.EMPTY_BYTE_STRING=new Qb("");var Yb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $b(e){if(sw(!!e),"string"==typeof e){var t=0,n=Yb.exec(e);if(sw(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Jb(e.seconds),nanos:Jb(e.nanos)}}function Jb(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Xb(e){return"string"==typeof e?Qb.fromBase64String(e):Qb.fromUint8Array(e)}function Zb(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function e_(e){var t=e.mapValue.fields.__previous_value__;return Zb(t)?e_(t):t}function t_(e){var t=$b(e.mapValue.fields.__local_write_time__.timestampValue);return new Iw(t.seconds,t.nanos)}var n_=Ut((function e(t,n,r,i,a,o,u,s,c){Mt(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=s,this.useFetchStreams=c})),r_=function(){function e(t,n){Mt(this,e),this.projectId=t,this.database=n||"(default)"}return Ut(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),i_={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},a_={nullValue:"NULL_VALUE"};function o_(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Zb(e)?4:w_(e)?9007199254740991:10:uw()}function u_(e,t){if(e===t)return!0;var n=o_(e);if(n!==o_(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return t_(e).isEqual(t_(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=$b(e.timestampValue),r=$b(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Xb(e.bytesValue).isEqual(Xb(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Jb(e.geoPointValue.latitude)===Jb(t.geoPointValue.latitude)&&Jb(e.geoPointValue.longitude)===Jb(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Jb(e.integerValue)===Jb(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Jb(e.doubleValue),r=Jb(t.doubleValue);return n===r?ob(n)===ob(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ew(e.arrayValue.values||[],t.arrayValue.values||[],u_);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Fb(n)!==Fb(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!u_(n[i],r[i])))return!1;return!0}(e,t);default:return uw()}}function s_(e,t){return void 0!==(e.values||[]).find((function(e){return u_(e,t)}))}function c_(e,t){if(e===t)return 0;var n=o_(e),r=o_(t);if(n!==r)return xw(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return xw(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Jb(e.integerValue||e.doubleValue),r=Jb(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return l_(e.timestampValue,t.timestampValue);case 4:return l_(t_(e),t_(t));case 5:return xw(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Xb(e),r=Xb(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=xw(n[i],r[i]);if(0!==a)return a}return xw(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=xw(Jb(e.latitude),Jb(t.latitude));return 0!==n?n:xw(Jb(e.longitude),Jb(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=c_(n[i],r[i]);if(a)return a}return xw(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===i_.mapValue&&t===i_.mapValue)return 0;if(e===i_.mapValue)return 1;if(t===i_.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=xw(r[o],a[o]);if(0!==u)return u;var s=c_(n[r[o]],i[a[o]]);if(0!==s)return s}return xw(r.length,a.length)}(e.mapValue,t.mapValue);default:throw uw()}}function l_(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return xw(e,t);var n=$b(e),r=$b(t),i=xw(n.seconds,r.seconds);return 0!==i?i:xw(n.nanos,r.nanos)}function f_(e){return h_(e)}function h_(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=$b(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Xb(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Rw.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=Qt(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=h_(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=Qt(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(h_(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):uw();var t,n}function d_(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function p_(e){return!!e&&"integerValue"in e}function v_(e){return!!e&&"arrayValue"in e}function y_(e){return!!e&&"nullValue"in e}function m_(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function g_(e){return!!e&&"mapValue"in e}function k_(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Ub(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=k_(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=k_(e.arrayValue.values[r]);return n}return Object.assign({},e)}function w_(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function b_(e){return"nullValue"in e?a_:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?d_(r_.empty(),Rw.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:uw()}function __(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?d_(r_.empty(),Rw.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?i_:uw()}function x_(e,t){var n=c_(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function E_(e,t){var n=c_(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var S_=function(){function e(t){Mt(this,e),this.value=t}return Ut(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!g_(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=k_(t)}},{key:"setAll",value:function(e){var t=this,n=Aw.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=k_(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());g_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return u_(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];g_(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Ub(t,(function(t,n){return e[t]=n}));var r,i=Qt(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(k_(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function I_(e){var t=[];return Ub(e.fields,(function(e,n){var r=new Aw([e]);if(g_(n)){var i=I_(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=Qt(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Gb(t)}var T_=function(){function e(t,n,r,i,a,o,u){Mt(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return Ut(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(Tw.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=S_.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=S_.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Tw.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Tw.min(),Tw.min(),Tw.min(),S_.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,Tw.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Tw.min(),Tw.min(),S_.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Tw.min(),Tw.min(),S_.empty(),2)}}]),e}(),C_=Ut((function e(t,n){Mt(this,e),this.position=t,this.inclusive=n}));function N_(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Rw.comparator(Rw.fromName(o.referenceValue),n.key):c_(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function P_(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!u_(e.position[n],t.position[n]))return!1;return!0}var A_=Ut((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";Mt(this,e),this.field=t,this.dir=n}));function R_(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var O_=Ut((function e(){Mt(this,e)})),D_=function(e){Vt(n,e);var t=Wt(n);function n(e,r,i){var a;return Mt(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return Ut(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(c_(t,this.value)):null!==t&&o_(this.value)===o_(t)&&this.matchesComparison(c_(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return uw()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new W_(e,t,r):"array-contains"===t?new Q_(e,r):"in"===t?new Y_(e,r):"not-in"===t?new $_(e,r):"array-contains-any"===t?new J_(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new K_(e,n):new G_(e,n)}}]),n}(O_),L_=function(e){Vt(n,e);var t=Wt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this)).filters=e,i.op=r,i.lt=null,i}return Ut(n,[{key:"matches",value:function(e){return M_(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.lt||(this.lt=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.lt}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.ft((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"ft",value:function(e){var t,n=Qt(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(O_);function M_(e){return"and"===e.op}function F_(e){return"or"===e.op}function U_(e){return j_(e)&&M_(e)}function j_(e){var t,n=Qt(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof L_)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function V_(e){if(e instanceof D_)return e.field.canonicalString()+e.op.toString()+f_(e.value);if(U_(e))return e.filters.map((function(e){return V_(e)})).join(",");var t=e.filters.map((function(e){return V_(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function B_(e,t){return e instanceof D_?function(e,t){return t instanceof D_&&e.op===t.op&&e.field.isEqual(t.field)&&u_(e.value,t.value)}(e,t):e instanceof L_?function(e,t){return t instanceof L_&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&B_(n,t.filters[r])}),!0)}(e,t):void uw()}function q_(e,t){var n=e.filters.concat(t);return L_.create(n,e.op)}function z_(e){return e instanceof D_?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(f_(e.value))}(e):e instanceof L_?function(e){return e.op.toString()+" {"+e.getFilters().map(z_).join(" ,")+"}"}(e):"Filter"}var W_=function(e){Vt(n,e);var t=Wt(n);function n(e,r,i){var a;return Mt(this,n),(a=t.call(this,e,r,i)).key=Rw.fromName(i.referenceValue),a}return Ut(n,[{key:"matches",value:function(e){var t=Rw.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(D_),K_=function(e){Vt(n,e);var t=Wt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this,e,"in",r)).keys=H_("in",r),i}return Ut(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(D_),G_=function(e){Vt(n,e);var t=Wt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this,e,"not-in",r)).keys=H_("not-in",r),i}return Ut(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(D_);function H_(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Rw.fromName(e.referenceValue)}))}var Q_=function(e){Vt(n,e);var t=Wt(n);function n(e,r){return Mt(this,n),t.call(this,e,"array-contains",r)}return Ut(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return v_(t)&&s_(t.arrayValue,this.value)}}]),n}(D_),Y_=function(e){Vt(n,e);var t=Wt(n);function n(e,r){return Mt(this,n),t.call(this,e,"in",r)}return Ut(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&s_(this.value.arrayValue,t)}}]),n}(D_),$_=function(e){Vt(n,e);var t=Wt(n);function n(e,r){return Mt(this,n),t.call(this,e,"not-in",r)}return Ut(n,[{key:"matches",value:function(e){if(s_(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!s_(this.value.arrayValue,t)}}]),n}(D_),J_=function(e){Vt(n,e);var t=Wt(n);function n(e,r){return Mt(this,n),t.call(this,e,"array-contains-any",r)}return Ut(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!v_(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return s_(t.value.arrayValue,e)}))}}]),n}(D_),X_=Ut((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;Mt(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.dt=null}));function Z_(e){return new X_(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function ex(e){var t=cw(e);if(null===t.dt){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return V_(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),ab(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return f_(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return f_(e)})).join(",")),t.dt=n}return t.dt}function tx(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!R_(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!B_(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!P_(e.startAt,t.startAt)&&P_(e.endAt,t.endAt)}function nx(e){return Rw.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function rx(e,t){return e.filters.filter((function(e){return e instanceof D_&&e.field.isEqual(t)}))}function ix(e,t,n){var r,i=a_,a=!0,o=Qt(rx(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=a_,c=!0;switch(u.op){case"<":case"<=":s=b_(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=a_}x_({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];x_({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function ax(e,t,n){var r,i=i_,a=!0,o=Qt(rx(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=i_,c=!0;switch(u.op){case">=":case">":s=__(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=i_}E_({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];E_({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var ox=Ut((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Mt(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.wt=null,this._t=null,this.startAt,this.endAt}));function ux(e,t,n,r,i,a,o,u){return new ox(e,t,n,r,i,a,o,u)}function sx(e){return new ox(e)}function cx(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function lx(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function fx(e){var t,n=Qt(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function hx(e){return null!==e.collectionGroup}function dx(e){var t=cw(e);if(null===t.wt){t.wt=[];var n=fx(t),r=lx(t);if(null!==n&&null===r)n.isKeyField()||t.wt.push(new A_(n)),t.wt.push(new A_(Aw.keyField(),"asc"));else{var i,a=!1,o=Qt(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.wt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new A_(Aw.keyField(),s))}}}return t.wt}function px(e){var t=cw(e);if(!t._t)if("F"===t.limitType)t._t=Z_(t.path,t.collectionGroup,dx(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=Qt(dx(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new A_(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new C_(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new C_(t.startAt.position,t.startAt.inclusive):null;t._t=Z_(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t._t}function vx(e,t){t.getFirstInequalityField(),fx(e);var n=e.filters.concat([t]);return new ox(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function yx(e,t,n){return new ox(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function mx(e,t){return tx(px(e),px(t))&&e.limitType===t.limitType}function gx(e){return"".concat(ex(px(e)),"|lt:").concat(e.limitType)}function kx(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return z_(e)})).join(", "),"]")),ab(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return f_(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return f_(e)})).join(",")),"Target(".concat(t,")")}(px(e)),"; limitType=").concat(e.limitType,")")}function wx(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Rw.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=Qt(dx(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=Qt(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=N_(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,dx(e),t))&&!(e.endAt&&!function(e,t,n){var r=N_(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,dx(e),t))}(e,t)}function bx(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function _x(e){return function(t,n){var r,i=!1,a=Qt(dx(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=xx(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function xx(e,t,n){var r=e.field.isKeyField()?Rw.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?c_(r,i):uw()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return uw()}}var Ex=function(){function e(t,n){Mt(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return Ut(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=Qt(n);try{for(i.s();!(r=i.n()).done;){var a=Ot(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Ub(this.inner,(function(t,n){var r,i=Qt(n);try{for(i.s();!(r=i.n()).done;){var a=Ot(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return jb(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Sx=new Vb(Rw.comparator);function Ix(){return Sx}var Tx=new Vb(Rw.comparator);function Cx(){for(var e=Tx,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Nx(e){var t=Tx;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Px(){return Rx()}function Ax(){return Rx()}function Rx(){return new Ex((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Ox=new Vb(Rw.comparator),Dx=new zb(Rw.comparator);function Lx(){for(var e=Dx,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Mx=new zb(xw);function Fx(){return Mx}function Ux(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ob(t)?"-0":t}}function jx(e){return{integerValue:""+e}}function Vx(e,t){return ub(t)?jx(t):Ux(e,t)}var Bx=Ut((function e(){Mt(this,e),this._=void 0}));function qx(e,t,n){return e instanceof Kx?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Zb(t)&&(t=e_(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Gx?Hx(e,t):e instanceof Qx?Yx(e,t):function(e,t){var n=Wx(e,t),r=Jx(n)+Jx(e.gt);return p_(n)&&p_(e.gt)?jx(r):Ux(e.serializer,r)}(e,t)}function zx(e,t,n){return e instanceof Gx?Hx(e,t):e instanceof Qx?Yx(e,t):n}function Wx(e,t){return e instanceof $x?p_(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Kx=function(e){Vt(n,e);var t=Wt(n);function n(){return Mt(this,n),t.apply(this,arguments)}return Ut(n)}(Bx),Gx=function(e){Vt(n,e);var t=Wt(n);function n(e){var r;return Mt(this,n),(r=t.call(this)).elements=e,r}return Ut(n)}(Bx);function Hx(e,t){var n,r=Xx(t),i=Qt(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return u_(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Qx=function(e){Vt(n,e);var t=Wt(n);function n(e){var r;return Mt(this,n),(r=t.call(this)).elements=e,r}return Ut(n)}(Bx);function Yx(e,t){var n,r=Xx(t),i=Qt(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!u_(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var $x=function(e){Vt(n,e);var t=Wt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this)).serializer=e,i.gt=r,i}return Ut(n)}(Bx);function Jx(e){return Jb(e.integerValue||e.doubleValue)}function Xx(e){return v_(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Zx=Ut((function e(t,n){Mt(this,e),this.field=t,this.transform=n}));var eE=Ut((function e(t,n){Mt(this,e),this.version=t,this.transformResults=n})),tE=function(){function e(t,n){Mt(this,e),this.updateTime=t,this.exists=n}return Ut(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function nE(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var rE=Ut((function e(){Mt(this,e)}));function iE(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new yE(e.key,tE.none()):new cE(e.key,e.data,tE.none());var n,r=e.data,i=S_.empty(),a=new zb(Aw.comparator),o=Qt(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new lE(e.key,i,new Gb(a.toArray()),tE.none())}function aE(e,t,n){e instanceof cE?function(e,t,n){var r=e.value.clone(),i=hE(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof lE?function(e,t,n){if(nE(e.precondition,t)){var r=hE(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(fE(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function oE(e,t,n,r){return e instanceof cE?function(e,t,n,r){if(!nE(e.precondition,t))return n;var i=e.value.clone(),a=dE(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof lE?function(e,t,n,r){if(!nE(e.precondition,t))return n;var i=dE(e.fieldTransforms,r,t),a=t.data;return a.setAll(fE(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return nE(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function uE(e,t){var n,r=null,i=Qt(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Wx(a.transform,o||null);null!=u&&(null===r&&(r=S_.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function sE(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ew(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Gx&&t instanceof Gx||e instanceof Qx&&t instanceof Qx?Ew(e.elements,t.elements,u_):e instanceof $x&&t instanceof $x?u_(e.gt,t.gt):e instanceof Kx&&t instanceof Kx}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var cE=function(e){Vt(n,e);var t=Wt(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return Mt(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return Ut(n,[{key:"getFieldMask",value:function(){return null}}]),n}(rE),lE=function(e){Vt(n,e);var t=Wt(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return Mt(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return Ut(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(rE);function fE(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function hE(e,t,n){var r=new Map;sw(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,zx(o,u,n[i]))}return r}function dE(e,t,n){var r,i=new Map,a=Qt(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,qx(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var pE,vE,yE=function(e){Vt(n,e);var t=Wt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return Ut(n,[{key:"getFieldMask",value:function(){return null}}]),n}(rE),mE=function(e){Vt(n,e);var t=Wt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return Ut(n,[{key:"getFieldMask",value:function(){return null}}]),n}(rE),gE=function(){function e(t,n,r,i){Mt(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return Ut(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&aE(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=Qt(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=oE(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=Qt(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=oE(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Ax();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=iE(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(Tw.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Lx())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Ew(this.mutations,e.mutations,(function(e,t){return sE(e,t)}))&&Ew(this.baseMutations,e.baseMutations,(function(e,t){return sE(e,t)}))}}]),e}(),kE=function(){function e(t,n,r,i){Mt(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return Ut(e,null,[{key:"from",value:function(t,n,r){sw(t.mutations.length===r.length);for(var i=Ox,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),wE=function(){function e(t,n){Mt(this,e),this.largestBatchId=t,this.mutation=n}return Ut(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),bE=Ut((function e(t,n){Mt(this,e),this.count=t,this.unchangedNames=n}));function _E(e){switch(e){default:return uw();case lw.CANCELLED:case lw.UNKNOWN:case lw.DEADLINE_EXCEEDED:case lw.RESOURCE_EXHAUSTED:case lw.INTERNAL:case lw.UNAVAILABLE:case lw.UNAUTHENTICATED:return!1;case lw.INVALID_ARGUMENT:case lw.NOT_FOUND:case lw.ALREADY_EXISTS:case lw.PERMISSION_DENIED:case lw.FAILED_PRECONDITION:case lw.ABORTED:case lw.OUT_OF_RANGE:case lw.UNIMPLEMENTED:case lw.DATA_LOSS:return!0}}function xE(e){if(void 0===e)return iw("GRPC error has no .code"),lw.UNKNOWN;switch(e){case pE.OK:return lw.OK;case pE.CANCELLED:return lw.CANCELLED;case pE.UNKNOWN:return lw.UNKNOWN;case pE.DEADLINE_EXCEEDED:return lw.DEADLINE_EXCEEDED;case pE.RESOURCE_EXHAUSTED:return lw.RESOURCE_EXHAUSTED;case pE.INTERNAL:return lw.INTERNAL;case pE.UNAVAILABLE:return lw.UNAVAILABLE;case pE.UNAUTHENTICATED:return lw.UNAUTHENTICATED;case pE.INVALID_ARGUMENT:return lw.INVALID_ARGUMENT;case pE.NOT_FOUND:return lw.NOT_FOUND;case pE.ALREADY_EXISTS:return lw.ALREADY_EXISTS;case pE.PERMISSION_DENIED:return lw.PERMISSION_DENIED;case pE.FAILED_PRECONDITION:return lw.FAILED_PRECONDITION;case pE.ABORTED:return lw.ABORTED;case pE.OUT_OF_RANGE:return lw.OUT_OF_RANGE;case pE.UNIMPLEMENTED:return lw.UNIMPLEMENTED;case pE.DATA_LOSS:return lw.DATA_LOSS;default:return uw()}}(vE=pE||(pE={}))[vE.OK=0]="OK",vE[vE.CANCELLED=1]="CANCELLED",vE[vE.UNKNOWN=2]="UNKNOWN",vE[vE.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vE[vE.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vE[vE.NOT_FOUND=5]="NOT_FOUND",vE[vE.ALREADY_EXISTS=6]="ALREADY_EXISTS",vE[vE.PERMISSION_DENIED=7]="PERMISSION_DENIED",vE[vE.UNAUTHENTICATED=16]="UNAUTHENTICATED",vE[vE.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vE[vE.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vE[vE.ABORTED=10]="ABORTED",vE[vE.OUT_OF_RANGE=11]="OUT_OF_RANGE",vE[vE.UNIMPLEMENTED=12]="UNIMPLEMENTED",vE[vE.INTERNAL=13]="INTERNAL",vE[vE.UNAVAILABLE=14]="UNAVAILABLE",vE[vE.DATA_LOSS=15]="DATA_LOSS";var EE=function(){function e(){Mt(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return Ut(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return SE}},{key:"getOrCreateInstance",value:function(){return null===SE&&(SE=new e),SE}}]),e}(),SE=null;function IE(){return new TextEncoder}var TE=new Jk([4294967295,4294967295],0);function CE(e){var t=IE().encode(e),n=new $k;return n.update(t),new Uint8Array(n.digest())}function NE(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Jk([n,r],0),new Jk([i,a],0)]}var PE=function(){function e(t,n,r){if(Mt(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new AE("Invalid padding: ".concat(n));if(r<0)throw new AE("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new AE("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new AE("Invalid padding when bitmap length is 0: ".concat(n));this.It=8*t.length-n,this.Tt=Jk.fromNumber(this.It)}return Ut(e,[{key:"Et",value:function(e,t,n){var r=e.add(t.multiply(Jk.fromNumber(n)));return 1===r.compare(TE)&&(r=new Jk([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}},{key:"At",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"vt",value:function(e){if(0===this.It)return!1;for(var t=Ot(NE(CE(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Et(n,r,i);if(!this.At(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.It)for(var t=Ot(NE(CE(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Et(n,r,i);this.Rt(a)}}},{key:"Rt",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),AE=function(e){Vt(n,e);var t=Wt(n);function n(){var e;return Mt(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return Ut(n)}(Gt(Error)),RE=function(){function e(t,n,r,i,a){Mt(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return Ut(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,OE.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(Tw.min(),i,new Vb(xw),Ix(),Lx())}}]),e}(),OE=function(){function e(t,n,r,i,a){Mt(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return Ut(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Lx(),Lx(),Lx())}}]),e}(),DE=Ut((function e(t,n,r,i){Mt(this,e),this.Pt=t,this.removedTargetIds=n,this.key=r,this.bt=i})),LE=Ut((function e(t,n){Mt(this,e),this.targetId=t,this.Vt=n})),ME=Ut((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qb.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Mt(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),FE=function(){function e(){Mt(this,e),this.St=0,this.Dt=VE(),this.Ct=Qb.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}return Ut(e,[{key:"current",get:function(){return this.xt}},{key:"resumeToken",get:function(){return this.Ct}},{key:"kt",get:function(){return 0!==this.St}},{key:"Mt",get:function(){return this.Nt}},{key:"$t",value:function(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}},{key:"Ot",value:function(){var e=Lx(),t=Lx(),n=Lx();return this.Dt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:uw()}})),new OE(this.Ct,this.xt,e,t,n)}},{key:"Ft",value:function(){this.Nt=!1,this.Dt=VE()}},{key:"Bt",value:function(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}},{key:"Lt",value:function(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}},{key:"qt",value:function(){this.St+=1}},{key:"Ut",value:function(){this.St-=1}},{key:"Kt",value:function(){this.Nt=!0,this.xt=!0}}]),e}(),UE=function(){function e(t){Mt(this,e),this.Gt=t,this.Qt=new Map,this.jt=Ix(),this.zt=jE(),this.Wt=new Vb(xw)}return Ut(e,[{key:"Ht",value:function(e){var t,n=Qt(e.Pt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.bt&&e.bt.isFoundDocument()?this.Jt(r,e.bt):this.Yt(r,e.key,e.bt)}}catch(u){n.e(u)}finally{n.f()}var i,a=Qt(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Yt(o,e.key,e.bt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Xt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Zt(n);switch(e.state){case 0:t.te(n)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||t.removeTarget(n);break;case 3:t.te(n)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:t.te(n)&&(t.ee(n),r.$t(e.resumeToken));break;default:uw()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((function(e,r){n.te(r)&&t(r)}))}},{key:"ne",value:function(e){var t,n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){var a=i.target;if(nx(a))if(0===r){var o=new Rw(a.path);this.Yt(n,o,T_.newNoDocument(o,Tw.min()))}else sw(1===r);else{var u=this.ie(n);if(u!==r){var s=this.re(e,u);if(0!==s){this.ee(n);var c=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,c)}null===(t=EE.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,a,o,u,s,c={localCacheCount:t,existenceFilterCount:n.count},l=n.unchangedNames;return l&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==l?void 0:l.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(a=null===(i=null==l?void 0:l.bits)||void 0===i?void 0:i.bitmap)||void 0===a?void 0:a.length)&&void 0!==o?o:0,padding:null!==(s=null===(u=null==l?void 0:l.bits)||void 0===u?void 0:u.padding)&&void 0!==s?s:0}),c}(s,u,e.Vt))}}}}},{key:"re",value:function(e,t){var n=e.Vt,r=n.unchangedNames,i=n.count;if(!r||!r.bits)return 1;var a,o,u=r.bits,s=u.bitmap,c=void 0===s?"":s,l=u.padding,f=void 0===l?0:l,h=r.hashCount,d=void 0===h?0:h;try{a=Xb(c).toUint8Array()}catch(e){if(e instanceof Hb)return aw("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{o=new PE(a,f,d)}catch(e){return aw(e instanceof AE?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===o.It?1:i!==t-this.oe(e.targetId,o)?2:0}},{key:"oe",value:function(e,t){var n=this,r=this.Gt.getRemoteKeysForTarget(e),i=0;return r.forEach((function(r){var a=n.Gt.ue(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());t.vt(o)||(n.Yt(e,r,null),i++)})),i}},{key:"ce",value:function(e){var t=this,n=new Map;this.Qt.forEach((function(r,i){var a=t.se(i);if(a){if(r.current&&nx(a.target)){var o=new Rw(a.target.path);null!==t.jt.get(o)||t.ae(i,o)||t.Yt(i,o,T_.newNoDocument(o,e))}r.Mt&&(n.set(i,r.Ot()),r.Ft())}}));var r=Lx();this.zt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.se(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.jt.forEach((function(t,n){return n.setReadTime(e)}));var i=new RE(e,n,this.Wt,this.jt,r);return this.jt=Ix(),this.zt=jE(),this.Wt=new Vb(xw),i}},{key:"Jt",value:function(e,t){if(this.te(e)){var n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}}},{key:"Yt",value:function(e,t,n){if(this.te(e)){var r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Qt.delete(e)}},{key:"ie",value:function(e){var t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"qt",value:function(e){this.Zt(e).qt()}},{key:"Zt",value:function(e){var t=this.Qt.get(e);return t||(t=new FE,this.Qt.set(e,t)),t}},{key:"he",value:function(e){var t=this.zt.get(e);return t||(t=new zb(xw),this.zt=this.zt.insert(e,t)),t}},{key:"te",value:function(e){var t=null!==this.se(e);return t||rw("WatchChangeAggregator","Detected inactive target",e),t}},{key:"se",value:function(e){var t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}},{key:"ee",value:function(e){var t=this;this.Qt.set(e,new FE),this.Gt.getRemoteKeysForTarget(e).forEach((function(n){t.Yt(e,n,null)}))}},{key:"ae",value:function(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}]),e}();function jE(){return new Vb(Rw.comparator)}function VE(){return new Vb(Rw.comparator)}var BE={asc:"ASCENDING",desc:"DESCENDING"},qE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zE={and:"AND",or:"OR"},WE=Ut((function e(t,n){Mt(this,e),this.databaseId=t,this.useProto3Json=n}));function KE(e,t){return e.useProto3Json||ab(t)?t:{value:t}}function GE(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function HE(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function QE(e,t){return GE(e,t.toTimestamp())}function YE(e){return sw(!!e),Tw.fromTimestamp(function(e){var t=$b(e);return new Iw(t.seconds,t.nanos)}(e))}function $E(e,t){return function(e){return new Nw(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function JE(e){var t=Nw.fromString(e);return sw(wS(t)),t}function XE(e,t){return $E(e.databaseId,t.path)}function ZE(e,t){var n=JE(t);if(n.get(1)!==e.databaseId.projectId)throw new fw(lw.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new fw(lw.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Rw(rS(n))}function eS(e,t){return $E(e.databaseId,t)}function tS(e){var t=JE(e);return 4===t.length?Nw.emptyPath():rS(t)}function nS(e){return new Nw(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function rS(e){return sw(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function iS(e,t,n){return{name:XE(e,t),fields:n.value.mapValue.fields}}function aS(e,t,n){var r=ZE(e,t.name),i=YE(t.updateTime),a=t.createTime?YE(t.createTime):Tw.min(),o=new S_({mapValue:{fields:t.fields}}),u=T_.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function oS(e,t){return"found"in t?function(e,t){sw(!!t.found),t.found.name,t.found.updateTime;var n=ZE(e,t.found.name),r=YE(t.found.updateTime),i=t.found.createTime?YE(t.found.createTime):Tw.min(),a=new S_({mapValue:{fields:t.found.fields}});return T_.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){sw(!!t.missing),sw(!!t.readTime);var n=ZE(e,t.missing),r=YE(t.readTime);return T_.newNoDocument(n,r)}(e,t):uw()}function uS(e,t){var n;if(t instanceof cE)n={update:iS(e,t.key,t.value)};else if(t instanceof yE)n={delete:XE(e,t.key)};else if(t instanceof lE)n={update:iS(e,t.key,t.data),updateMask:kS(t.fieldMask)};else{if(!(t instanceof mE))return uw();n={verify:XE(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Kx)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Gx)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Qx)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof $x)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw uw()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:QE(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:uw()}(e,t.precondition)),n}function sS(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?tE.updateTime(YE(e.updateTime)):void 0!==e.exists?tE.exists(e.exists):tE.none()}(t.currentDocument):tE.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)sw("REQUEST_TIME"===t.setToServerValue),n=new Kx;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Gx(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Qx(i)}else"increment"in t?n=new $x(e,t.increment):uw();var a=Aw.fromServerFormat(t.fieldPath);return new Zx(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=ZE(e,t.update.name),a=new S_({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Gb(t.map((function(e){return Aw.fromServerFormat(e)})))}(t.updateMask);return new lE(i,a,o,n,r)}return new cE(i,a,n,r)}if(t.delete){var u=ZE(e,t.delete);return new yE(u,n)}if(t.verify){var s=ZE(e,t.verify);return new mE(s,n)}return uw()}function cS(e,t){return{documents:[eS(e,t.path)]}}function lS(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=eS(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=eS(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return gS(L_.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:yS(e.field),direction:dS(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=KE(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function fS(e){var t=tS(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){sw(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=hS(e);return t instanceof L_&&U_(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new A_(mS(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return ab(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new C_(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new C_(n,t)}(n.endAt)),ux(t,i,u,o,s,"F",c,l)}function hS(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=mS(e.unaryFilter.field);return D_.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=mS(e.unaryFilter.field);return D_.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=mS(e.unaryFilter.field);return D_.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=mS(e.unaryFilter.field);return D_.create(i,"!=",{nullValue:"NULL_VALUE"});default:return uw()}}(e):void 0!==e.fieldFilter?function(e){return D_.create(mS(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return uw()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return L_.create(e.compositeFilter.filters.map((function(e){return hS(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return uw()}}(e.compositeFilter.op))}(e):uw()}function dS(e){return BE[e]}function pS(e){return qE[e]}function vS(e){return zE[e]}function yS(e){return{fieldPath:e.canonicalString()}}function mS(e){return Aw.fromServerFormat(e.fieldPath)}function gS(e){return e instanceof D_?function(e){if("=="===e.op){if(m_(e.value))return{unaryFilter:{field:yS(e.field),op:"IS_NAN"}};if(y_(e.value))return{unaryFilter:{field:yS(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(m_(e.value))return{unaryFilter:{field:yS(e.field),op:"IS_NOT_NAN"}};if(y_(e.value))return{unaryFilter:{field:yS(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yS(e.field),op:pS(e.op),value:e.value}}}(e):e instanceof L_?function(e){var t=e.getFilters().map((function(e){return gS(e)}));return 1===t.length?t[0]:{compositeFilter:{op:vS(e.op),filters:t}}}(e):uw()}function kS(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function wS(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var bS=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Tw.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Tw.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Qb.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Mt(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=s}return Ut(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),_S=Ut((function e(t){Mt(this,e),this.fe=t}));function xS(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:ES(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:XE(e,t.key),fields:t.data.value.mapValue.fields,updateTime:GE(e,t.version.toTimestamp()),createTime:GE(e,t.createTime.toTimestamp())}}(e.fe,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:SS(t.version)};else{if(!t.isUnknownDocument())return uw();r.unknownDocument={path:n.path.toArray(),version:SS(t.version)}}return r}function ES(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function SS(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function IS(e){var t=new Iw(e.seconds,e.nanoseconds);return Tw.fromTimestamp(t)}function TS(e,t){for(var n=(t.baseMutations||[]).map((function(t){return sS(e.fe,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return sS(e.fe,t)})),u=Iw.fromMillis(t.localWriteTimeMs);return new gE(t.batchId,u,n,o)}function CS(e){var t,n,r=IS(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?IS(e.lastLimboFreeSnapshotVersion):Tw.min();return void 0!==e.query.documents?(sw(1===(n=e.query).documents.length),t=px(sx(tS(n.documents[0])))):t=function(e){return px(fS(e))}(e.query),new bS(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,r,i,Qb.fromBase64String(e.resumeToken))}function NS(e,t){var n,r=SS(t.snapshotVersion),i=SS(t.lastLimboFreeSnapshotVersion);n=nx(t.target)?cS(e.fe,t.target):lS(e.fe,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:ex(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function PS(e){var t=fS({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?yx(t,t.limit,"L"):t}function AS(e,t){return new wE(t.largestBatchId,sS(e.fe,t.overlayMutation))}function RS(e,t){var n=t.path.lastSegment();return[e,sb(t.path.popLast()),n]}function OS(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:SS(r.readTime),documentKey:sb(r.documentKey.path),largestBatchId:r.largestBatchId}}var DS=function(){function e(){Mt(this,e)}return Ut(e,[{key:"getBundleMetadata",value:function(e,t){return LS(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:IS(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return LS(e).put({bundleId:(n=t).id,createTime:SS(YE(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return MS(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:PS(t.bundledQuery),readTime:IS(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return MS(e).put(function(e){return{name:e.name,readTime:SS(YE(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function LS(e){return Mb(e,"bundles")}function MS(e){return Mb(e,"namedQueries")}var FS=function(){function e(t,n){Mt(this,e),this.serializer=t,this.userId=n}return Ut(e,[{key:"getOverlay",value:function(e,t){var n=this;return US(e).get(RS(this.userId,t)).next((function(e){return e?AS(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=Px();return Gw.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new wE(t,a);i.push(r.we(e,o))})),Gw.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(sb(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(US(e).J("collectionPathOverlayIndex",i))})),Gw.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Px(),a=sb(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return US(e).j("collectionPathOverlayIndex",o).next((function(e){var t,n=Qt(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=AS(r.serializer,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Px(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return US(e).X({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=AS(a.serializer,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"we",value:function(e,t){return US(e).put(function(e,t,n){var r=Ot(RS(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:uS(e.fe,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"de",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function US(e){return Mb(e,"documentOverlays")}var jS=function(){function e(){Mt(this,e)}return Ut(e,[{key:"_e",value:function(e,t){this.me(e,t),t.ge()}},{key:"me",value:function(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Jb(e.integerValue));else if("doubleValue"in e){var n=Jb(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),ob(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie("".concat(r.seconds||"")),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Xb(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ye(t,45),t.pe(i.latitude||0),t.pe(i.longitude||0)}else"mapValue"in e?w_(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):uw()}},{key:"Te",value:function(e,t){this.ye(t,25),this.be(e,t)}},{key:"be",value:function(e,t){t.Ie(e)}},{key:"Re",value:function(e,t){var n=e.fields||{};this.ye(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.Te(a,t),this.me(n[a],t)}}},{key:"Pe",value:function(e,t){var n=e.values||[];this.ye(t,50);var r,i=Qt(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.me(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ve",value:function(e,t){var n=this;this.ye(t,37),Rw.fromName(e).path.forEach((function(e){n.ye(t,60),n.be(e,t)}))}},{key:"ye",value:function(e,t){e.pe(t)}},{key:"Ee",value:function(e){e.pe(2)}}]),e}();function VS(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function BS(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=VS(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}jS.Ve=new jS;var qS=function(){function e(){Mt(this,e),this.buffer=new Uint8Array(1024),this.position=0}return Ut(e,[{key:"Se",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.De(n.value),n=t.next();this.Ce()}},{key:"xe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ne(n.value),n=t.next();this.ke()}},{key:"Me",value:function(e){var t,n=Qt(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.De(i);else if(i<2048)this.De(960|i>>>6),this.De(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.De(480|i>>>12),this.De(128|63&i>>>6),this.De(128|63&i);else{var a=r.codePointAt(0);this.De(240|a>>>18),this.De(128|63&a>>>12),this.De(128|63&a>>>6),this.De(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ce()}},{key:"$e",value:function(e){var t,n=Qt(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ne(i);else if(i<2048)this.Ne(960|i>>>6),this.Ne(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ne(480|i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i);else{var a=r.codePointAt(0);this.Ne(240|a>>>18),this.Ne(128|63&a>>>12),this.Ne(128|63&a>>>6),this.Ne(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ke()}},{key:"Oe",value:function(e){var t=this.Fe(e),n=BS(t);this.Be(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Le",value:function(e){var t=this.Fe(e),n=BS(t);this.Be(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"qe",value:function(){this.Ue(255),this.Ue(255)}},{key:"Ke",value:function(){this.Ge(255),this.Ge(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Qe",value:function(){return this.buffer.slice(0,this.position)}},{key:"Fe",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"De",value:function(e){var t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}},{key:"Ne",value:function(e){var t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}},{key:"Ce",value:function(){this.Ue(0),this.Ue(1)}},{key:"ke",value:function(){this.Ge(0),this.Ge(1)}},{key:"Ue",value:function(e){this.Be(1),this.buffer[this.position++]=e}},{key:"Ge",value:function(e){this.Be(1),this.buffer[this.position++]=~e}},{key:"Be",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),zS=function(){function e(t){Mt(this,e),this.je=t}return Ut(e,[{key:"Ae",value:function(e){this.je.Se(e)}},{key:"Ie",value:function(e){this.je.Me(e)}},{key:"pe",value:function(e){this.je.Oe(e)}},{key:"ge",value:function(){this.je.qe()}}]),e}(),WS=function(){function e(t){Mt(this,e),this.je=t}return Ut(e,[{key:"Ae",value:function(e){this.je.xe(e)}},{key:"Ie",value:function(e){this.je.$e(e)}},{key:"pe",value:function(e){this.je.Le(e)}},{key:"ge",value:function(){this.je.Ke()}}]),e}(),KS=function(){function e(){Mt(this,e),this.je=new qS,this.ze=new zS(this.je),this.We=new WS(this.je)}return Ut(e,[{key:"seed",value:function(e){this.je.seed(e)}},{key:"He",value:function(e){return 0===e?this.ze:this.We}},{key:"Qe",value:function(){return this.je.Qe()}},{key:"reset",value:function(){this.je.reset()}}]),e}(),GS=function(){function e(t,n,r,i){Mt(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return Ut(e,[{key:"Je",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function HS(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=QS(e.arrayValue,t.arrayValue))?n:0!==(n=QS(e.directionalValue,t.directionalValue))?n:Rw.comparator(e.documentKey,t.documentKey)}function QS(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var YS=function(){function e(t){Mt(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ye=t.orderBy,this.Xe=[];var n,r=Qt(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Ze=i:this.Xe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return Ut(e,[{key:"tn",value:function(e){sw(e.collectionGroup===this.collectionId);var t=Dw(e);if(void 0!==t&&!this.en(t))return!1;for(var n=Lw(e),r=new Set,i=0,a=0;i<n.length&&this.en(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(void 0!==this.Ze){if(!r.has(this.Ze.field.canonicalString())){var o=n[i];if(!this.nn(this.Ze,o)||!this.sn(this.Ye[a++],o))return!1}++i}for(;i<n.length;++i){var u=n[i];if(a>=this.Ye.length||!this.sn(this.Ye[a++],u))return!1}return!0}},{key:"en",value:function(e){var t,n=Qt(this.Xe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.nn(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"nn",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"sn",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function $S(e){var t,n;if(sw(e instanceof D_||e instanceof L_),e instanceof D_){if(e instanceof Y_){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return D_.create(e.field,"==",t)})))||[];return L_.create(r,"or")}return e}var i=e.filters.map((function(e){return $S(e)}));return L_.create(i,e.op)}function JS(e){if(0===e.getFilters().length)return[];var t=tI($S(e));return sw(eI(t)),XS(t)||ZS(t)?[t]:t.getFilters()}function XS(e){return e instanceof D_}function ZS(e){return e instanceof L_&&U_(e)}function eI(e){return XS(e)||ZS(e)||function(e){if(e instanceof L_&&F_(e)){var t,n=Qt(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!XS(r)&&!ZS(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function tI(e){if(sw(e instanceof D_||e instanceof L_),e instanceof D_)return e;if(1===e.filters.length)return tI(e.filters[0]);var t=e.filters.map((function(e){return tI(e)})),n=L_.create(t,e.op);return eI(n=iI(n))?n:(sw(n instanceof L_),sw(M_(n)),sw(n.filters.length>1),n.filters.reduce((function(e,t){return nI(e,t)})))}function nI(e,t){var n;return sw(e instanceof D_||e instanceof L_),sw(t instanceof D_||t instanceof L_),n=e instanceof D_?t instanceof D_?function(e,t){return L_.create([e,t],"and")}(e,t):rI(e,t):t instanceof D_?rI(t,e):function(e,t){if(sw(e.filters.length>0&&t.filters.length>0),M_(e)&&M_(t))return q_(e,t.getFilters());var n=F_(e)?e:t,r=F_(e)?t:e,i=n.filters.map((function(e){return nI(e,r)}));return L_.create(i,"or")}(e,t),iI(n)}function rI(e,t){if(M_(t))return q_(t,e.getFilters());var n=t.filters.map((function(t){return nI(e,t)}));return L_.create(n,"or")}function iI(e){if(sw(e instanceof D_||e instanceof L_),e instanceof D_)return e;var t=e.getFilters();if(1===t.length)return iI(t[0]);if(j_(e))return e;var n=t.map((function(e){return iI(e)})),r=[];return n.forEach((function(t){t instanceof D_?r.push(t):t instanceof L_&&(t.op===e.op?r.push.apply(r,Lt(t.filters)):r.push(t))})),1===r.length?r[0]:L_.create(r,e.op)}var aI=function(){function e(){Mt(this,e),this.rn=new oI}return Ut(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.rn.add(t),Gw.resolve()}},{key:"getCollectionParents",value:function(e,t){return Gw.resolve(this.rn.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Gw.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Gw.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Gw.resolve(null)}},{key:"getIndexType",value:function(e,t){return Gw.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Gw.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Gw.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Gw.resolve(Vw.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Gw.resolve(Vw.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Gw.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Gw.resolve()}}]),e}(),oI=function(){function e(){Mt(this,e),this.index={}}return Ut(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new zb(Nw.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new zb(Nw.comparator)).toArray()}}]),e}(),uI=new Uint8Array(0),sI=function(){function e(t,n){Mt(this,e),this.user=t,this.databaseId=n,this.on=new oI,this.un=new Ex((function(e){return ex(e)}),(function(e,t){return tx(e,t)})),this.uid=t.uid||""}return Ut(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.on.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.on.add(t)}));var a={collectionId:r,parent:sb(i)};return cI(e).put(a)}return Gw.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Sw(t),""],!1,!0);return cI(e).j(r).next((function(e){var r,i=Qt(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(fb(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=fI(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=hI(e);return a.next((function(e){o.put(OS(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=fI(e),r=hI(e),i=lI(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=lI(e),i=!0,a=new Map;return Gw.forEach(this.cn(t),(function(t){return n.an(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Lx(),o=[];return Gw.forEach(a,(function(i,a){var u;rw("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(ex(t)));var s=function(e,t){var n=Dw(t);if(void 0===n)return null;var r,i=Qt(rx(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=Qt(Lw(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=Qt(rx(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=Qt(Lw(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?ix(e,o.fieldPath,e.startAt):ax(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new C_(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=Qt(Lw(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?ax(e,o.fieldPath,e.endAt):ix(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new C_(r,i)}(a,i),h=n.hn(i,a,l),d=n.hn(i,a,f),p=n.ln(i,a,c),v=n.fn(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return Gw.forEach(v,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=Rw.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Gw.resolve(null)}))}},{key:"cn",value:function(e){var t=this.un.get(e);return t||(t=0===e.filters.length?[e]:JS(L_.create(e.filters,"and")).map((function(t){return Z_(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.un.set(e,t),t)}},{key:"fn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(){var s=t?u.dn(t[h/c]):uI,f=u.wn(e,s,n[h%c],r),d=u._n(e,s,i[h%c],a),p=o.map((function(t){return u.wn(e,s,t,!0)}));l.push.apply(l,Lt(u.createRange(f,d,p)))},h=0;h<s;++h)f();return l}},{key:"wn",value:function(e,t,n,r){var i=new GS(e,Rw.empty(),t,n);return r?i:i.Je()}},{key:"_n",value:function(e,t,n,r){var i=new GS(e,Rw.empty(),t,n);return r?i.Je():i}},{key:"an",value:function(e,t){var n=new YS(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=Qt(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.tn(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.cn(t);return Gw.forEach(i,(function(t){return n.an(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new zb(Aw.comparator),r=!1,i=Qt(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=Qt(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=Qt(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"mn",value:function(e,t){var n,r=new KS,i=Qt(Lw(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.He(a.kind);jS.Ve._e(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Qe()}},{key:"dn",value:function(e){var t=new KS;return jS.Ve._e(e,t.He(0)),t.Qe()}},{key:"gn",value:function(e,t){var n=new KS;return jS.Ve._e(d_(this.databaseId,t),n.He(function(e){var t=Lw(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Qe()}},{key:"ln",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new KS);var i,a=0,o=Qt(Lw(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=Qt(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.yn(t,s.fieldPath)&&v_(c))r=this.pn(r,s,c);else{var h=f.He(s.kind);jS.Ve._e(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.In(r)}},{key:"hn",value:function(e,t,n){return this.ln(e,t,n.position)}},{key:"In",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Qe();return t}},{key:"pn",value:function(e,t,n){var r,i=Lt(e),a=[],o=Qt(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=Qt(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new KS;f.seed(l.Qe()),jS.Ve._e(s,f.He(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"yn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof D_&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=fI(e),i=hI(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next((function(e){var t=[];return Gw.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Fw(t.sequenceNumber,new Vw(IS(t.readTime),new Rw(fb(t.documentKey)),t.largestBatchId)):Fw.empty(),r=e.fields.map((function(e){var t=Ot(e,2),n=t[0],r=t[1];return new Mw(Aw.fromServerFormat(n),r)}));return new Ow(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:xw(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=fI(e),a=hI(e);return this.Tn(e).next((function(e){return i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Gw.forEach(t,(function(t){return a.put(OS(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Gw.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Gw.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Gw.forEach(a,(function(r){return n.En(e,t,r).next((function(t){var a=n.An(i,r);return t.isEqual(a)?Gw.resolve():n.vn(e,i,r,t,a)}))}))}))}))}},{key:"Rn",value:function(e,t,n,r){return lI(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"Pn",value:function(e,t,n,r){return lI(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(n,t.key),t.key.path.toArray()])}},{key:"En",value:function(e,t,n){var r=lI(e),i=new zb(HS);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.gn(n,t)])},(function(e,r){i=i.add(new GS(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"An",value:function(e,t){var n=new zb(HS),r=this.mn(t,e);if(null==r)return n;var i=Dw(t);if(null!=i){var a=e.data.field(i.fieldPath);if(v_(a)){var o,u=Qt(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new GS(t.indexId,e.key,this.dn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new GS(t.indexId,e.key,uI,r));return n}},{key:"vn",value:function(e,t,n,r,i){var a=this;rw("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Kb(a),s=Kb(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Kb(o)):l?(i(u),u=Kb(a)):(u=Kb(a),s=Kb(o))}}(r,i,HS,(function(r){o.push(a.Rn(e,t,n,r))}),(function(r){o.push(a.Pn(e,t,n,r))})),Gw.waitFor(o)}},{key:"Tn",value:function(e){var t=1;return hI(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return HS(e,t)})).filter((function(e,t,n){return!t||0!==HS(e,n[t-1])}));var r=[];r.push(e);var i,a=Qt(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=HS(o,e),s=HS(o,t);if(0===u)r[0]=e.Je();else if(u>0&&s<0)r.push(o),r.push(o.Je());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.bn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,uI,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,uI,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"bn",value:function(e,t){return HS(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(dI)}},{key:"getMinOffset",value:function(e,t){var n=this;return Gw.mapArray(this.cn(t),(function(t){return n.an(e,t).next((function(e){return e||uw()}))})).next(dI)}}]),e}();function cI(e){return Mb(e,"collectionParents")}function lI(e){return Mb(e,"indexEntries")}function fI(e){return Mb(e,"indexConfiguration")}function hI(e){return Mb(e,"indexState")}function dI(e){sw(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;Bw(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Vw(t.readTime,t.documentKey,n)}var pI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},vI=function(){function e(t,n,r){Mt(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return Ut(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function yI(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.X({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){sw(1===u)})));var c,l=[],f=Qt(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=pb(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Gw.waitFor(a).next((function(){return l}))}function mI(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw uw();t=e.noDocument}return JSON.stringify(t).length}vI.DEFAULT_COLLECTION_PERCENTILE=10,vI.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vI.DEFAULT=new vI(41943040,vI.DEFAULT_COLLECTION_PERCENTILE,vI.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vI.DISABLED=new vI(-1,0,0);var gI=function(){function e(t,n,r,i){Mt(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}return Ut(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return wI(e).X({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=bI(e),o=wI(e);return o.add({}).next((function(u){sw("number"==typeof u);var s,c=new gE(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return uS(e.fe,t)})),i=n.mutations.map((function(t){return uS(e.fe,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),f=[],h=new zb((function(e,t){return xw(e.canonicalString(),t.canonicalString())})),d=Qt(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=pb(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,vb))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Vn[u]=c.keys()})),Gw.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return wI(e).get(t).next((function(e){return e?(sw(e.userId===n.userId),TS(n.serializer,e)):null}))}},{key:"Sn",value:function(e,t){var n=this;return this.Vn[t]?Gw.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Vn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return wI(e).X({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(sw(t.batchId>=r),a=TS(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return wI(e).X({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return wI(e).j("userMutationsIndex",n).next((function(e){return e.map((function(e){return TS(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=db(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return bI(e).X({range:i},(function(r,i,o){var u=Ot(r,3),s=u[0],c=u[1],l=u[2],f=fb(c);if(s===n.userId&&t.path.isEqual(f))return wI(e).get(l).next((function(e){if(!e)throw uw();sw(e.userId===n.userId),a.push(TS(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new zb(xw),i=[];return t.forEach((function(t){var a=db(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=bI(e).X({range:o},(function(e,i,a){var o=Ot(e,3),u=o[0],s=o[1],c=o[2],l=fb(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),Gw.waitFor(i).next((function(){return n.Dn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=db(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new zb(xw);return bI(e).X({range:o},(function(e,t,a){var o=Ot(e,3),s=o[0],c=o[1],l=o[2],f=fb(c);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.Dn(e,u)}))}},{key:"Dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(wI(e).get(t).next((function(e){if(null===e)throw uw();sw(e.userId===n.userId),r.push(TS(n.serializer,e))})))})),Gw.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return yI(e.ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Cn(t.batchId)})),Gw.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Cn",value:function(e){delete this.Vn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Gw.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return bI(e).X({range:r},(function(e,n,r){if(e[0]===t.userId){var a=fb(e[1]);i.push(a)}else r.done()})).next((function(){sw(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return kI(e,this.userId,t)}},{key:"xn",value:function(e){var t=this;return _I(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"de",value:function(t,n,r,i){return sw(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function kI(e,t,n){var r=db(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return bI(e).X({range:a,Y:!0},(function(e,n,r){var a=Ot(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function wI(e){return Mb(e,"mutations")}function bI(e){return Mb(e,"documentMutations")}function _I(e){return Mb(e,"mutationQueues")}var xI=function(){function e(t){Mt(this,e),this.Nn=t}return Ut(e,[{key:"next",value:function(){return this.Nn+=2,this.Nn}}],[{key:"kn",value:function(){return new e(0)}},{key:"Mn",value:function(){return new e(-1)}}]),e}(),EI=function(){function e(t,n){Mt(this,e),this.referenceDelegate=t,this.serializer=n}return Ut(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.$n(e).next((function(n){var r=new xI(n.highestTargetId);return n.highestTargetId=r.next(),t.On(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.$n(e).next((function(e){return Tw.fromTimestamp(new Iw(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.$n(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.$n(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.On(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Fn(e,t).next((function(){return n.$n(e).next((function(r){return r.targetCount+=1,n.Bn(t,r),n.On(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Fn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return SI(e).delete(t.targetId)})).next((function(){return n.$n(e)})).next((function(t){return sw(t.targetCount>0),t.targetCount-=1,n.On(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return SI(e).X((function(o,u){var s=CS(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Gw.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return SI(e).X((function(e,n){var r=CS(n);t(r)}))}},{key:"$n",value:function(e){return II(e).get("targetGlobalKey").next((function(e){return sw(null!==e),e}))}},{key:"On",value:function(e,t){return II(e).put("targetGlobalKey",t)}},{key:"Fn",value:function(e,t){return SI(e).put(NS(this.serializer,t))}},{key:"Bn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.$n(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=ex(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return SI(e).X({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=CS(n);tx(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=TI(e);return t.forEach((function(t){var o=sb(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Gw.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=TI(e);return Gw.forEach(t,(function(t){var a=sb(t.path);return Gw.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=TI(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=TI(e),i=Lx();return r.X({range:n,Y:!0},(function(e,t,n){var r=fb(e[1]),a=new Rw(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=sb(t.path),r=IDBKeyRange.bound([n],[Sw(n)],!1,!0),i=0;return TI(e).X({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=Ot(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"le",value:function(e,t){return SI(e).get(t).next((function(e){return e?CS(e):null}))}}]),e}();function SI(e){return Mb(e,"targets")}function II(e){return Mb(e,"targetGlobal")}function TI(e){return Mb(e,"targetDocuments")}function CI(e,t){var n=Ot(e,2),r=n[0],i=n[1],a=Ot(t,2),o=a[0],u=a[1],s=xw(r,o);return 0===s?xw(i,u):s}var NI=function(){function e(t){Mt(this,e),this.Ln=t,this.buffer=new zb(CI),this.qn=0}return Ut(e,[{key:"Un",value:function(){return++this.qn}},{key:"Kn",value:function(e){var t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();CI(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),PI=function(){function e(t,n,r){Mt(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Gn=null}return Ut(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}},{key:"stop",value:function(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}},{key:"started",get:function(){return null!==this.Gn}},{key:"Qn",value:function(e){var t=this;rw("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Gn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Jw(e.t0)){e.next=12;break}rw("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Ww(e.t0);case 14:return e.next=16,t.Qn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),AI=function(){function e(t,n){Mt(this,e),this.jn=t,this.params=n}return Ut(e,[{key:"calculateTargetCount",value:function(e,t){return this.jn.zn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Gw.resolve(ib.ct);var r=new NI(t);return this.jn.forEachTarget(e,(function(e){return r.Kn(e.sequenceNumber)})).next((function(){return n.jn.Wn(e,(function(e){return r.Kn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.jn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.jn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(rw("LruGarbageCollector","Garbage collection skipped; disabled"),Gw.resolve(pI)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(rw("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),pI):n.Hn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.jn.getCacheSize(e)}},{key:"Hn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(rw("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),nw()<=Oo.DEBUG&&rw("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Gw.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}();function RI(e,t){return new AI(e,t)}var OI=function(){function e(t,n){Mt(this,e),this.db=t,this.garbageCollector=RI(this,n)}return Ut(e,[{key:"zn",value:function(e){var t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Jn",value:function(e){var t=0;return this.Wn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Wn",value:function(e,t){return this.Yn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return DI(e,n)}},{key:"removeReference",value:function(e,t,n){return DI(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return DI(e,t)}},{key:"Xn",value:function(e,t){return function(e,t){var n=!1;return _I(e).Z((function(r){return kI(e,r,t).next((function(e){return e&&(n=!0),Gw.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Yn(e,(function(o,u){if(u<=t){var s=n.Xn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Tw.min()),TI(e).delete([0,sb(o.path)])}))}));i.push(s)}})).next((function(){return Gw.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return DI(e,t)}},{key:"Yn",value:function(e,t){var n,r=TI(e),i=ib.ct;return r.X({index:"documentTargetsIndex"},(function(e,r){var a=Ot(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==ib.ct&&t(new Rw(fb(n)),i),i=s,n=u):i=ib.ct})).next((function(){i!==ib.ct&&t(new Rw(fb(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function DI(e,t){return TI(e).put(function(e,t){return{targetId:0,path:sb(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var LI=function(){function e(){Mt(this,e),this.changes=new Ex((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return Ut(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,T_.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Gw.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),MI=function(){function e(t){Mt(this,e),this.serializer=t}return Ut(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return VI(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return VI(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],ES(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Zn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=T_.newInvalidDocument(t);return VI(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(BI(t))},(function(e,i){r=n.ts(t,i)})).next((function(){return r}))}},{key:"es",value:function(e,t){var n=this,r={size:0,document:T_.newInvalidDocument(t)};return VI(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(BI(t))},(function(e,i){r={document:n.ts(t,i),size:mI(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Ix();return this.ns(e,t,(function(e,t){var i=n.ts(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"ss",value:function(e,t){var n=this,r=Ix(),i=new Vb(Rw.comparator);return this.ns(e,t,(function(e,t){var a=n.ts(e,t);r=r.insert(e,a),i=i.insert(e,mI(t))})).next((function(){return{documents:r,rs:i}}))}},{key:"ns",value:function(e,t,n){if(t.isEmpty())return Gw.resolve();var r=new zb(zI);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(BI(r.first()),BI(r.last())),a=r.getIterator(),o=a.getNext();return VI(e).X({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Rw.fromSegments([].concat(Lt(t.prefixPath),[t.collectionGroup,t.documentId]));o&&zI(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.G(BI(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),ES(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return VI(e).j(IDBKeyRange.bound(o,u,!0)).next((function(e){var n,a=Ix(),o=Qt(e);try{for(o.s();!(n=o.n()).done;){var u=n.value,s=i.ts(Rw.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s.isFoundDocument()&&(wx(t,s)||r.has(s.key))&&(a=a.insert(s.key,s))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Ix(),o=qI(t,n),u=qI(t,Vw.max());return VI(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.ts(Rw.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new UI(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return jI(e).get("remoteDocumentGlobalKey").next((function(e){return sw(!!e),e}))}},{key:"Zn",value:function(e,t){return jI(e).put("remoteDocumentGlobalKey",t)}},{key:"ts",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=aS(e.fe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Rw.fromSegments(t.noDocument.path),i=IS(t.noDocument.readTime);n=T_.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return uw();var a=Rw.fromSegments(t.unknownDocument.path),o=IS(t.unknownDocument.version);n=T_.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Iw(e[0],e[1]);return Tw.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(Tw.min()))return n}return T_.newInvalidDocument(e)}}]),e}();function FI(e){return new MI(e)}var UI=function(e){Vt(n,e);var t=Wt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this)).os=e,i.trackRemovals=r,i.us=new Ex((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return Ut(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new zb((function(e,t){return xw(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.us.get(a);if(n.push(t.os.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=xS(t.os.serializer,o);i=i.add(a.path.popLast());var c=mI(s);r+=c-u.size,n.push(t.os.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=xS(t.os.serializer,o.convertToNoDocument(Tw.min()));n.push(t.os.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.os.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.os.updateMetadata(e,r)),Gw.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.os.es(e,t).next((function(e){return n.us.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.os.ss(e,t).next((function(e){var t=e.documents;return e.rs.forEach((function(e,r){n.us.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(LI);function jI(e){return Mb(e,"remoteDocumentGlobal")}function VI(e){return Mb(e,"remoteDocumentsV14")}function BI(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function qI(e,t){var n=t.documentKey.path.toArray();return[e,ES(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function zI(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=xw(n[a],r[a]))return i;return(i=xw(n.length,r.length))||((i=xw(n[n.length-2],r[r.length-2]))||xw(n[n.length-1],r[r.length-1]))}var WI=Ut((function e(t,n){Mt(this,e),this.overlayedDocument=t,this.mutatedFields=n})),KI=function(){function e(t,n,r,i){Mt(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return Ut(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&oE(r.mutation,e,Gb.empty(),Iw.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Lx()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Lx(),i=Px();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Cx();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Px();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Lx())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Ix(),a=Rx(),o=Rx();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof lE)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),oE(o.mutation,t,o.mutation.getFieldMask(),Iw.now())):a.set(t.key,Gb.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new WI(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Rx(),i=new Vb((function(e,t){return e-t})),a=Lx();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=Qt(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Gb.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||Lx()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=Ax();c.forEach((function(e){if(!a.has(e)){var n=iE(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Gw.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Rw.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):hx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Gw.resolve(Px()),u=-1,s=a;return o.next((function(t){return Gw.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Gw.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,Lx())})).next((function(e){return{batchId:u,changes:Nx(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Rw(t)).next((function(e){var t=Cx();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Cx();return this.indexManager.getCollectionParents(e,i).next((function(o){return Gw.forEach(o,(function(o){var u=function(e,t){return new ox(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,T_.newInvalidDocument(r)))}));var n=Cx();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&oE(a.mutation,i,Gb.empty(),Iw.now()),wx(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),GI=function(){function e(t){Mt(this,e),this.serializer=t,this.cs=new Map,this.hs=new Map}return Ut(e,[{key:"getBundleMetadata",value:function(e,t){return Gw.resolve(this.cs.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:YE(n.createTime)}),Gw.resolve()}},{key:"getNamedQuery",value:function(e,t){return Gw.resolve(this.hs.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:PS(e.bundledQuery),readTime:YE(e.readTime)}}(t)),Gw.resolve()}}]),e}(),HI=function(){function e(){Mt(this,e),this.overlays=new Vb(Rw.comparator),this.ls=new Map}return Ut(e,[{key:"getOverlay",value:function(e,t){return Gw.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Px();return Gw.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.we(e,t,i)})),Gw.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.ls.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ls.delete(n)),Gw.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Px(),i=t.length+1,a=new Rw(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Gw.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Vb((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=Px(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=Px(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Gw.resolve(s)}},{key:"we",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new wE(t,n));var a=this.ls.get(t);void 0===a&&(a=Lx(),this.ls.set(t,a)),this.ls.set(t,a.add(n.key))}}]),e}(),QI=function(){function e(){Mt(this,e),this.fs=new zb(YI.ds),this.ws=new zb(YI._s)}return Ut(e,[{key:"isEmpty",value:function(){return this.fs.isEmpty()}},{key:"addReference",value:function(e,t){var n=new YI(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}},{key:"gs",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.ys(new YI(e,t))}},{key:"ps",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Is",value:function(e){var t=this,n=new Rw(new Nw([])),r=new YI(n,e),i=new YI(n,e+1),a=[];return this.ws.forEachInRange([r,i],(function(e){t.ys(e),a.push(e.key)})),a}},{key:"Ts",value:function(){var e=this;this.fs.forEach((function(t){return e.ys(t)}))}},{key:"ys",value:function(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}},{key:"Es",value:function(e){var t=new Rw(new Nw([])),n=new YI(t,e),r=new YI(t,e+1),i=Lx();return this.ws.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new YI(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),YI=function(){function e(t,n){Mt(this,e),this.key=t,this.As=n}return Ut(e,null,[{key:"ds",value:function(e,t){return Rw.comparator(e.key,t.key)||xw(e.As,t.As)}},{key:"_s",value:function(e,t){return xw(e.As,t.As)||Rw.comparator(e.key,t.key)}}]),e}(),$I=function(){function e(t,n){Mt(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new zb(YI.ds)}return Ut(e,[{key:"checkEmpty",value:function(e){return Gw.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new gE(i,t,n,r);this.mutationQueue.push(a);var o,u=Qt(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Rs=this.Rs.add(new YI(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Gw.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Gw.resolve(this.Ps(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.bs(n),i=r<0?0:r;return Gw.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Gw.resolve(0===this.mutationQueue.length?-1:this.vs-1)}},{key:"getAllMutationBatches",value:function(e){return Gw.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new YI(t,0),i=new YI(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],(function(e){var t=n.Ps(e.As);a.push(t)})),Gw.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new zb(xw);return t.forEach((function(e){var t=new YI(e,0),i=new YI(e,Number.POSITIVE_INFINITY);n.Rs.forEachInRange([t,i],(function(e){r=r.add(e.As)}))})),Gw.resolve(this.Vs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Rw.isDocumentKey(i)||(i=i.child(""));var a=new YI(new Rw(i),0),o=new zb(xw);return this.Rs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.As)),!0)}),a),Gw.resolve(this.Vs(o))}},{key:"Vs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Ps(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;sw(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();var r=this.Rs;return Gw.forEach(t.mutations,(function(i){var a=new YI(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Rs=r}))}},{key:"Cn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new YI(t,0),r=this.Rs.firstAfterOrEqual(n);return Gw.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Gw.resolve()}},{key:"Ss",value:function(e,t){return this.bs(e)}},{key:"bs",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"Ps",value:function(e){var t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),JI=function(){function e(t){Mt(this,e),this.Ds=t,this.docs=new Vb(Rw.comparator),this.size=0}return Ut(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Gw.resolve(n?n.document.mutableCopy():T_.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Ix();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():T_.newInvalidDocument(e))})),Gw.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=Ix(),a=t.path,o=new Rw(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Bw(jw(l),n)<=0||(r.has(l.key)||wx(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return Gw.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){uw()}},{key:"Cs",value:function(e,t){return Gw.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new XI(this)}},{key:"getSize",value:function(e){return Gw.resolve(this.size)}}]),e}(),XI=function(e){Vt(n,e);var t=Wt(n);function n(e){var r;return Mt(this,n),(r=t.call(this)).os=e,r}return Ut(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.os.addEntry(e,i)):t.os.removeEntry(r)})),Gw.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.os.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.os.getEntries(e,t)}}]),n}(LI),ZI=function(){function e(t){Mt(this,e),this.persistence=t,this.xs=new Ex((function(e){return ex(e)}),tx),this.lastRemoteSnapshotVersion=Tw.min(),this.highestTargetId=0,this.Ns=0,this.ks=new QI,this.targetCount=0,this.Ms=xI.kn()}return Ut(e,[{key:"forEachTarget",value:function(e,t){return this.xs.forEach((function(e,n){return t(n)})),Gw.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Gw.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Gw.resolve(this.Ns)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ms.next(),Gw.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),Gw.resolve()}},{key:"Fn",value:function(e){this.xs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ms=new xI(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Fn(t),this.targetCount+=1,Gw.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Fn(t),Gw.resolve()}},{key:"removeTargetData",value:function(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,Gw.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.xs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.xs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Gw.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Gw.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.xs.get(t)||null;return Gw.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.ks.gs(t,n),Gw.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.ks.ps(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Gw.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.ks.Is(t),Gw.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.ks.Es(t);return Gw.resolve(n)}},{key:"containsKey",value:function(e,t){return Gw.resolve(this.ks.containsKey(t))}}]),e}(),eT=function(){function e(t,n){var r=this;Mt(this,e),this.$s={},this.overlays={},this.Os=new ib(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=t(this),this.Bs=new ZI(this),this.indexManager=new aI,this.remoteDocumentCache=new JI((function(e){return r.referenceDelegate.Ls(e)})),this.serializer=new _S(n),this.qs=new GI(this.serializer)}return Ut(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Fs=!1,Promise.resolve()}},{key:"started",get:function(){return this.Fs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new HI,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.$s[e.toKey()];return n||(n=new $I(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Bs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.qs}},{key:"runTransaction",value:function(e,t,n){var r=this;rw("MemoryPersistence","Starting transaction:",e);var i=new tT(this.Os.next());return this.referenceDelegate.Us(),n(i).next((function(e){return r.referenceDelegate.Ks(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Gs",value:function(e,t){return Gw.or(Object.values(this.$s).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),tT=function(e){Vt(n,e);var t=Wt(n);function n(e){var r;return Mt(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return Ut(n)}(zw),nT=function(){function e(t){Mt(this,e),this.persistence=t,this.Qs=new QI,this.js=null}return Ut(e,[{key:"Ws",get:function(){if(this.js)return this.js;throw uw()}},{key:"addReference",value:function(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),Gw.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),Gw.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ws.add(t.toString()),Gw.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Qs.Is(t.targetId).forEach((function(e){return n.Ws.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ws.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Us",value:function(){this.js=new Set}},{key:"Ks",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Gw.forEach(this.Ws,(function(r){var i=Rw.fromPath(r);return t.Hs(e,i).next((function(e){e||n.removeEntry(i,Tw.min())}))})).next((function(){return t.js=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hs(e,t).next((function(e){e?n.Ws.delete(t.toString()):n.Ws.add(t.toString())}))}},{key:"Ls",value:function(e){return 0}},{key:"Hs",value:function(e,t){var n=this;return Gw.or([function(){return Gw.resolve(n.Qs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Gs(e,t)}])}}],[{key:"zs",value:function(t){return new e(t)}}]),e}(),rT=function(){function e(t){Mt(this,e),this.serializer=t}return Ut(e,[{key:"O",value:function(e,t,n,r){var i=this,a=new Hw("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hb,{unique:!0}),e.createObjectStore("documentMutations")}(e),iT(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Gw.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),iT(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Tw.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").j().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hb,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Gw.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Ys(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Xs(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Zs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.ti(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.ei(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Tb});t.createIndex("collectionPathOverlayIndex",Cb,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Nb,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:yb});t.createIndex("documentKeyIndex",mb),t.createIndex("collectionGroupIndex",gb)}(e)})).next((function(){return i.ni(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.si(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:xb}).createIndex("sequenceNumberIndex",Eb,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Sb}).createIndex("documentKeyIndex",Ib,{unique:!1})}(e)}))),o}},{key:"Xs",value:function(e){var t=0;return e.store("remoteDocuments").X((function(e,n){t+=mI(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Ys",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.j().next((function(n){return Gw.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",i).next((function(r){return Gw.forEach(r,(function(r){sw(r.userId===n.userId);var i=TS(t.serializer,r);return yI(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Zs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.X((function(n,i){var a=new Nw(n),o=function(e){return[0,sb(e)]}(a);r.push(t.get(o).next((function(n){return n?Gw.resolve():function(n){return t.put({targetId:0,path:sb(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Gw.waitFor(r)}))}))}},{key:"ti",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:_b});var n=t.store("collectionParents"),r=new oI,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:sb(i)})}};return t.store("remoteDocuments").X({Y:!0},(function(e,t){var n=new Nw(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").X({Y:!0},(function(e,t){var n=Ot(e,3),r=(n[0],n[1]),a=(n[2],fb(r));return i(a.popLast())}))}))}},{key:"ei",value:function(e){var t=this,n=e.store("targets");return n.X((function(e,r){var i=CS(r),a=NS(t.serializer,i);return n.put(a)}))}},{key:"ni",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.X((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Rw(Nw.fromString(i.document.name).popFirst(5)):i.noDocument?Rw.fromSegments(i.noDocument.path):i.unknownDocument?Rw.fromSegments(i.unknownDocument.path):uw()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return Gw.waitFor(r)}))}},{key:"si",value:function(e,t){var n=this,r=t.store("mutations"),i=FI(this.serializer),a=new eT(nT.zs,this.serializer.fe);return r.j().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Lx();TS(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Gw.forEach(r,(function(e,r){var o=new Zk(r),u=FS.de(n.serializer,o),s=a.getIndexManager(o),c=gI.de(o,n.serializer,s,a.referenceDelegate);return new KI(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new Lb(t,ib.ct),e).next()}))}))}}]),e}();function iT(e){e.createObjectStore("targetDocuments",{keyPath:wb}).createIndex("documentTargetsIndex",bb,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",kb,{unique:!0}),e.createObjectStore("targetGlobal")}var aT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",oT=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(Mt(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.ii=a,this.window=o,this.document=u,this.ri=c,this.oi=l,this.ui=f,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=function(e){return Promise.resolve()},!e.D())throw new fw(lw.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new OI(this,i),this.di=n+"main",this.serializer=new _S(s),this.wi=new Qw(this.di,this.ui,new rT(this.serializer)),this.Bs=new EI(this.referenceDelegate,this.serializer),this.remoteDocumentCache=FI(this.serializer),this.qs=new DS,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===l&&iw("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return Ut(e,[{key:"start",value:function(){var e=this;return this.mi().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new fw(lw.FAILED_PRECONDITION,aT);return e.gi(),e.yi(),e.pi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Bs.getHighestSequenceNumber(t)}))})).then((function(t){e.Os=new ib(t,e.ri)})).then((function(){e.Fs=!0})).catch((function(t){return e.wi&&e.wi.close(),Promise.reject(t)}))}},{key:"Ii",value:function(e){var t=this;return this.fi=function(){var n=fr(cr().mark((function n(r){return cr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.wi.B(function(){var t=fr(cr().mark((function t(n){return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget(fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.mi();case 4:case"end":return e.stop()}}),e)})))))}},{key:"mi",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return sT(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Ti(t).next((function(t){t||(e.isPrimary=!1,e.ii.enqueueRetryable((function(){return e.fi(!1)})))}))})).next((function(){return e.Ei(t)})).next((function(n){return e.isPrimary&&!n?e.Ai(t).next((function(){return!1})):!!n&&e.vi(t).next((function(){return!0}))}))})).catch((function(t){if(Jw(t))return rw("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return rw("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.ii.enqueueRetryable((function(){return e.fi(t)})),e.isPrimary=t}))}},{key:"Ti",value:function(e){var t=this;return uT(e).get("owner").next((function(e){return Gw.resolve(t.Ri(e))}))}},{key:"Pi",value:function(e){return sT(e).delete(this.clientId)}},{key:"bi",value:function(){var e=fr(cr().mark((function e(){var t,n,r,i,a=this;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Vi(this.li,18e5)){e.next=6;break}return this.li=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Mb(e,"clientMetadata");return t.j().next((function(e){var n=a.Si(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Gw.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this._i){n=Qt(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this._i.removeItem(this.Di(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pi",value:function(){var e=this;this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.mi().then((function(){return e.bi()})).then((function(){return e.pi()}))}))}},{key:"Ri",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Ei",value:function(e){var t=this;return this.oi?Gw.resolve(!0):uT(e).get("owner").next((function(n){if(null!==n&&t.Vi(n.leaseTimestampMs,5e3)&&!t.Ci(n.ownerId)){if(t.Ri(n)&&t.networkEnabled)return!0;if(!t.Ri(n)){if(!n.allowTabSynchronization)throw new fw(lw.FAILED_PRECONDITION,aT);return!1}}return!(!t.networkEnabled||!t.inForeground)||sT(e).j().next((function(e){return void 0===t.Si(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&rw("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=fr(cr().mark((function e(){var t=this;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fs=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Ni(),this.ki(),e.next=7,this.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Lb(e,ib.ct);return t.Ai(n).next((function(){return t.Pi(n)}))}));case 7:this.wi.close(),this.Mi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Si",value:function(e,t){var n=this;return e.filter((function(e){return n.Vi(e.updateTimeMs,t)&&!n.Ci(e.clientId)}))}},{key:"$i",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return sT(t).j().next((function(t){return e.Si(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Fs}},{key:"getMutationQueue",value:function(e,t){return gI.de(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Bs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new sI(e,this.serializer.fe.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return FS.de(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.qs}},{key:"runTransaction",value:function(e,t,n){var r=this;rw("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.ui)?Db:14===i?Ob:13===i?Rb:12===i?Ab:11===i?Pb:void uw();return this.wi.runTransaction(e,o,u,(function(i){return a=new Lb(i,r.Os?r.Os.next():ib.ct),"readwrite-primary"===t?r.Ti(a).next((function(e){return!!e||r.Ei(a)})).next((function(t){if(!t)throw iw("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.ii.enqueueRetryable((function(){return r.fi(!1)})),new fw(lw.FAILED_PRECONDITION,qw);return n(a)})).next((function(e){return r.vi(a).next((function(){return e}))})):r.Oi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Oi",value:function(e){var t=this;return uT(e).get("owner").next((function(e){if(null!==e&&t.Vi(e.leaseTimestampMs,5e3)&&!t.Ci(e.ownerId)&&!t.Ri(e)&&!(t.oi||t.allowTabSynchronization&&e.allowTabSynchronization))throw new fw(lw.FAILED_PRECONDITION,aT)}))}},{key:"vi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return uT(e).put("owner",t)}},{key:"Ai",value:function(e){var t=this,n=uT(e);return n.get("owner").next((function(e){return t.Ri(e)?(rw("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Gw.resolve()}))}},{key:"Vi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(iw("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"gi",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=function(){e.ii.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.mi()}))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ni",value:function(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}},{key:"yi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=function(){t.xi();var e=/(?:Version|Mobile)\/1[456]/;!Ja()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.ii.enterRestrictedMode(!0),t.ii.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ci))}},{key:"ki",value:function(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}},{key:"Ci",value:function(e){var t;try{var n=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return rw("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return iw("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"xi",value:function(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(O){iw("Failed to set zombie client id.",O)}}},{key:"Mi",value:function(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(O){}}},{key:"Di",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"D",value:function(){return Qw.D()}}]),e}();function uT(e){return Mb(e,"owner")}function sT(e){return Mb(e,"clientMetadata")}function cT(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var lT=function(){function e(t,n,r,i){Mt(this,e),this.targetId=t,this.fromCache=n,this.Fi=r,this.Bi=i}return Ut(e,null,[{key:"Li",value:function(t,n){var r,i=Lx(),a=Lx(),o=Qt(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),fT=function(){function e(){Mt(this,e),this.qi=!1}return Ut(e,[{key:"initialize",value:function(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ki(e,t).next((function(a){return a||i.Gi(e,t,r,n)})).next((function(n){return n||i.Qi(e,t)}))}},{key:"Ki",value:function(e,t){var n=this;if(cx(t))return Gw.resolve(null);var r=px(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=yx(t,null,"F"),r=px(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=Lx.apply(void 0,Lt(i));return n.Ui.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.ji(t,i);return n.zi(t,o,a,r.readTime)?n.Ki(e,yx(t,null,"F")):n.Wi(e,o,t,r)}))}))})))}))}},{key:"Gi",value:function(e,t,n,r){var i=this;return cx(t)||r.isEqual(Tw.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next((function(a){var o=i.ji(t,a);return i.zi(t,o,n,r)?i.Qi(e,t):(nw()<=Oo.DEBUG&&rw("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),kx(t)),i.Wi(e,o,t,Uw(r,-1)))}))}},{key:"ji",value:function(e,t){var n=new zb(_x(e));return t.forEach((function(t,r){wx(e,r)&&(n=n.add(r))})),n}},{key:"zi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Qi",value:function(e,t){return nw()<=Oo.DEBUG&&rw("QueryEngine","Using full collection scan to execute query:",kx(t)),this.Ui.getDocumentsMatchingQuery(e,t,Vw.min())}},{key:"Wi",value:function(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),hT=function(){function e(t,n,r,i){Mt(this,e),this.persistence=t,this.Hi=n,this.serializer=i,this.Ji=new Vb(xw),this.Yi=new Ex((function(e){return ex(e)}),tx),this.Xi=new Map,this.Zi=t.getRemoteDocumentCache(),this.Bs=t.getTargetCache(),this.qs=t.getBundleCache(),this.tr(r)}return Ut(e,[{key:"tr",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new KI(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ji)}))}}]),e}();function dT(e,t,n,r){return new hT(e,t,n,r)}function pT(e,t){return vT.apply(this,arguments)}function vT(){return vT=fr(cr().mark((function e(t,n){var r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cw(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.tr(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Lx(),s=Qt(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=Qt(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=Qt(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=Qt(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{er:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),vT.apply(this,arguments)}function yT(e,t){var n=cw(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Gw.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);sw(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Lx(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function mT(e){var t=cw(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Bs.getLastRemoteSnapshotVersion(e)}))}function gT(e,t){var n=cw(e),r=t.snapshotVersion,i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Bs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Bs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(u)?c=c.withResumeToken(Qb.EMPTY_BYTE_STRING,Tw.min()).withLastLimboFreeSnapshotVersion(Tw.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Bs.updateTargetData(e,c))}}));var u=Ix(),s=Lx();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(kT(e,a,t.documentUpdates).next((function(e){u=e.nr,s=e.sr}))),!r.isEqual(Tw.min())){var c=n.Bs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Gw.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Ji=i,e}))}function kT(e,t,n){var r=Lx(),i=Lx();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Ix();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Tw.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):rw("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{nr:r,sr:i}}))}function wT(e,t){var n=cw(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function bT(e,t){var n=cw(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Bs.getTargetData(e,t).next((function(i){return i?(r=i,Gw.resolve(r)):n.Bs.allocateTargetId(e).next((function(i){return r=new bS(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}function _T(e,t,n){return xT.apply(this,arguments)}function xT(){return xT=fr(cr().mark((function e(t,n,r){var i,a,o;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=cw(t),a=i.Ji.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Jw(e.t1)){e.next=12;break}throw e.t1;case 12:rw("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ji=i.Ji.remove(n),i.Yi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),xT.apply(this,arguments)}function ET(e,t,n){var r=cw(e),i=Tw.min(),a=Lx();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=cw(e),i=r.Yi.get(n);return void 0!==i?Gw.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,px(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Hi.getDocumentsMatchingQuery(e,t,n?i:Tw.min(),n?a:Lx())})).next((function(e){return TT(r,bx(t),e),{documents:e,ir:a}}))}))}function ST(e,t){var n=cw(e),r=cw(n.Bs),i=n.Ji.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.le(e,t).next((function(e){return e?e.target:null}))}))}function IT(e,t){var n=cw(e),r=n.Xi.get(t)||Tw.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Zi.getAllFromCollectionGroup(e,t,Uw(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return TT(n,t,e),e}))}function TT(e,t,n){var r=e.Xi.get(t)||Tw.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Xi.set(t,r)}function CT(e,t,n,r){return NT.apply(this,arguments)}function NT(){return NT=fr(cr().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=cw(t),o=Lx(),u=Ix(),s=Qt(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.rr(l.metadata.name),l.document&&(o=o.add(f)),(h=n.ur(l)).setReadTime(n.cr(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.Zi.newChangeBuffer({trackRemovals:!0}),e.next=7,bT(a,function(e){return px(sx(Nw.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return kT(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Bs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Bs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.nr,t.sr)})).next((function(){return t.nr}))}))})));case 9:case"end":return e.stop()}}),e)}))),NT.apply(this,arguments)}function PT(e,t){return AT.apply(this,arguments)}function AT(){return AT=fr(cr().mark((function e(t,n){var r,i,a,o=arguments;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Lx(),e.next=3,bT(t,px(PS(n.bundledQuery)));case 3:return i=e.sent,a=cw(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=YE(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.qs.saveNamedQuery(e,n);var o=i.withResumeToken(Qb.EMPTY_BYTE_STRING,t);return a.Ji=a.Ji.insert(o.targetId,o),a.Bs.updateTargetData(e,o).next((function(){return a.Bs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Bs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.qs.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),AT.apply(this,arguments)}function RT(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function OT(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function DT(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var LT=function(){function e(t,n,r,i){Mt(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return Ut(e,[{key:"hr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"ar",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new fw(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(iw("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),MT=function(){function e(t,n,r){Mt(this,e),this.targetId=t,this.state=n,this.error=r}return Ut(e,[{key:"hr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"ar",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new fw(i.error.code,i.error.message))),a?new e(t,i.state,r):(iw("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),FT=function(){function e(t,n){Mt(this,e),this.clientId=t,this.activeTargetIds=n}return Ut(e,null,[{key:"ar",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Fx(),o=0;i&&o<r.activeTargetIds.length;++o)i=ub(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(iw("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),UT=function(){function e(t,n){Mt(this,e),this.clientId=t,this.onlineState=n}return Ut(e,null,[{key:"ar",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(iw("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),jT=function(){function e(){Mt(this,e),this.activeTargetIds=Fx()}return Ut(e,[{key:"lr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"dr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"hr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),VT=function(){function e(t,n,r,i,a){Mt(this,e),this.window=t,this.ii=n,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Vb(xw),this.started=!1,this.yr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.pr=RT(this.persistenceKey,this.wr),this.Ir=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gr=this.gr.insert(this.wr,new jT),this.Tr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Er=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Ar=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.vr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Rr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this._r)}return Ut(e,[{key:"start",value:function(){var e=fr(cr().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.$i();case 2:t=e.sent,n=Qt(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.wr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(RT(this.persistenceKey,i)))&&(o=FT.ar(i,a))&&(this.gr=this.gr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Pr(),(u=this.storage.getItem(this.vr))&&(s=this.br(u))&&this.Vr(s),c=Qt(this.yr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.mr(f)}catch(d){c.e(d)}finally{c.f()}this.yr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Ir,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Sr(this.gr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.gr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Dr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Dr(e,t,n),this.Cr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(DT(this.persistenceKey,e));if(n){var r=MT.ar(e,n);r&&(t=r.state)}}return this.Nr.lr(e),this.Pr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Nr.dr(e),this.Pr()}},{key:"isLocalQueryTarget",value:function(e){return this.Nr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(DT(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.kr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Cr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Mr(e)}},{key:"notifyBundleLoaded",value:function(e){this.$r(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return rw("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){rw("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){rw("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"mr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(rw("SharedClientState","EVENT",n.key,n.newValue),n.key===this.pr)return void iw("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable(fr(cr().mark((function e(){var r,i,a,o,u,s,c;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.Tr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Or(n.key),e.abrupt("return",t.Fr(r,null));case 6:if(!(i=t.Br(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Fr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.Er.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Lr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.qr(a));case 16:e.next=41;break;case 18:if(!t.Ar.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Ur(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Kr(o));case 23:e.next=41;break;case 25:if(n.key!==t.vr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.br(n.newValue))){e.next=30;break}return e.abrupt("return",t.Vr(u));case 30:e.next=41;break;case 32:if(n.key!==t.Ir){e.next=37;break}s=function(e){var t=ib.ct;if(null!=e)try{var n=JSON.parse(e);sw("number"==typeof n),t=n}catch(e){iw("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==ib.ct&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.Rr){e.next=41;break}return c=t.Gr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Qr(e)})));case 41:e.next=44;break;case 43:t.yr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Nr",get:function(){return this.gr.get(this.wr)}},{key:"Pr",value:function(){this.setItem(this.pr,this.Nr.hr())}},{key:"Dr",value:function(e,t,n){var r=new LT(this.currentUser,e,t,n),i=OT(this.persistenceKey,this.currentUser,e);this.setItem(i,r.hr())}},{key:"Cr",value:function(e){var t=OT(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Mr",value:function(e){var t={clientId:this.wr,onlineState:e};this.storage.setItem(this.vr,JSON.stringify(t))}},{key:"kr",value:function(e,t,n){var r=DT(this.persistenceKey,e),i=new MT(e,t,n);this.setItem(r,i.hr())}},{key:"$r",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}},{key:"Or",value:function(e){var t=this.Tr.exec(e);return t?t[1]:null}},{key:"Br",value:function(e,t){var n=this.Or(e);return FT.ar(n,t)}},{key:"Lr",value:function(e,t){var n=this.Er.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return LT.ar(new Zk(i),r,t)}},{key:"Ur",value:function(e,t){var n=this.Ar.exec(e),r=Number(n[1]);return MT.ar(r,t)}},{key:"br",value:function(e){return UT.ar(e)}},{key:"Gr",value:function(e){return JSON.parse(e)}},{key:"qr",value:function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.jr(t.batchId,t.state,t.error));case 2:rw("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Kr",value:function(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}},{key:"Fr",value:function(e,t){var n=this,r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),a=this.Sr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Wr(o,u).then((function(){n.gr=r}))}},{key:"Vr",value:function(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Sr",value:function(e){var t=Fx();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"D",value:function(e){return!(!e||!e.localStorage)}}]),e}(),BT=function(){function e(){Mt(this,e),this.Hr=new jT,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return Ut(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Jr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Hr.dr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Jr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Hr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Hr=new jT,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),qT=function(){function e(){Mt(this,e)}return Ut(e,[{key:"Yr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),zT=function(){function e(){var t=this;Mt(this,e),this.Xr=function(){return t.Zr()},this.eo=function(){return t.no()},this.so=[],this.io()}return Ut(e,[{key:"Yr",value:function(e){this.so.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}},{key:"io",value:function(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}},{key:"Zr",value:function(){rw("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=Qt(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"no",value:function(){rw("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=Qt(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),WT=null;function KT(){return null===WT?WT=268435456+Math.round(2147483648*Math.random()):WT++,"0x"+WT.toString(16)}var GT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},HT=function(){function e(t){Mt(this,e),this.ro=t.ro,this.oo=t.oo}return Ut(e,[{key:"uo",value:function(e){this.co=e}},{key:"ao",value:function(e){this.ho=e}},{key:"onMessage",value:function(e){this.lo=e}},{key:"close",value:function(){this.oo()}},{key:"send",value:function(e){this.ro(e)}},{key:"fo",value:function(){this.co()}},{key:"wo",value:function(e){this.ho(e)}},{key:"_o",value:function(e){this.lo(e)}}]),e}(),QT="WebChannelConnection",YT=function(e){Vt(n,e);var t=Wt(n);function n(e){var r;return Mt(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return Ut(n,[{key:"Ao",value:function(e,t,n,r){var i=KT();return new Promise((function(a,o){var u=new Yk;u.setWithCredentials(!0),u.listenOnce(Wk.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case zk.NO_ERROR:var t=u.getResponseJson();rw(QT,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case zk.TIMEOUT:rw(QT,"RPC '".concat(e,"' ").concat(i," timed out")),o(new fw(lw.DEADLINE_EXCEEDED,"Request time out"));break;case zk.HTTP_ERROR:var n=u.getStatus();if(rw(QT,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(lw).indexOf(t)>=0?t:lw.UNKNOWN}(s.status);o(new fw(c,s.message))}else o(new fw(lw.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new fw(lw.UNAVAILABLE,"Connection failed."));break;default:uw()}}finally{rw(QT,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);rw(QT,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"Ro",value:function(e,t,n){var r=KT(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Bk(),o=qk(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},s=this.longPollingOptions.timeoutSeconds;void 0!==s&&(u.longPollingTimeout=Math.round(1e3*s)),this.useFetchStreams&&(u.xmlHttpFactory=new Hk({})),this.Eo(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var c=i.join("");rw(QT,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),u);var l=a.createWebChannel(c,u),f=!1,h=!1,d=new HT({ro:function(t){h?rw(QT,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(f||(rw(QT,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),f=!0),rw(QT,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},oo:function(){return l.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(l,Qk.EventType.OPEN,(function(){h||rw(QT,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(l,Qk.EventType.CLOSE,(function(){h||(h=!0,rw(QT,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.wo())})),p(l,Qk.EventType.ERROR,(function(t){h||(h=!0,aw(QT,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.wo(new fw(lw.UNAVAILABLE,"The operation could not be completed")))})),p(l,Qk.EventType.MESSAGE,(function(t){var n;if(!h){var i=t.data[0];sw(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){rw(QT,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=pE[e];if(void 0!==t)return xE(t)}(u),c=o.message;void 0===s&&(s=lw.INTERNAL,c="Unknown error status: "+u+" with message "+o.message),h=!0,d.wo(new fw(s,c)),l.close()}else rw(QT,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d._o(i)}})),p(o,Kk.STAT_EVENT,(function(t){t.stat===Gk.PROXY?rw(QT,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Gk.NOPROXY&&rw(QT,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.fo()}),0),d}}]),n}(function(){function e(t){Mt(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.mo=n+"://"+t.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return Ut(e,[{key:"po",get:function(){return!1}},{key:"Io",value:function(e,t,n,r,i){var a=KT(),o=this.To(e,t);rw("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={};return this.Eo(u,r,i),this.Ao(e,o,u,n).then((function(t){return rw("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw aw("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"vo",value:function(e,t,n,r,i,a){return this.Io(e,t,n,r,i)}},{key:"Eo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ew,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"To",value:function(e,t){var n=GT[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}]),e}());function $T(){return"undefined"!=typeof window?window:null}function JT(){return"undefined"!=typeof document?document:null}function XT(e){return new WE(e,!0)}var ZT=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;Mt(this,e),this.ii=t,this.timerId=n,this.Po=r,this.bo=i,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}return Ut(e,[{key:"reset",value:function(){this.So=0}},{key:"xo",value:function(){this.So=this.Vo}},{key:"No",value:function(e){var t=this;this.cancel();var n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-r);i>0&&rw("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,(function(){return t.Co=Date.now(),e()})),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}},{key:"Mo",value:function(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}},{key:"cancel",value:function(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"ko",value:function(){return(Math.random()-.5)*this.So}}]),e}(),eC=function(){function e(t,n,r,i,a,o,u,s){Mt(this,e),this.ii=t,this.$o=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new ZT(t,n)}return Ut(e,[{key:"Uo",value:function(){return 1===this.state||5===this.state||this.Ko()}},{key:"Ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Go()}},{key:"stop",value:function(){var e=fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Uo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Qo",value:function(){this.state=0,this.qo.reset()}},{key:"jo",value:function(){var e=this;this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(function(){return e.zo()})))}},{key:"Wo",value:function(e){this.Ho(),this.stream.send(e)}},{key:"zo",value:function(){var e=fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ho",value:function(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}},{key:"Jo",value:function(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}},{key:"close",value:function(){var e=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==t?this.qo.reset():n&&n.code===lw.RESOURCE_EXHAUSTED?(iw(n.toString()),iw("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):n&&n.code===lw.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.ao(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Yo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=Ot(t,2),i=r[0],a=r[1];e.Fo===n&&e.Zo(i,a)}),(function(n){t((function(){var t=new fw(lw.UNKNOWN,"Fetching auth token failed: "+n.message);return e.tu(t)}))}))}},{key:"Zo",value:function(e,t){var n=this,r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo((function(){r((function(){return n.state=2,n.Lo=n.ii.enqueueAfterDelay(n.Oo,1e4,(function(){return n.Ko()&&(n.state=3),Promise.resolve()})),n.listener.uo()}))})),this.stream.ao((function(e){r((function(){return n.tu(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Go",value:function(){var e=this;this.state=5,this.qo.No(fr(cr().mark((function t(){return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"tu",value:function(e){return rw("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Xo",value:function(e){var t=this;return function(n){t.ii.enqueueAndForget((function(){return t.Fo===e?n():(rw("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),tC=function(e){Vt(n,e);var t=Wt(n);function n(e,r,i,a,o,u){var s;return Mt(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s}return Ut(n,[{key:"eu",value:function(e,t){return this.connection.Ro("Listen",e,t)}},{key:"onMessage",value:function(e){this.qo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:uw()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(sw(void 0===t||"string"==typeof t),Qb.fromBase64String(t||"")):(sw(void 0===t||t instanceof Uint8Array),Qb.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?lw.UNKNOWN:xE(e.code);return new fw(t,e.message||"")}(o);n=new ME(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=ZE(e,s.document.name),l=YE(s.document.updateTime),f=s.document.createTime?YE(s.document.createTime):Tw.min(),h=new S_({mapValue:{fields:s.document.fields}}),d=T_.newFoundDocument(c,l,f,h),p=s.targetIds||[],v=s.removedTargetIds||[];n=new DE(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var y=t.documentDelete;y.document;var m=ZE(e,y.document),g=y.readTime?YE(y.readTime):Tw.min(),k=T_.newNoDocument(m,g),w=y.removedTargetIds||[];n=new DE([],w,k.key,k)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var _=ZE(e,b.document),x=b.removedTargetIds||[];n=new DE([],x,_,null)}else{if(!("filter"in t))return uw();t.filter;var E=t.filter;E.targetId;var S=E.count,I=void 0===S?0:S,T=E.unchangedNames,C=new bE(I,T),N=E.targetId;n=new LE(N,C)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Tw.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Tw.min():t.readTime?YE(t.readTime):Tw.min()}(e);return this.listener.nu(t,n)}},{key:"su",value:function(e){var t={};t.database=nS(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=nx(r)?{documents:cS(e,r)}:{query:lS(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=HE(e,t.resumeToken);var i=KE(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(Tw.min())>0){n.readTime=GE(e,t.snapshotVersion.toTimestamp());var a=KE(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return uw()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}},{key:"iu",value:function(e){var t={};t.database=nS(this.serializer),t.removeTarget=e,this.Wo(t)}}]),n}(eC),nC=function(e){Vt(n,e);var t=Wt(n);function n(e,r,i,a,o,u){var s;return Mt(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s.ru=!1,s}return Ut(n,[{key:"ou",get:function(){return this.ru}},{key:"start",value:function(){this.ru=!1,this.lastStreamToken=void 0,ns(Bt(n.prototype),"start",this).call(this)}},{key:"Yo",value:function(){this.ru&&this.uu([])}},{key:"eu",value:function(e,t){return this.connection.Ro("Write",e,t)}},{key:"onMessage",value:function(e){if(sw(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();var t=function(e,t){return e&&e.length>0?(sw(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?YE(e.updateTime):YE(t);return n.isEqual(Tw.min())&&(n=YE(t)),new eE(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=YE(e.commitTime);return this.listener.cu(n,t)}return sw(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}},{key:"hu",value:function(){var e={};e.database=nS(this.serializer),this.Wo(e)}},{key:"uu",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return uS(t.serializer,e)}))};this.Wo(n)}}]),n}(eC),rC=function(e){Vt(n,e);var t=Wt(n);function n(e,r,i,a){var o;return Mt(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.lu=!1,o}return Ut(n,[{key:"fu",value:function(){if(this.lu)throw new fw(lw.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Io",value:function(e,t,n){var r=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=Ot(i,2),o=a[0],u=a[1];return r.connection.Io(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===lw.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new fw(lw.UNKNOWN,e.toString())}))}},{key:"vo",value:function(e,t,n,r){var i=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=Ot(a,2),u=o[0],s=o[1];return i.connection.vo(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===lw.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new fw(lw.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.lu=!0}}]),n}(function(){return Ut((function e(){Mt(this,e)}))}());var iC=function(){function e(t,n){Mt(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}return Ut(e,[{key:"gu",value:function(){var e=this;0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e._u=null,e.pu("Backend didn't respond within 10 seconds."),e.yu("Offline"),Promise.resolve()})))}},{key:"Iu",value:function(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}},{key:"set",value:function(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}},{key:"yu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"pu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(iw(t),this.mu=!1):rw("OnlineStateTracker",t)}},{key:"Tu",value:function(){null!==this._u&&(this._u.cancel(),this._u=null)}}]),e}(),aC=Ut((function e(t,n,r,i,a){var o=this;Mt(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr((function(e){r.enqueueAndForget(fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=yC(o),!e.t0){e.next=5;break}return rw("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=cw(t)).vu.add(4),e.next=4,sC(n);case 4:return n.bu.set("Unknown"),n.vu.delete(4),e.next=8,oC(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.bu=new iC(r,i)}));function oC(e){return uC.apply(this,arguments)}function uC(){return uC=fr(cr().mark((function e(t){var n,r,i;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!yC(t)){e.next=18;break}n=Qt(t.Ru),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),uC.apply(this,arguments)}function sC(e){return cC.apply(this,arguments)}function cC(){return cC=fr(cr().mark((function e(t){var n,r,i;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Qt(t.Ru),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),cC.apply(this,arguments)}function lC(e,t){var n=cw(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),vC(n)?pC(n):KC(n).Ko()&&hC(n,t))}function fC(e,t){var n=cw(e),r=KC(n);n.Au.delete(t),r.Ko()&&dC(n,t),0===n.Au.size&&(r.Ko()?r.jo():yC(n)&&n.bu.set("Unknown"))}function hC(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Tw.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}KC(e).su(t)}function dC(e,t){e.Vu.qt(t),KC(e).iu(t)}function pC(e){e.Vu=new UE({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},le:function(t){return e.Au.get(t)||null},ue:function(){return e.datastore.serializer.databaseId}}),KC(e).start(),e.bu.gu()}function vC(e){return yC(e)&&!KC(e).Uo()&&e.Au.size>0}function yC(e){return 0===cw(e).vu.size}function mC(e){e.Vu=void 0}function gC(e){return kC.apply(this,arguments)}function kC(){return kC=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.Au.forEach((function(e,n){hC(t,e)}));case 1:case"end":return e.stop()}}),e)}))),kC.apply(this,arguments)}function wC(e,t){return bC.apply(this,arguments)}function bC(){return bC=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:mC(t),vC(t)?(t.bu.Iu(n),pC(t)):t.bu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),bC.apply(this,arguments)}function _C(e,t,n){return xC.apply(this,arguments)}function xC(){return xC=fr(cr().mark((function e(t,n,r){var i;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.bu.set("Online"),!(n instanceof ME&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=fr(cr().mark((function e(t,n){var r,i,a,o;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=Qt(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.Au.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.Au.delete(o),t.Vu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),rw("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,EC(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof DE?t.Vu.Ht(n):n instanceof LE?t.Vu.ne(n):t.Vu.Xt(n),r.isEqual(Tw.min())){e.next=29;break}return e.prev=14,e.next=17,mT(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Vu.ce(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.Au.get(t);if(r){e.Au.set(t,r.withResumeToken(Qb.EMPTY_BYTE_STRING,r.snapshotVersion)),dC(e,t);var i=new bS(r.target,t,n,r.sequenceNumber);hC(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),rw("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,EC(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),xC.apply(this,arguments)}function EC(e,t,n){return SC.apply(this,arguments)}function SC(){return SC=fr(cr().mark((function e(t,n,r){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Jw(n)){e.next=2;break}throw n;case 2:return t.vu.add(1),e.next=5,sC(t);case 5:t.bu.set("Offline"),r||(r=function(){return mT(t.localStore)}),t.asyncQueue.enqueueRetryable(fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rw("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.vu.delete(1),e.next=6,oC(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),SC.apply(this,arguments)}function IC(e,t){return t().catch((function(n){return EC(e,n,t)}))}function TC(e){return CC.apply(this,arguments)}function CC(){return CC=fr(cr().mark((function e(t){var n,r,i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=cw(t),r=GC(n),i=n.Eu.length>0?n.Eu[n.Eu.length-1].batchId:-1;case 2:if(!NC(n)){e.next=19;break}return e.prev=3,e.next=6,wT(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Eu.length&&r.jo(),e.abrupt("break",19);case 10:i=a.batchId,PC(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,EC(n,e.t0);case 17:e.next=2;break;case 19:AC(n)&&RC(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),CC.apply(this,arguments)}function NC(e){return yC(e)&&e.Eu.length<10}function PC(e,t){e.Eu.push(t);var n=GC(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function AC(e){return yC(e)&&!GC(e).Uo()&&e.Eu.length>0}function RC(e){GC(e).start()}function OC(e){return DC.apply(this,arguments)}function DC(){return DC=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:GC(t).hu();case 1:case"end":return e.stop()}}),e)}))),DC.apply(this,arguments)}function LC(e){return MC.apply(this,arguments)}function MC(){return MC=fr(cr().mark((function e(t){var n,r,i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=GC(t),r=Qt(t.Eu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.uu(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),MC.apply(this,arguments)}function FC(e,t,n){return UC.apply(this,arguments)}function UC(){return UC=fr(cr().mark((function e(t,n,r){var i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Eu.shift(),a=kE.from(i,n,r),e.next=3,IC(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,TC(t);case 5:case"end":return e.stop()}}),e)}))),UC.apply(this,arguments)}function jC(e,t){return VC.apply(this,arguments)}function VC(){return VC=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&GC(t).ou,!e.t0){e.next=4;break}return e.next=4,function(){var e=fr(cr().mark((function e(t,n){var r,i;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_E(i=n.code)||i===lw.ABORTED){e.next=7;break}return r=t.Eu.shift(),GC(t).Qo(),e.next=5,IC(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,TC(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:AC(t)&&RC(t);case 5:case"end":return e.stop()}}),e)}))),VC.apply(this,arguments)}function BC(e,t){return qC.apply(this,arguments)}function qC(){return qC=fr(cr().mark((function e(t,n){var r,i;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=cw(t)).asyncQueue.verifyOperationInProgress(),rw("RemoteStore","RemoteStore received new credentials"),i=yC(r),r.vu.add(3),e.next=6,sC(r);case 6:return i&&r.bu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.vu.delete(3),e.next=12,oC(r);case 12:case"end":return e.stop()}}),e)}))),qC.apply(this,arguments)}function zC(e,t){return WC.apply(this,arguments)}function WC(){return WC=fr(cr().mark((function e(t,n){var r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=cw(t),!n){e.next=7;break}return r.vu.delete(2),e.next=5,oC(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.vu.add(2),e.next=12,sC(r);case 12:r.bu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),WC.apply(this,arguments)}function KC(e){return e.Su||(e.Su=function(e,t,n){var r=cw(e);return r.fu(),new tC(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:gC.bind(null,e),ao:wC.bind(null,e),nu:_C.bind(null,e)}),e.Ru.push(function(){var t=fr(cr().mark((function t(n){return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Su.Qo(),vC(e)?pC(e):e.bu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Su.stop();case 6:mC(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Su}function GC(e){return e.Du||(e.Du=function(e,t,n){var r=cw(e);return r.fu(),new nC(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:OC.bind(null,e),ao:jC.bind(null,e),au:LC.bind(null,e),cu:FC.bind(null,e)}),e.Ru.push(function(){var t=fr(cr().mark((function t(n){return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Du.Qo(),t.next=4,TC(e);case 4:t.next=9;break;case 6:return t.next=8,e.Du.stop();case 8:e.Eu.length>0&&(rw("RemoteStore","Stopping write stream with ".concat(e.Eu.length," pending writes")),e.Eu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Du}var HC=function(){function e(t,n,r,i,a){Mt(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new hw,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return Ut(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new fw(lw.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function QC(e,t){if(iw("AsyncQueue","".concat(t,": ").concat(e)),Jw(e))return new fw(lw.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var YC=function(){function e(t){Mt(this,e),this.comparator=t?function(e,n){return t(e,n)||Rw.comparator(e.key,n.key)}:function(e,t){return Rw.comparator(e.key,t.key)},this.keyedMap=Cx(),this.sortedSet=new Vb(this.comparator)}return Ut(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),$C=function(){function e(){Mt(this,e),this.Cu=new Vb(Rw.comparator)}return Ut(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):uw():this.Cu=this.Cu.insert(t,e)}},{key:"xu",value:function(){var e=[];return this.Cu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),JC=function(){function e(t,n,r,i,a,o,u,s,c){Mt(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return Ut(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mx(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,YC.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),XC=Ut((function e(){Mt(this,e),this.Nu=void 0,this.listeners=[]})),ZC=Ut((function e(){Mt(this,e),this.queries=new Ex((function(e){return gx(e)}),mx),this.onlineState="Unknown",this.ku=new Set}));function eN(e,t){return tN.apply(this,arguments)}function tN(){return tN=fr(cr().mark((function e(t,n){var r,i,a,o,u;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=cw(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new XC),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Nu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=QC(e.t0,"Initialization of query '".concat(kx(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Mu(r.onlineState),o.Nu&&n.$u(o.Nu)&&oN(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),tN.apply(this,arguments)}function nN(e,t){return rN.apply(this,arguments)}function rN(){return rN=fr(cr().mark((function e(t,n){var r,i,a,o,u;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=cw(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),rN.apply(this,arguments)}function iN(e,t){var n,r=cw(e),i=!1,a=Qt(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=Qt(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.$u(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Nu=o}}}catch(f){a.e(f)}finally{a.f()}i&&oN(r)}function aN(e,t,n){var r=cw(e),i=r.queries.get(t);if(i){var a,o=Qt(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function oN(e){e.ku.forEach((function(e){e.next()}))}var uN=function(){function e(t,n,r){Mt(this,e),this.query=t,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}return Ut(e,[{key:"$u",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=Qt(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new JC(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),a=!0):this.qu(e,this.onlineState)&&(this.Uu(e),a=!0),this.Bu=e,a}},{key:"onError",value:function(e){this.Ou.error(e)}},{key:"Mu",value:function(e){this.onlineState=e;var t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}},{key:"qu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Lu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Uu",value:function(e){e=JC.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}]),e}(),sN=function(){function e(t,n){Mt(this,e),this.Gu=t,this.byteLength=n}return Ut(e,[{key:"Qu",value:function(){return"metadata"in this.Gu}}]),e}(),cN=function(){function e(t){Mt(this,e),this.serializer=t}return Ut(e,[{key:"rr",value:function(e){return ZE(this.serializer,e)}},{key:"ur",value:function(e){return e.metadata.exists?aS(this.serializer,e.document,!1):T_.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}},{key:"cr",value:function(e){return YE(e)}}]),e}(),lN=function(){function e(t,n,r){Mt(this,e),this.ju=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=fN(t)}return Ut(e,[{key:"zu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;var n=Nw.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Wu",value:function(e){var t,n=new Map,r=new cN(this.serializer),i=Qt(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.rr(a.metadata.name),s=Qt(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Lx()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=fr(cr().mark((function e(){var t,n,r,i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,CT(this.localStore,new cN(this.serializer),this.documents,this.ju.id);case 2:t=e.sent,n=this.Wu(this.documents),r=Qt(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,PT(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Hu:this.collectionGroups,Ju:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function fN(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var hN=Ut((function e(t){Mt(this,e),this.key=t})),dN=Ut((function e(t){Mt(this,e),this.key=t})),pN=function(){function e(t,n){Mt(this,e),this.query=t,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Lx(),this.mutatedKeys=Lx(),this.tc=_x(t),this.ec=new YC(this.tc)}return Ut(e,[{key:"nc",get:function(){return this.Yu}},{key:"sc",value:function(e,t){var n=this,r=t?t.ic:new $C,i=t?t.ec:this.ec,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=wx(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.rc(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.tc(f,s)>0||c&&n.tc(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{ec:o,ic:r,zi:u,mutatedKeys:a}}},{key:"rc",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;var a=e.ic.xu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return uw()}};return n(e)-n(t)}(e.type,t.type)||r.tc(e.doc,t.doc)})),this.oc(n);var o=t?this.uc():[],u=0===this.Zu.size&&this.current?1:0,s=u!==this.Xu;return this.Xu=u,0!==a.length||s?{snapshot:new JC(this.query,e.ec,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}},{key:"Mu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new $C,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}},{key:"ac",value:function(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}},{key:"oc",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Yu=t.Yu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Yu=t.Yu.delete(e)})),this.current=e.current)}},{key:"uc",value:function(){var e=this;if(!this.current)return[];var t=this.Zu;this.Zu=Lx(),this.ec.forEach((function(t){e.ac(t.key)&&(e.Zu=e.Zu.add(t.key))}));var n=[];return t.forEach((function(t){e.Zu.has(t)||n.push(new dN(t))})),this.Zu.forEach((function(e){t.has(e)||n.push(new hN(e))})),n}},{key:"hc",value:function(e){this.Yu=e.ir,this.Zu=Lx();var t=this.sc(e.documents);return this.applyChanges(t,!0)}},{key:"lc",value:function(){return JC.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}]),e}(),vN=Ut((function e(t,n,r){Mt(this,e),this.query=t,this.targetId=n,this.view=r})),yN=Ut((function e(t){Mt(this,e),this.key=t,this.fc=!1})),mN=function(){function e(t,n,r,i,a,o){Mt(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new Ex((function(e){return gx(e)}),mx),this._c=new Map,this.mc=new Set,this.gc=new Vb(Rw.comparator),this.yc=new Map,this.Ic=new QI,this.Tc={},this.Ec=new Map,this.Ac=xI.Mn(),this.onlineState="Unknown",this.vc=void 0}return Ut(e,[{key:"isPrimaryClient",get:function(){return!0===this.vc}}]),e}();function gN(e,t){return kN.apply(this,arguments)}function kN(){return kN=fr(cr().mark((function e(t,n){var r,i,a,o,u,s;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=fP(t),!(o=r.wc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.lc(),e.next=15;break;case 6:return e.next=8,bT(r.localStore,px(n));case 8:return u=e.sent,s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=13,wN(r,n,i,"current"===s,u.resumeToken);case 13:a=e.sent,r.isPrimaryClient&&lC(r.remoteStore,u);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),kN.apply(this,arguments)}function wN(e,t,n,r,i){return bN.apply(this,arguments)}function bN(){return bN=fr(cr().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Rc=function(e,n,r){return function(){var e=fr(cr().mark((function e(t,n,r,i){var a,o,u;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.sc(r),e.t0=a.zi,!e.t0){e.next=6;break}return e.next=5,ET(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.sc(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(BN(t,n.targetId,u.cc),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,ET(t.localStore,n,!0);case 3:return o=e.sent,u=new pN(n,o.ir),s=u.sc(o.documents),c=OE.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),BN(t,r,l.cc),f=new vN(n,r,u),e.abrupt("return",(t.wc.set(n,f),t._c.has(r)?t._c.get(r).push(n):t._c.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),bN.apply(this,arguments)}function _N(e,t){return xN.apply(this,arguments)}function xN(){return xN=fr(cr().mark((function e(t,n){var r,i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=cw(t),i=r.wc.get(n),!((a=r._c.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r._c.set(i.targetId,a.filter((function(e){return!mx(e,n)}))),void r.wc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,_T(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),fC(r.remoteStore,i.targetId),jN(r,i.targetId)})).catch(Ww);case 9:e.next=14;break;case 11:return jN(r,i.targetId),e.next=14,_T(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),xN.apply(this,arguments)}function EN(e,t,n){return SN.apply(this,arguments)}function SN(){return SN=fr(cr().mark((function e(t,n,r){var i,a,o;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=hP(t),e.prev=1,e.next=4,function(e,t){var n,r,i=cw(e),a=Iw.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Lx());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=Ix(),s=Lx();return i.Zi.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=Qt(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=uE(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new lE(c.key,l,I_(l.value.mapValue),tE.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Nx(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Tc[e.currentUser.toKey()];r||(r=new Vb(xw)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,WN(i,a.changes);case 9:return e.next=11,TC(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=QC(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),SN.apply(this,arguments)}function IN(e,t){return TN.apply(this,arguments)}function TN(){return TN=fr(cr().mark((function e(t,n){var r,i;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cw(t),e.prev=1,e.next=4,gT(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.yc.get(t);n&&(sw(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.fc=!0:e.modifiedDocuments.size>0?sw(n.fc):e.removedDocuments.size>0&&(sw(n.fc),n.fc=!1))})),e.next=8,WN(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Ww(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),TN.apply(this,arguments)}function CN(e,t,n){var r=cw(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.wc.forEach((function(e,n){var r=n.view.Mu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=cw(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=Qt(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Mu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&oN(n)}(r.eventManager,t),i.length&&r.dc.nu(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function NN(e,t,n){return PN.apply(this,arguments)}function PN(){return PN=fr(cr().mark((function e(t,n,r){var i,a,o,u,s,c;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=cw(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.yc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Vb(Rw.comparator)).insert(o,T_.newNoDocument(o,Tw.min())),s=Lx().add(o),c=new RE(Tw.min(),new Map,new Vb(xw),u,s),e.next=9,IN(i,c);case 9:i.gc=i.gc.remove(o),i.yc.delete(n),zN(i),e.next=16;break;case 14:return e.next=16,_T(i.localStore,n,!1).then((function(){return jN(i,n,r)})).catch(Ww);case 16:case"end":return e.stop()}}),e)}))),PN.apply(this,arguments)}function AN(e,t){return RN.apply(this,arguments)}function RN(){return RN=fr(cr().mark((function e(t,n){var r,i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cw(t),i=n.batch.batchId,e.prev=1,e.next=4,yT(r.localStore,n);case 4:return a=e.sent,UN(r,i,null),FN(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,WN(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Ww(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),RN.apply(this,arguments)}function ON(e,t,n){return DN.apply(this,arguments)}function DN(){return DN=fr(cr().mark((function e(t,n,r){var i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=cw(t),e.prev=1,e.next=4,function(e,t){var n=cw(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return sw(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,UN(i,n,r),FN(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,WN(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Ww(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),DN.apply(this,arguments)}function LN(e,t){return MN.apply(this,arguments)}function MN(){return MN=fr(cr().mark((function e(t,n){var r,i,a,o;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yC((r=cw(t)).remoteStore)||rw("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=cw(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.Ec.get(i)||[]).push(n),r.Ec.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=QC(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),MN.apply(this,arguments)}function FN(e,t){(e.Ec.get(t)||[]).forEach((function(e){e.resolve()})),e.Ec.delete(t)}function UN(e,t,n){var r=cw(e),i=r.Tc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function jN(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=Qt(e._c.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.wc.delete(a),n&&e.dc.Pc(a,n)}}catch(o){i.e(o)}finally{i.f()}e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach((function(t){e.Ic.containsKey(t)||VN(e,t)}))}function VN(e,t){e.mc.delete(t.path.canonicalString());var n=e.gc.get(t);null!==n&&(fC(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),zN(e))}function BN(e,t,n){var r,i=Qt(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof hN?(e.Ic.addReference(a.key,t),qN(e,a)):a instanceof dN?(rw("SyncEngine","Document no longer in limbo: "+a.key),e.Ic.removeReference(a.key,t),e.Ic.containsKey(a.key)||VN(e,a.key)):uw()}}catch(o){i.e(o)}finally{i.f()}}function qN(e,t){var n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(rw("SyncEngine","New document in limbo: "+n),e.mc.add(r),zN(e))}function zN(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){var t=e.mc.values().next().value;e.mc.delete(t);var n=new Rw(Nw.fromString(t)),r=e.Ac.next();e.yc.set(r,new yN(n)),e.gc=e.gc.insert(n,r),lC(e.remoteStore,new bS(px(sx(n.path)),r,"TargetPurposeLimboResolution",ib.ct))}}function WN(e,t,n){return KN.apply(this,arguments)}function KN(){return KN=fr(cr().mark((function e(t,n,r){var i,a,o,u;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=cw(t),a=[],o=[],u=[],e.t0=i.wc.isEmpty(),e.t0){e.next=9;break}return i.wc.forEach((function(e,t){u.push(i.Rc(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=lT.Li(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.dc.nu(a),e.next=9,function(){var e=fr(cr().mark((function e(t,n){var r,i,a,o,u,s,c,l;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cw(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Gw.forEach(n,(function(t){return Gw.forEach(t.Fi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Gw.forEach(t.Bi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Jw(e.t0)){e.next=10;break}throw e.t0;case 10:rw("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=Qt(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Ji.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.Ji=r.Ji.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),KN.apply(this,arguments)}function GN(e,t){return HN.apply(this,arguments)}function HN(){return HN=fr(cr().mark((function e(t,n){var r,i;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=cw(t)).currentUser.isEqual(n)){e.next=11;break}return rw("SyncEngine","User change. New user:",n.toKey()),e.next=5,pT(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Ec.forEach((function(e){e.forEach((function(e){e.reject(new fw(lw.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ec.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,WN(r,i.er);case 11:case"end":return e.stop()}}),e)}))),HN.apply(this,arguments)}function QN(e,t){var n=cw(e),r=n.yc.get(t);if(r&&r.fc)return Lx().add(r.key);var i=Lx(),a=n._c.get(t);if(!a)return i;var o,u=Qt(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.wc.get(s);i=i.unionWith(c.view.nc)}}catch(l){u.e(l)}finally{u.f()}return i}function YN(e,t){return $N.apply(this,arguments)}function $N(){return $N=fr(cr().mark((function e(t,n){var r,i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cw(t),e.next=3,ET(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.hc(i),e.abrupt("return",(r.isPrimaryClient&&BN(r,n.targetId,a.cc),a));case 6:case"end":return e.stop()}}),e)}))),$N.apply(this,arguments)}function JN(e,t){return XN.apply(this,arguments)}function XN(){return XN=fr(cr().mark((function e(t,n){var r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cw(t),e.abrupt("return",IT(r.localStore,n).then((function(e){return WN(r,e)})));case 2:case"end":return e.stop()}}),e)}))),XN.apply(this,arguments)}function ZN(e,t,n,r){return eP.apply(this,arguments)}function eP(){return eP=fr(cr().mark((function e(t,n,r,i){var a,o;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=cw(t),e.next=3,function(e,t){var n=cw(e),r=cw(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Sn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Gw.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,TC(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(UN(a,n,i||null),FN(a,n),function(e,t){cw(cw(e).mutationQueue).Cn(t)}(a.localStore,n)):uw();case 11:return e.next=13,WN(a,o);case 13:e.next=16;break;case 15:rw("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),eP.apply(this,arguments)}function tP(e,t){return nP.apply(this,arguments)}function nP(){return nP=fr(cr().mark((function e(t,n){var r,i,a,o,u,s,c,l;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(fP(r=cw(t)),hP(r),!0!==n||!0===r.vc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,rP(r,i.toArray());case 5:return a=e.sent,r.vc=!0,e.next=9,zC(r.remoteStore,!0);case 9:o=Qt(a);try{for(o.s();!(u=o.n()).done;)s=u.value,lC(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.vc){e.next=25;break}return c=[],l=Promise.resolve(),r._c.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return jN(r,t),_T(r.localStore,t,!0)})),fC(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,rP(r,c);case 21:return function(e){var t=cw(e);t.yc.forEach((function(e,n){fC(t.remoteStore,n)})),t.Ic.Ts(),t.yc=new Map,t.gc=new Vb(Rw.comparator)}(r),r.vc=!1,e.next=25,zC(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),nP.apply(this,arguments)}function rP(e,t,n){return iP.apply(this,arguments)}function iP(){return iP=fr(cr().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,y,m;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=cw(t),a=[],o=[],u=Qt(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i._c.get(c))||0===f.length){e.next=34;break}return e.next=11,bT(i.localStore,px(f[0]));case 11:l=e.sent,h=Qt(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.wc.get(p),e.next=20,YN(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,ST(i.localStore,c);case 36:return m=e.sent,e.next=39,bT(i.localStore,m);case 39:return l=e.sent,e.next=42,wN(i,aP(m),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.dc.nu(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),iP.apply(this,arguments)}function aP(e){return ux(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function oP(e){var t=cw(e);return cw(cw(t.localStore).persistence).$i()}function uP(e,t,n,r){return sP.apply(this,arguments)}function sP(){return sP=fr(cr().mark((function e(t,n,r,i){var a,o,u,s;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=cw(t)).vc){e.next=3;break}return e.abrupt("return",void rw("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a._c.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,IT(a.localStore,bx(o[0]));case 10:return u=e.sent,s=RE.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,Qb.EMPTY_BYTE_STRING),e.next=14,WN(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,_T(a.localStore,n,!0);case 17:return jN(a,n,i),e.abrupt("break",20);case 19:uw();case 20:case"end":return e.stop()}}),e)}))),sP.apply(this,arguments)}function cP(e,t,n){return lP.apply(this,arguments)}function lP(){return lP=fr(cr().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=fP(t)).vc){e.next=45;break}a=Qt(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i._c.has(u)){e.next=10;break}return rw("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,ST(i.localStore,u);case 12:return s=e.sent,e.next=15,bT(i.localStore,s);case 15:return c=e.sent,e.next=18,wN(i,aP(s),c.targetId,!1,c.resumeToken);case 18:lC(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=Qt(r),e.prev=30,h=cr().mark((function e(){var t;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i._c.has(t),!e.t0){e.next=5;break}return e.next=5,_T(i.localStore,t,!1).then((function(){fC(i.remoteStore,t),jN(i,t)})).catch(Ww);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),lP.apply(this,arguments)}function fP(e){var t=cw(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=IN.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=QN.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=NN.bind(null,t),t.dc.nu=iN.bind(null,t.eventManager),t.dc.Pc=aN.bind(null,t.eventManager),t}function hP(e){var t=cw(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=AN.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ON.bind(null,t),t}function dP(e,t,n){var r=cw(e);(function(){var e=fr(cr().mark((function e(t,n,r){var i,a,o,u,s;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=cw(e),r=YE(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.qs.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(fN(i)),a=new lN(i,t.localStore,n.serializer),e.next=15,n.bc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.zu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.bc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,WN(t,s.Ju,void 0);case 31:return e.next=33,function(e,t){var n=cw(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.qs.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Hu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(aw("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var pP=function(){function e(){Mt(this,e),this.synchronizeTabs=!1}return Ut(e,[{key:"initialize",value:function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=XT(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return dT(this.persistence,new fT,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new eT(nT.zs,this.serializer)}},{key:"createSharedClientState",value:function(e){return new BT}},{key:"terminate",value:function(){var e=fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),vP=function(e){Vt(n,e);var t=Wt(n);function n(e,r,i){var a;return Mt(this,n),(a=t.call(this)).Vc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return Ut(n,[{key:"initialize",value:function(){var e=fr(cr().mark((function e(t){var r=this;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ns(Bt(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Vc.initialize(this,t);case 4:return e.next=6,hP(this.Vc.syncEngine);case 6:return e.next=8,TC(this.Vc.remoteStore);case 8:return e.next=10,this.persistence.Ii((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return dT(this.persistence,new fT,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new PI(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new rb(t,this.persistence);return new nb(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=cT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?vI.withCacheSize(this.cacheSizeBytes):vI.DEFAULT;return new oT(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,$T(),JT(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new BT}}]),n}(pP),yP=function(e){Vt(n,e);var t=Wt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this,e,r,!1)).Vc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return Ut(n,[{key:"initialize",value:function(){var e=fr(cr().mark((function e(t){var r,i=this;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ns(Bt(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Vc.syncEngine,e.t0=this.sharedClientState instanceof VT,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={jr:ZN.bind(null,r),zr:uP.bind(null,r),Wr:cP.bind(null,r),$i:oP.bind(null,r),Qr:JN.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ii(function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tP(i.Vc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=$T();if(!VT.D(t))throw new fw(lw.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=cT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new VT(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(vP),mP=function(){function e(){Mt(this,e)}return Ut(e,[{key:"initialize",value:function(){var e=fr(cr().mark((function e(t,n){var r=this;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return CN(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=GN.bind(null,this.syncEngine),e.next=12,zC(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new ZC}},{key:"createDatastore",value:function(e){var t,n=XT(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new YT(t));return function(e,t,n,r){return new rC(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return CN(o.syncEngine,e,0)},a=zT.D()?new zT:new qT,new aC(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new mN(e,t,n,r,i,a);return o&&(u.vc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=cw(t),rw("RemoteStore","RemoteStore shutting down."),n.vu.add(5),e.next=5,sC(n);case 5:n.Pu.shutdown(),n.bu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function gP(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return fr(cr().mark((function r(){var i;return cr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var kP=function(){function e(t){Mt(this,e),this.observer=t,this.muted=!1}return Ut(e,[{key:"next",value:function(e){this.observer.next&&this.Sc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Sc(this.observer.error,e):iw("Uncaught Error in snapshot listener:",e.toString())}},{key:"Dc",value:function(){this.muted=!0}},{key:"Sc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),wP=function(){function e(t,n){var r=this;Mt(this,e),this.Cc=t,this.serializer=n,this.metadata=new hw,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then((function(e){e&&e.Qu()?r.metadata.resolve(e.Gu.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Gu))))}),(function(e){return r.metadata.reject(e)}))}return Ut(e,[{key:"close",value:function(){return this.Cc.cancel()}},{key:"getMetadata",value:function(){var e=fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bc",value:function(){var e=fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Nc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Nc",value:function(){var e=fr(cr().mark((function e(){var t,n,r,i;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.kc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.xc.decode(t),r=Number(n),isNaN(r)&&this.Mc("length string (".concat(n,") is not valid number")),e.next=9,this.$c(r);case 9:return i=e.sent,e.abrupt("return",new sN(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"kc",value:function(){var e=fr(cr().mark((function e(){var t,n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Oc()<0)){e.next=7;break}return e.next=3,this.Fc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Oc())<0&&this.Mc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"$c",value:function(){var e=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Fc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Mc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.xc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mc",value:function(e){throw this.Cc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Fc",value:function(){var e=fr(cr().mark((function e(){var t,n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Cc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),bP=function(){function e(t){Mt(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return Ut(e,[{key:"lookup",value:function(){var e=fr(cr().mark((function e(t){var n,r=this;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new fw(lw.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=fr(cr().mark((function e(t,n){var r,i,a,o,u,s;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cw(t),i=nS(r.serializer)+"/documents",a={documents:n.map((function(e){return XE(r.serializer,e)}))},e.next=5,r.vo("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=oS(r.serializer,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());sw(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new yE(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=fr(cr().mark((function e(){var t,n=this;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Rw.fromPath(t);n.mutations.push(new mE(r,n.precondition(r)))})),e.next=7,function(){var e=fr(cr().mark((function e(t,n){var r,i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cw(t),i=nS(r.serializer)+"/documents",a={writes:n.map((function(e){return uS(r.serializer,e)}))},e.next=3,r.Io("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw uw();t=Tw.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new fw(lw.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Tw.min())?tE.exists(!1):tE.updateTime(t):tE.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Tw.min()))throw new fw(lw.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return tE.updateTime(t)}return tE.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),_P=function(){function e(t,n,r,i,a){Mt(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Bc=r.maxAttempts,this.qo=new ZT(this.asyncQueue,"transaction_retry")}return Ut(e,[{key:"run",value:function(){this.Bc-=1,this.Lc()}},{key:"Lc",value:function(){var e=this;this.qo.No(fr(cr().mark((function t(){var n,r;return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new bP(e.datastore),(r=e.qc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Uc(t)}))}))})).catch((function(t){e.Uc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"qc",value:function(e){try{var t=this.updateFunction(e);return!ab(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Uc",value:function(e){var t=this;this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Lc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Kc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!_E(t)}return!1}}]),e}(),xP=function(){function e(t,n,r,i){var a=this;Mt(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Zk.UNAUTHENTICATED,this.clientId=_w.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rw("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return rw("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return Ut(e,[{key:"getConfiguration",value:function(){var e=fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new fw(lw.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new hw;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(fr(cr().mark((function n(){var r;return cr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=QC(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function EP(e,t){return SP.apply(this,arguments)}function SP(){return SP=fr(cr().mark((function e(t,n){var r,i;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),rw("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,pT(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),SP.apply(this,arguments)}function IP(e,t){return TP.apply(this,arguments)}function TP(){return TP=fr(cr().mark((function e(t,n){var r,i;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,NP(t);case 3:return r=e.sent,rw("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return BC(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return BC(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),TP.apply(this,arguments)}function CP(e){return"FirebaseError"===e.name?e.code===lw.FAILED_PRECONDITION||e.code===lw.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function NP(e){return PP.apply(this,arguments)}function PP(){return PP=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return rw("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,EP(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),CP(n=e.t0)){e.next=13;break}throw n;case 13:return aw("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,EP(t,new pP);case 16:e.next=21;break;case 18:return rw("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,EP(t,new pP);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])}))),PP.apply(this,arguments)}function AP(e){return RP.apply(this,arguments)}function RP(){return RP=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return rw("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,IP(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return rw("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,IP(t,new mP);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)}))),RP.apply(this,arguments)}function OP(e){return NP(e).then((function(e){return e.persistence}))}function DP(e){return NP(e).then((function(e){return e.localStore}))}function LP(e){return AP(e).then((function(e){return e.remoteStore}))}function MP(e){return AP(e).then((function(e){return e.syncEngine}))}function FP(e){return AP(e).then((function(e){return e.datastore}))}function UP(e){return jP.apply(this,arguments)}function jP(){return jP=fr(cr().mark((function e(t){var n,r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,AP(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=gN.bind(null,n.syncEngine),r.onUnlisten=_N.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),jP.apply(this,arguments)}function VP(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new hw;return e.asyncQueue.enqueueAndForget(fr(cr().mark((function i(){return cr().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new kP({next:function(a){t.enqueueAndForget((function(){return nN(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new fw(lw.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new fw(lw.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new uN(sx(n.path),a,{includeMetadataChanges:!0,Ku:!0});return eN(e,o)},i.next=3,UP(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function BP(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new hw;return e.asyncQueue.enqueueAndForget(fr(cr().mark((function i(){return cr().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new kP({next:function(n){t.enqueueAndForget((function(){return nN(e,o)})),n.fromCache&&"server"===r.source?i.reject(new fw(lw.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new uN(n,a,{includeMetadataChanges:!0,Ku:!0});return eN(e,o)},i.next=3,UP(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function qP(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var zP=new Map;function WP(e,t,n){if(!n)throw new fw(lw.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function KP(e,t,n,r){if(!0===t&&!0===r)throw new fw(lw.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function GP(e){if(!Rw.isDocumentKey(e))throw new fw(lw.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function HP(e){if(Rw.isDocumentKey(e))throw new fw(lw.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function QP(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":uw()}function YP(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new fw(lw.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=QP(e);throw new fw(lw.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function $P(e,t){if(t<=0)throw new fw(lw.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var JP=function(){function e(t){var n,r;if(Mt(this,e),void 0===t.host){if(void 0!==t.ssl)throw new fw(lw.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new fw(lw.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}KP("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qP(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new fw(lw.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new fw(lw.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new fw(lw.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return Ut(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}]),e}(),XP=function(){function e(t,n,r,i){Mt(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new JP({}),this._settingsFrozen=!1}return Ut(e,[{key:"app",get:function(){if(!this._app)throw new fw(lw.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new fw(lw.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new JP(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new pw;switch(e.type){case"firstParty":return new gw(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new fw(lw.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=zP.get(e);t&&(rw("ComponentProvider","Removing Datastore"),zP.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function ZP(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=YP(e,XP))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==a.host&&a.host!==o&&aw("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){var u,s;if("string"==typeof i.mockUserToken)u=i.mockUserToken,s=Zk.MOCK_USER;else{u=Qa(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new fw(lw.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new Zk(c)}e._authCredentials=new vw(new dw(u,s))}}var eA=function(){function e(t,n,r){Mt(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return Ut(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new nA(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),tA=function(){function e(t,n,r){Mt(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return Ut(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),nA=function(e){Vt(n,e);var t=Wt(n);function n(e,r,i){var a;return Mt(this,n),(a=t.call(this,e,r,sx(i)))._path=i,a.type="collection",a}return Ut(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new eA(this.firestore,null,new Rw(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(tA);function rA(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Co(e),WP("collection","path",t),e instanceof XP){var a=Nw.fromString.apply(Nw,[t].concat(r));return HP(a),new nA(e,null,a)}if(!(e instanceof eA||e instanceof nA))throw new fw(lw.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Nw.fromString.apply(Nw,[t].concat(r)));return HP(o),new nA(e.firestore,null,o)}function iA(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Co(e),1===arguments.length&&(t=_w.A()),WP("doc","path",t),e instanceof XP){var a=Nw.fromString.apply(Nw,[t].concat(r));return GP(a),new eA(e,null,new Rw(a))}if(!(e instanceof eA||e instanceof nA))throw new fw(lw.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Nw.fromString.apply(Nw,[t].concat(r)));return GP(o),new eA(e.firestore,e instanceof nA?e.converter:null,new Rw(o))}function aA(e,t){return e=Co(e),t=Co(t),(e instanceof eA||e instanceof nA)&&(t instanceof eA||t instanceof nA)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function oA(e,t){return e=Co(e),t=Co(t),e instanceof tA&&t instanceof tA&&e.firestore===t.firestore&&mx(e._query,t._query)&&e.converter===t.converter}var uA=function(){function e(){var t=this;Mt(this,e),this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new ZT(this,"async_queue_retry"),this.Xc=function(){var e=JT();e&&rw("AsyncQueue","Visibility state changed to "+e.visibilityState),t.qo.Mo()};var n=JT();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Xc)}return Ut(e,[{key:"isShuttingDown",get:function(){return this.jc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Zc(),this.ta(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;var t=JT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Zc(),this.jc)return new Promise((function(){}));var n=new hw;return this.ta((function(){return t.jc&&t.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Qc.push(e),t.ea()}))}},{key:"ea",value:function(){var e=fr(cr().mark((function e(){var t=this;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Qc.length){e.next=14;break}return e.prev=1,e.next=4,this.Qc[0]();case 4:this.Qc.shift(),this.qo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Jw(e.t0)){e.next=12;break}throw e.t0;case 12:rw("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Qc.length>0&&this.qo.No((function(){return t.ea()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"ta",value:function(e){var t=this,n=this.Gc.then((function(){return t.Hc=!0,e().catch((function(e){t.Wc=e,t.Hc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw iw("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Hc=!1,e}))}));return this.Gc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);var i=HC.createAndSchedule(this,e,t,n,(function(e){return r.na(e)}));return this.zc.push(i),i}},{key:"Zc",value:function(){this.Wc&&uw()}},{key:"verifyOperationInProgress",value:function(){}},{key:"sa",value:function(){var e=fr(cr().mark((function e(){var t;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Gc,e.next=3,t;case 3:if(t!==this.Gc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ia",value:function(e){var t,n=Qt(this.zc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ra",value:function(e){var t=this;return this.sa().then((function(){t.zc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=Qt(t.zc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.sa()}))}},{key:"oa",value:function(e){this.Yc.push(e)}},{key:"na",value:function(e){var t=this.zc.indexOf(e);this.zc.splice(t,1)}}]),e}();function sA(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=Qt(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var cA=function(){function e(){Mt(this,e),this._progressObserver={},this._taskCompletionResolver=new hw,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return Ut(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),lA=function(e){Vt(n,e);var t=Wt(n);function n(e,r,i,a){var o;return Mt(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new uA,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return Ut(n,[{key:"_terminate",value:function(){return this._firestoreClient||hA(this),this._firestoreClient.terminate()}}]),n}(XP);function fA(e){return e._firestoreClient||hA(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function hA(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new n_(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,qP(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new xP(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function dA(e,t,n){var r=new hw;return e.asyncQueue.enqueue(fr(cr().mark((function i(){var a;return cr().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,EP(e,n);case 3:return i.next=5,IP(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),CP(a=i.t0)){i.next=13;break}throw a;case 13:aw("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function pA(e){return function(e){return e.asyncQueue.enqueue(fr(cr().mark((function t(){var n,r;return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,OP(e);case 2:return n=t.sent,t.next=5,LP(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=cw(e);return t.vu.delete(0),oC(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(fA(e=YP(e,lA)))}function vA(e){return function(e){return e.asyncQueue.enqueue(fr(cr().mark((function t(){var n,r;return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,OP(e);case 2:return n=t.sent,t.next=5,LP(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=cw(t)).vu.add(0),e.next=4,sC(n);case 4:n.bu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(fA(e=YP(e,lA)))}function yA(e,t){var n=fA(e=YP(e,lA)),r=new cA;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new wP(e,t)}(function(e,t){if(e instanceof Uint8Array)return gP(e,t);if(e instanceof ArrayBuffer)return gP(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?IE().encode(e):e),t)}(n,XT(t));e.asyncQueue.enqueueAndForget(fr(cr().mark((function t(){return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=dP,t.next=3,MP(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function mA(e,t){return function(e,t){return e.asyncQueue.enqueue(fr(cr().mark((function n(){return cr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=cw(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.qs.getNamedQuery(e,t)}))},n.next=3,DP(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(fA(e=YP(e,lA)),t).then((function(t){return t?new tA(e,null,t.query):null}))}function gA(e){if(e._initialized||e._terminated)throw new fw(lw.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var kA=function(){function e(t){Mt(this,e),this._byteString=t}return Ut(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Qb.fromBase64String(t))}catch(t){throw new fw(lw.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Qb.fromUint8Array(t))}}]),e}(),wA=function(){function e(){Mt(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new fw(lw.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Aw(n)}return Ut(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var bA=Ut((function e(t){Mt(this,e),this._methodName=t})),_A=function(){function e(t,n){if(Mt(this,e),!isFinite(t)||t<-90||t>90)throw new fw(lw.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new fw(lw.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Ut(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return xw(this._lat,e._lat)||xw(this._long,e._long)}}]),e}(),xA=/^__.*__$/,EA=function(){function e(t,n,r){Mt(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Ut(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new lE(e,this.data,this.fieldMask,t,this.fieldTransforms):new cE(e,this.data,t,this.fieldTransforms)}}]),e}(),SA=function(){function e(t,n,r){Mt(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Ut(e,[{key:"toMutation",value:function(e,t){return new lE(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function IA(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw uw()}}var TA=function(){function e(t,n,r,i,a,o){Mt(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return Ut(e,[{key:"path",get:function(){return this.settings.path}},{key:"ca",get:function(){return this.settings.ca}},{key:"aa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ha",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}},{key:"da",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}},{key:"wa",value:function(e){return this.aa({path:void 0,la:!0})}},{key:"_a",value:function(e){return HA(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"ua",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.fa(this.path.get(e))}},{key:"fa",value:function(e){if(0===e.length)throw this._a("Document fields must not be empty");if(IA(this.ca)&&xA.test(e))throw this._a('Document fields cannot begin and end with "__"')}}]),e}(),CA=function(){function e(t,n,r){Mt(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||XT(t)}return Ut(e,[{key:"ya",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new TA({ca:e,methodName:t,ga:n,path:Aw.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function NA(e){var t=e._freezeSettings(),n=XT(e._databaseId);return new CA(e._databaseId,!!t.ignoreUndefinedProperties,n)}function PA(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ya(a.merge||a.mergeFields?2:0,t,n,i);zA("Data must be an object, but it was:",o,r);var u,s,c=BA(r,o);if(a.merge)u=new Gb(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=Qt(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=WA(t,l.value,n);if(!o.contains(d))throw new fw(lw.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));QA(f,d)||f.push(d)}}catch(p){h.e(p)}finally{h.f()}u=new Gb(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new EA(new S_(c),u,s)}var AA=function(e){Vt(n,e);var t=Wt(n);function n(){return Mt(this,n),t.apply(this,arguments)}return Ut(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ca)throw 1===e.ca?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(bA);function RA(e,t,n){return new TA({ca:3,ga:t.settings.ga,methodName:e._methodName,la:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var OA=function(e){Vt(n,e);var t=Wt(n);function n(){return Mt(this,n),t.apply(this,arguments)}return Ut(n,[{key:"_toFieldTransform",value:function(e){return new Zx(e.path,new Kx)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(bA),DA=function(e){Vt(n,e);var t=Wt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this,e)).pa=r,i}return Ut(n,[{key:"_toFieldTransform",value:function(e){var t=RA(this,e,!0),n=this.pa.map((function(e){return VA(e,t)})),r=new Gx(n);return new Zx(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(bA),LA=function(e){Vt(n,e);var t=Wt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this,e)).pa=r,i}return Ut(n,[{key:"_toFieldTransform",value:function(e){var t=RA(this,e,!0),n=this.pa.map((function(e){return VA(e,t)})),r=new Qx(n);return new Zx(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(bA),MA=function(e){Vt(n,e);var t=Wt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this,e)).Ia=r,i}return Ut(n,[{key:"_toFieldTransform",value:function(e){var t=new $x(e.serializer,Vx(e.serializer,this.Ia));return new Zx(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(bA);function FA(e,t,n,r){var i=e.ya(1,t,n);zA("Data must be an object, but it was:",i,r);var a=[],o=S_.empty();Ub(r,(function(e,r){var u=GA(t,e,n);r=Co(r);var s=i.da(u);if(r instanceof AA)a.push(u);else{var c=VA(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Gb(a);return new SA(o,u,i.fieldTransforms)}function UA(e,t,n,r,i,a){var o=e.ya(1,t,n),u=[WA(t,r,n)],s=[i];if(a.length%2!=0)throw new fw(lw.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(WA(t,a[c])),s.push(a[c+1]);for(var l=[],f=S_.empty(),h=u.length-1;h>=0;--h)if(!QA(l,u[h])){var d=u[h],p=s[h];p=Co(p);var v=o.da(d);if(p instanceof AA)l.push(d);else{var y=VA(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new Gb(l);return new SA(f,m,o.fieldTransforms)}function jA(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return VA(n,e.ya(r?4:3,t))}function VA(e,t){if(qA(e=Co(e)))return zA("Unsupported field value:",t,e),BA(e,t);if(e instanceof bA)return function(e,t){if(!IA(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=Qt(e);try{for(a.s();!(n=a.n()).done;){var o=VA(n.value,t.wa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Co(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Vx(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Iw.fromDate(e);return{timestampValue:GE(t.serializer,n)}}if(e instanceof Iw){var r=new Iw(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:GE(t.serializer,r)}}if(e instanceof _A)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof kA)return{bytesValue:HE(t.serializer,e._byteString)};if(e instanceof eA){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t._a("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:$E(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(QP(e)))}(e,t)}function BA(e,t){var n={};return jb(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ub(e,(function(e,r){var i=VA(r,t.ha(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function qA(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Iw||e instanceof _A||e instanceof kA||e instanceof eA||e instanceof bA)}function zA(e,t,n){if(!qA(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=QP(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function WA(e,t,n){if((t=Co(t))instanceof wA)return t._internalPath;if("string"==typeof t)return GA(e,t);throw HA("Field path arguments must be of type string or ",e,!1,void 0,n)}var KA=new RegExp("[~\\*/\\[\\]]");function GA(e,t,n){if(t.search(KA)>=0)throw HA("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return Kt(wA,Lt(t.split(".")))._internalPath}catch(V){throw HA("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function HA(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new fw(lw.INVALID_ARGUMENT,u+e+s)}function QA(e,t){return e.some((function(e){return e.isEqual(t)}))}var YA=function(){function e(t,n,r,i,a){Mt(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return Ut(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new eA(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new $A(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(JA("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),$A=function(e){Vt(n,e);var t=Wt(n);function n(){return Mt(this,n),t.apply(this,arguments)}return Ut(n,[{key:"data",value:function(){return ns(Bt(n.prototype),"data",this).call(this)}}]),n}(YA);function JA(e,t){return"string"==typeof t?GA(e,t):t instanceof wA?t._internalPath:t._delegate._internalPath}function XA(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new fw(lw.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ZA=Ut((function e(){Mt(this,e)})),eR=function(e){Vt(n,e);var t=Wt(n);function n(){return Mt(this,n),t.apply(this,arguments)}return Ut(n)}(ZA);function tR(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof ZA&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof rR})).length,n=e.filter((function(e){return e instanceof nR})).length;if(t>1||t>0&&n>0)throw new fw(lw.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=Qt(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var nR=function(e){Vt(n,e);var t=Wt(n);function n(e,r,i){var a;return Mt(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return Ut(n,[{key:"_apply",value:function(e){var t=this._parse(e);return vR(e._query,t),new tA(e.firestore,e.converter,vx(e._query,t))}},{key:"_parse",value:function(e){var t=NA(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new fw(lw.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){pR(o,a);var s,c=[],l=Qt(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(dR(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=dR(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||pR(o,a),u=jA(n,"where",o,"in"===a||"not-in"===a);return D_.create(i,a,u)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(eR);var rR=function(e){Vt(n,e);var t=Wt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return Ut(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:L_.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=Qt(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;vR(r,a),r=vx(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new tA(e.firestore,e.converter,vx(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(ZA);var iR=function(e){Vt(n,e);var t=Wt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return Ut(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new fw(lw.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new fw(lw.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new A_(t,n);return function(e,t){if(null===lx(e)){var n=fx(e);null!==n&&yR(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new tA(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new ox(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(eR);var aR=function(e){Vt(n,e);var t=Wt(n);function n(e,r,i){var a;return Mt(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return Ut(n,[{key:"_apply",value:function(e){return new tA(e.firestore,e.converter,yx(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(eR);var oR=function(e){Vt(n,e);var t=Wt(n);function n(e,r,i){var a;return Mt(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return Ut(n,[{key:"_apply",value:function(e){var t=hR(e,this.type,this._docOrFields,this._inclusive);return new tA(e.firestore,e.converter,function(e,t){return new ox(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(eR);function uR(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return oR._create("startAt",t,!0)}function sR(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return oR._create("startAfter",t,!1)}var cR=function(e){Vt(n,e);var t=Wt(n);function n(e,r,i){var a;return Mt(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return Ut(n,[{key:"_apply",value:function(e){var t=hR(e,this.type,this._docOrFields,this._inclusive);return new tA(e.firestore,e.converter,function(e,t){return new ox(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(eR);function lR(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return cR._create("endBefore",t,!1)}function fR(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return cR._create("endAt",t,!0)}function hR(e,t,n,r){if(n[0]=Co(n[0]),n[0]instanceof YA)return function(e,t,n,r,i){if(!r)throw new fw(lw.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=Qt(dx(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(d_(t,r.key));else{var c=r.data.field(s.field);if(Zb(c))throw new fw(lw.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new fw(lw.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new C_(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=NA(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new fw(lw.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new fw(lw.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!hx(e)&&-1!==c.indexOf("/"))throw new fw(lw.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Nw.fromString(c));if(!Rw.isDocumentKey(l))throw new fw(lw.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Rw(l);u.push(d_(t,f))}else{var h=jA(n,r,c);u.push(h)}}return new C_(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function dR(e,t,n){if("string"==typeof(n=Co(n))){if(""===n)throw new fw(lw.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hx(t)&&-1!==n.indexOf("/"))throw new fw(lw.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Nw.fromString(n));if(!Rw.isDocumentKey(r))throw new fw(lw.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return d_(e,new Rw(r))}if(n instanceof eA)return d_(e,n._key);throw new fw(lw.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(QP(n),"."))}function pR(e,t){if(!Array.isArray(e)||0===e.length)throw new fw(lw.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function vR(e,t){if(t.isInequality()){var n=fx(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new fw(lw.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=lx(e);null!==i&&yR(e,r,i)}var a=function(e,t){var n,r=Qt(e);try{for(r.s();!(n=r.n()).done;){var i,a=Qt(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new fw(lw.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new fw(lw.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function yR(e,t,n){if(!n.isEqual(t))throw new fw(lw.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var mR=function(){function e(){Mt(this,e)}return Ut(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(o_(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Jb(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xb(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw uw()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return Ub(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new _A(Jb(e.latitude),Jb(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=e_(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(t_(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=$b(e);return new Iw(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Nw.fromString(e);sw(wS(n));var r=new r_(n.get(1),n.get(3)),i=new Rw(n.popFirst(5));return r.isEqual(t)||iw("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function gR(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var kR=function(e){Vt(n,e);var t=Wt(n);function n(e){var r;return Mt(this,n),(r=t.call(this)).firestore=e,r}return Ut(n,[{key:"convertBytes",value:function(e){return new kA(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new eA(this.firestore,null,t)}}]),n}(mR);var wR=function(){function e(t,n){Mt(this,e),this.hasPendingWrites=t,this.fromCache=n}return Ut(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),bR=function(e){Vt(n,e);var t=Wt(n);function n(e,r,i,a,o,u){var s;return Mt(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return Ut(n,[{key:"exists",value:function(){return ns(Bt(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new _R(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(JA("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(YA),_R=function(e){Vt(n,e);var t=Wt(n);function n(){return Mt(this,n),t.apply(this,arguments)}return Ut(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ns(Bt(n.prototype),"data",this).call(this,e)}}]),n}(bR),xR=function(){function e(t,n,r,i){Mt(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new wR(i.hasPendingWrites,i.fromCache),this.query=r}return Ut(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new _R(n._firestore,n._userDataWriter,r.key,r,new wR(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new fw(lw.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new _R(e._firestore,e._userDataWriter,t.doc.key,t.doc,new wR(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new _R(e._firestore,e._userDataWriter,t.doc.key,t.doc,new wR(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:ER(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function ER(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return uw()}}function SR(e,t){return e instanceof bR&&t instanceof bR?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof xR&&t instanceof xR&&e._firestore===t._firestore&&oA(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var IR=function(e){Vt(n,e);var t=Wt(n);function n(e){var r;return Mt(this,n),(r=t.call(this)).firestore=e,r}return Ut(n,[{key:"convertBytes",value:function(e){return new kA(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new eA(this.firestore,null,t)}}]),n}(mR);function TR(e){e=YP(e,eA);var t=YP(e.firestore,lA),n=fA(t),r=new IR(t);return function(e,t){var n=new hw;return e.asyncQueue.enqueueAndForget(fr(cr().mark((function r(){return cr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=fr(cr().mark((function e(t,n,r){var i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=cw(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new fw(lw.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=QC(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,DP(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new bR(t,r,e._key,n,new wR(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function CR(e){e=YP(e,tA);var t=YP(e.firestore,lA),n=fA(t),r=new IR(t);return function(e,t){var n=new hw;return e.asyncQueue.enqueueAndForget(fr(cr().mark((function r(){return cr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=fr(cr().mark((function e(t,n,r){var i,a,o,u,s;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ET(t,n,!0);case 3:i=e.sent,a=new pN(n,i.ir),o=a.sc(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=QC(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,DP(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new xR(t,r,e,n)}))}function NR(e,t,n){e=YP(e,eA);var r=YP(e.firestore,lA),i=gR(e.converter,t,n);return OR(r,[PA(NA(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,tE.none())])}function PR(e,t,n){e=YP(e,eA);for(var r=YP(e.firestore,lA),i=NA(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return OR(r,[("string"==typeof(t=Co(t))||t instanceof wA?UA(i,"updateDoc",e._key,t,n,o):FA(i,"updateDoc",e._key,t)).toMutation(e._key,tE.exists(!0))])}function AR(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Co(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||sA(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(sA(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof eA)l=YP(e.firestore,lA),f=sx(e._key.path),c={next:function(t){n[s]&&n[s](DR(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=YP(e,tA);l=YP(p.firestore,lA),f=p._query;var v=new IR(l);c={next:function(e){n[s]&&n[s](new xR(l,v,p,e))},error:n[s+1],complete:n[s+2]},XA(e._query)}return function(e,t,n,r){var i=new kP(r),a=new uN(t,i,n);return e.asyncQueue.enqueueAndForget(fr(cr().mark((function t(){return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=eN,t.next=3,UP(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Dc(),e.asyncQueue.enqueueAndForget(fr(cr().mark((function t(){return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=nN,t.next=3,UP(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(fA(l),f,h,c)}function RR(e,t){return function(e,t){var n=new kP(t);return e.asyncQueue.enqueueAndForget(fr(cr().mark((function t(){return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){cw(e).ku.add(t),t.next()},t.next=3,UP(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Dc(),e.asyncQueue.enqueueAndForget(fr(cr().mark((function t(){return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){cw(e).ku.delete(t)},t.next=3,UP(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(fA(e=YP(e,lA)),sA(t)?t:{next:t})}function OR(e,t){return function(e,t){var n=new hw;return e.asyncQueue.enqueueAndForget(fr(cr().mark((function r(){return cr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=EN,r.next=3,MP(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(fA(e),t)}function DR(e,t,n){var r=n.docs.get(t._key),i=new IR(e);return new bR(e,i,t._key,r,new wR(n.hasPendingWrites,n.fromCache),t.converter)}var LR={maxAttempts:5},MR=function(){function e(t,n){Mt(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=NA(t)}return Ut(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=FR(e,this._firestore),i=gR(r.converter,t,n),a=PA(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,tE.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=FR(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Co(t))||t instanceof wA?UA(this._dataReader,"WriteBatch.update",i._key,t,n,o):FA(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,tE.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=FR(e,this._firestore);return this._mutations=this._mutations.concat(new yE(t._key,tE.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new fw(lw.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function FR(e,t){if((e=Co(e)).firestore!==t)throw new fw(lw.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var UR=function(e){Vt(n,e);var t=Wt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this,e,r))._firestore=e,i}return Ut(n,[{key:"get",value:function(e){var t=this,r=FR(e,this._firestore),i=new IR(this._firestore);return ns(Bt(n.prototype),"get",this).call(this,e).then((function(e){return new bR(t._firestore,i,r._key,e._document,new wR(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){Mt(this,e),this._firestore=t,this._transaction=n,this._dataReader=NA(t)}return Ut(e,[{key:"get",value:function(e){var t=this,n=FR(e,this._firestore),r=new kR(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return uw();var i=e[0];if(i.isFoundDocument())return new YA(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new YA(t._firestore,r,n._key,null,n.converter);throw uw()}))}},{key:"set",value:function(e,t,n){var r=FR(e,this._firestore),i=gR(r.converter,t,n),a=PA(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=FR(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Co(t))||t instanceof wA?UA(this._dataReader,"Transaction.update",i._key,t,n,o):FA(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=FR(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function jR(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new DA("arrayUnion",t)}function VR(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new LA("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){ew=e}(xu),yu(new No("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new lA(new yw(e.getProvider("auth-internal")),new ww(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new fw(lw.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new r_(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Nu(Xk,"3.13.0",e),Nu(Xk,"3.13.0","esm2017")}();function BR(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new fw("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function qR(){if("undefined"===typeof Uint8Array)throw new fw("unimplemented","Uint8Arrays are not available in this environment.")}function zR(){if("undefined"==typeof atob)throw new fw("unimplemented","Blobs are unavailable in Firestore in this environment.")}var WR=function(){function e(t){Mt(this,e),this._delegate=t}return Ut(e,[{key:"toBase64",value:function(){return zR(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return qR(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return zR(),new e(kA.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return qR(),new e(kA.fromUint8Array(t))}}]),e}();function KR(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=Qt(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var GR=function(){function e(){Mt(this,e)}return Ut(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){gA(e=YP(e,lA));var n=fA(e);if(n._uninitializedComponentsProvider)throw new fw(lw.FAILED_PRECONDITION,"SDK cache is already specified.");aw("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new mP;return dA(n,i,new vP(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){gA(e=YP(e,lA));var t=fA(e);if(t._uninitializedComponentsProvider)throw new fw(lw.FAILED_PRECONDITION,"SDK cache is already specified.");aw("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new mP;return dA(t,r,new yP(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new fw(lw.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new hw;return e._queue.enqueueAndForgetEvenWhileRestricted(fr(cr().mark((function n(){return cr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Qw.D()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Qw.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(cT(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),HR=function(){function e(t,n,r){var i=this;Mt(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof r_||(this._appCompat=t)}return Ut(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||aw("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ZP(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return pA(this._delegate)}},{key:"disableNetwork",value:function(){return vA(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&KP("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new hw;return e.asyncQueue.enqueueAndForget(fr(cr().mark((function n(){return cr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=LN,n.next=3,MP(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(fA(e=YP(e,lA)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return RR(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new fw("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new uO(this,rA(this._delegate,e))}catch(t){throw ZR(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new XR(this,iA(this._delegate,e))}catch(t){throw ZR(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new iO(this,function(e,t){if(e=YP(e,XP),WP("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new fw(lw.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new tA(e,null,function(e){return new ox(Nw.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw ZR(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=YP(e,lA);var r=Object.assign(Object.assign({},LR),n);return function(e){if(e.maxAttempts<1)throw new fw(lw.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new hw;return e.asyncQueue.enqueueAndForget(fr(cr().mark((function i(){var a;return cr().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,FP(e);case 2:a=i.sent,new _P(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(fA(e),(function(n){return t(new UR(e,n))}),r)}(this._delegate,(function(n){return e(new YR(t,n))}))}},{key:"batch",value:function(){var e=this;return fA(this._delegate),new $R(new MR(this._delegate,(function(t){return OR(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return yA(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return mA(this._delegate,e).then((function(e){return e?new iO(t,e):null}))}}]),e}(),QR=function(e){Vt(n,e);var t=Wt(n);function n(e){var r;return Mt(this,n),(r=t.call(this)).firestore=e,r}return Ut(n,[{key:"convertBytes",value:function(e){return new WR(new kA(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return XR.forKey(t,this.firestore,null)}}]),n}(mR);var YR=function(){function e(t,n){Mt(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new QR(t)}return Ut(e,[{key:"get",value:function(e){var t=this,n=sO(e);return this._delegate.get(n).then((function(e){return new nO(t._firestore,new bR(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=sO(e);return n?(BR("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=sO(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=sO(e);return this._delegate.delete(t),this}}]),e}(),$R=function(){function e(t){Mt(this,e),this._delegate=t}return Ut(e,[{key:"set",value:function(e,t,n){var r=sO(e);return n?(BR("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=sO(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=sO(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),JR=function(){function e(t,n,r){Mt(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return Ut(e,[{key:"fromFirestore",value:function(e,t){var n=new _R(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new rO(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new QR(t),n),i.set(n,a)),a}}]),e}();JR.INSTANCES=new WeakMap;var XR=function(){function e(t,n){Mt(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new QR(t)}return Ut(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new uO(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new uO(this.firestore,rA(this._delegate,e))}catch(t){throw ZR(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Co(e))instanceof eA&&aA(this._delegate,e)}},{key:"set",value:function(e,t){t=BR("DocumentReference.set",t);try{return t?NR(this._delegate,e,t):NR(this._delegate,e)}catch(n){throw ZR(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?PR(this._delegate,e):PR.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw ZR(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return OR(YP(e.firestore,lA),[new yE(e._key,tE.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=eO(n),a=tO(n,(function(t){return new nO(e.firestore,new bR(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return AR(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?TR(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=YP(e,eA);var t=YP(e.firestore,lA);return VP(fA(t),e._key,{source:"server"}).then((function(n){return DR(t,e,n)}))}(this._delegate):function(e){e=YP(e,eA);var t=YP(e.firestore,lA);return VP(fA(t),e._key).then((function(n){return DR(t,e,n)}))}(this._delegate),t.then((function(e){return new nO(n.firestore,new bR(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(JR.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new fw("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new eA(n._delegate,r,new Rw(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new eA(n._delegate,r,t))}}]),e}();function ZR(e,t,n){return e.message=e.message.replace(t,n),e}function eO(e){var t,n=Qt(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!KR(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function tO(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=KR(e[0])?e[0]:KR(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var nO=function(){function e(t,n){Mt(this,e),this._firestore=t,this._delegate=n}return Ut(e,[{key:"ref",get:function(){return new XR(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return SR(this._delegate,e._delegate)}}]),e}(),rO=function(e){Vt(n,e);var t=Wt(n);function n(){return Mt(this,n),t.apply(this,arguments)}return Ut(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||uw()}(void 0!==t),t}}]),n}(nO),iO=function(){function e(t,n){Mt(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new QR(t)}return Ut(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,tR(this._delegate,function(e,t,n){var r=t,i=JA("where",e);return nR._create(i,r,n)}(t,n,r)))}catch(i){throw ZR(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,tR(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=JA("orderBy",e);return iR._create(n,t)}(t,n)))}catch(r){throw ZR(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,tR(this._delegate,function(e){return $P("limit",e),aR._create("limit",e,"F")}(t)))}catch(n){throw ZR(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,tR(this._delegate,function(e){return $P("limitToLast",e),aR._create("limitToLast",e,"L")}(t)))}catch(n){throw ZR(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,tR(this._delegate,uR.apply(void 0,arguments)))}catch(t){throw ZR(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,tR(this._delegate,sR.apply(void 0,arguments)))}catch(t){throw ZR(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,tR(this._delegate,lR.apply(void 0,arguments)))}catch(t){throw ZR(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,tR(this._delegate,fR.apply(void 0,arguments)))}catch(t){throw ZR(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return oA(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?CR(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=YP(e,tA);var t=YP(e.firestore,lA),n=fA(t),r=new IR(t);return BP(n,e._query,{source:"server"}).then((function(n){return new xR(t,r,e,n)}))}(this._delegate):function(e){e=YP(e,tA);var t=YP(e.firestore,lA),n=fA(t),r=new IR(t);return XA(e._query),BP(n,e._query).then((function(n){return new xR(t,r,e,n)}))}(this._delegate),t.then((function(e){return new oO(n.firestore,new xR(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=eO(n),a=tO(n,(function(t){return new oO(e.firestore,new xR(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return AR(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(JR.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),aO=function(){function e(t,n){Mt(this,e),this._firestore=t,this._delegate=n}return Ut(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new rO(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),oO=function(){function e(t,n){Mt(this,e),this._firestore=t,this._delegate=n}return Ut(e,[{key:"query",get:function(){return new iO(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new rO(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new aO(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new rO(n._firestore,r))}))}},{key:"isEqual",value:function(e){return SR(this._delegate,e._delegate)}}]),e}(),uO=function(e){Vt(n,e);var t=Wt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return Ut(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new XR(this.firestore,e):null}},{key:"doc",value:function(e){try{return new XR(this.firestore,void 0===e?iA(this._delegate):iA(this._delegate,e))}catch(t){throw ZR(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=YP(e.firestore,lA),r=iA(e),i=gR(e.converter,t);return OR(n,[PA(NA(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,tE.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new XR(t.firestore,e)}))}},{key:"isEqual",value:function(e){return aA(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(JR.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(iO);function sO(e){return YP(e,eA)}var cO=function(){function e(){Mt(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=Kt(wA,n)}return Ut(e,[{key:"isEqual",value:function(e){return(e=Co(e))instanceof wA&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Aw.keyField().canonicalString())}}]),e}(),lO=function(){function e(t){Mt(this,e),this._delegate=t}return Ut(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new OA("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new AA("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=jR.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=VR.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new MA("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),fO={Firestore:HR,GeoPoint:_A,Timestamp:Iw,Blob:WR,Transaction:YR,WriteBatch:$R,DocumentReference:XR,DocumentSnapshot:nO,Query:iO,QueryDocumentSnapshot:rO,QuerySnapshot:oO,CollectionReference:uO,FieldPath:cO,FieldValue:lO,setLogLevel:function(e){!function(e){tw.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new No("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},fO)))}(e,(function(e,t){return new HR(e,t,new GR)})),e.registerVersion("@firebase/firestore-compat","0.3.12")}(ts);var hO="@firebase/database",dO="0.14.4",pO="";function vO(e){pO=e}var yO=function(){function e(t){Mt(this,e),this.domStorage_=t,this.prefix_="firebase:"}return Ut(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),uo(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:oo(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),mO=function(){function e(){Mt(this,e),this.cache_={},this.isInMemoryStorage=!0}return Ut(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return co(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),gO=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new yO(t)}}catch(n){}return new mO},kO=gO("localStorage"),wO=gO("sessionStorage"),bO=new Vo("@firebase/database"),_O=function(){var e=1;return function(){return e++}}(),xO=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,La(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new ko;n.update(t);var r=n.digest();return Ua.encodeByteArray(r)},EO=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?uo(r):r,t+=" "}return t},SO=null,IO=!0,TO=function(e,t){La(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(bO.logLevel=Oo.VERBOSE,SO=bO.log.bind(bO),t&&wO.set("logging_enabled",!0)):"function"===typeof e?SO=e:(SO=null,wO.remove("logging_enabled"))},CO=function(){if(!0===IO&&(IO=!1,null===SO&&!0===wO.get("logging_enabled")&&TO(!0)),SO){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=EO.apply(null,t);SO(r)}},NO=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];CO.apply(void 0,[e].concat(n))}},PO=function(){var e="FIREBASE INTERNAL ERROR: "+EO.apply(void 0,arguments);bO.error(e)},AO=function(){var e="FIREBASE FATAL ERROR: ".concat(EO.apply(void 0,arguments));throw bO.error(e),new Error(e)},RO=function(){var e="FIREBASE WARNING: "+EO.apply(void 0,arguments);bO.warn(e)},OO=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},DO="[MIN_NAME]",LO="[MAX_NAME]",MO=function(e,t){if(e===t)return 0;if(e===DO||t===LO)return-1;if(t===DO||e===LO)return 1;var n=WO(e),r=WO(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},FO=function(e,t){return e===t?0:e<t?-1:1},UO=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+uo(t))},jO=function e(t){if("object"!==typeof t||null===t)return uo(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=uo(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},VO=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function BO(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var qO=function(e){La(!OO(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var u=[];for(a=52;a;a-=1)u.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)u.push(n%2?1:0),n=Math.floor(n/2);u.push(t?1:0),u.reverse();var s=u.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(s.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var zO=new RegExp("^-?(0*)\\d{1,10}$"),WO=function(e){if(zO.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},KO=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw RO("Exception was thrown by user callback.",e),t}),Math.floor(0))}},GO=function(e,t){var n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n},HO=function(){function e(t,n){var r=this;Mt(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return Ut(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){RO('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),QO=function(){function e(t,n,r){var i=this;Mt(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return Ut(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(CO("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',RO(e)}}]),e}(),YO=function(){function e(t){Mt(this,e),this.accessToken=t}return Ut(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();YO.OWNER="owner";var $O="5",JO=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,XO="ac",ZO="websocket",eD="long_polling",tD=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];Mt(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=u,this.isUsingEmulator=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=kO.get("host:"+t)||this._host}return Ut(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&kO.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function nD(e,t,n){var r;if(La("string"===typeof t,"typeof type must == string"),La("object"===typeof n,"typeof params must == object"),t===ZO)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==eD)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return BO(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var rD=function(){function e(){Mt(this,e),this.counters_={}}return Ut(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;co(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return za(void 0,this.counters_)}}]),e}(),iD={},aD={};function oD(e){var t=e.toString();return iD[t]||(iD[t]=new rD),iD[t]}var uD=function(){function e(t){Mt(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return Ut(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&KO((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),sD="start",cD=function(){function e(t,n,r,i,a,o,u){var s=this;Mt(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=NO(t),this.stats_=oD(n),this.urlFn=function(e){return s.appCheckToken&&(e[XO]=s.appCheckToken),nD(n,eD,e)}}return Ut(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new uD(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(to()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new lD((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===sD)n.id=a,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={};e[sD]="t",e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=$O,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e[XO]=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&JO.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=uo(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=Va(t),r=VO(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!to()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=uo(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!to()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),lD=function(){function e(t,n,r,i){if(Mt(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,to())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=_O(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(u){CO("frame writing exception"),u.stack&&CO(u.stack),CO(u)}}}return Ut(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;to()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){CO("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||CO("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),fD=null;"undefined"!==typeof MozWebSocket?fD=MozWebSocket:"undefined"!==typeof WebSocket&&(fD=WebSocket);var hD=function(){function e(t,n,r,i,a,o,u){Mt(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=NO(this.connId),this.stats_=oD(n),this.connURL=e.connectionURL_(n,o,u,i,r),this.nodeAdmin=n.nodeAdmin}return Ut(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,kO.set("previous_websocket_failure",!0);try{var r;if(to()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat($O,"/").concat(pO,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/BunnuFlix",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new fD(this.connURL,[],r)}catch(s){this.log_("Error instantiating WebSocket.");var u=s.message||s.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){kO.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=oo(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(La(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=uo(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=VO(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=$O,!to()&&"undefined"!==typeof location&&location.hostname&&JO.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a[XO]=r),i&&(a.p=i),nD(e,ZO,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==fD&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return kO.isInMemoryStorage||!0===kO.get("previous_websocket_failure")}}]),e}();hD.responsesRequiredToBeHealthy=2,hD.healthyTimeout=3e4;var dD=function(){function e(t){Mt(this,e),this.initTransports_(t)}return Ut(e,[{key:"initTransports_",value:function(t){var n=hD&&hD.isAvailable(),r=n&&!hD.previouslyFailed();if(t.webSocketOnly&&(n||RO("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[hD];else{var i,a=this.transports_=[],o=Qt(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var u=i.value;u&&u.isAvailable()&&a.push(u)}}catch(s){o.e(s)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[cD,hD]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();dD.globalTransportInitialized_=!1;var pD=function(){function e(t,n,r,i,a,o,u,s,c,l){Mt(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=u,this.onDisconnect_=s,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=NO("c:"+this.id+":"),this.transportManager_=new dD(n),this.log_("Connection created"),this.start_()}return Ut(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=GO((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=UO("t",e),n=UO("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=UO("t",e),n=UO("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=UO("t",e);if("d"in e){var n=e.d;if("h"===t){var r=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?PO("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):PO("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),$O!==n&&RO("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),GO((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):GO((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(kO.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),vD=function(){function e(){Mt(this,e)}return Ut(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),yD=function(){function e(t){Mt(this,e),this.allowedEvents_=t,this.listeners_={},La(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return Ut(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=Lt(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){La(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),mD=function(e){Vt(n,e);var t=Wt(n);function n(){var e;return Mt(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||$a()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return Ut(n,[{key:"getInitialEvent",value:function(e){return La("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(yD),gD=32,kD=768,wD=function(){function e(t,n){if(Mt(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return Ut(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function bD(){return new wD("")}function _D(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function xD(e){return e.pieces_.length-e.pieceNum_}function ED(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new wD(e.pieces_,t)}function SD(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function ID(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function TD(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new wD(t,0)}function CD(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof wD)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new wD(n,0)}function ND(e){return e.pieceNum_>=e.pieces_.length}function PD(e,t){var n=_D(e),r=_D(t);if(null===n)return t;if(n===r)return PD(ED(e),ED(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function AD(e,t){for(var n=ID(e,0),r=ID(t,0),i=0;i<n.length&&i<r.length;i++){var a=MO(n[i],r[i]);if(0!==a)return a}return n.length===r.length?0:n.length<r.length?-1:1}function RD(e,t){if(xD(e)!==xD(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function OD(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(xD(e)>xD(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var DD=Ut((function e(t,n){Mt(this,e),this.errorPrefix_=n,this.parts_=ID(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=To(this.parts_[r]);LD(this)}));function LD(e){if(e.byteLength_>kD)throw new Error(e.errorPrefix_+"has a key path longer than "+kD+" bytes ("+e.byteLength_+").");if(e.parts_.length>gD)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+gD+") or object contains a cycle "+MD(e))}function MD(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var FD=function(e){Vt(n,e);var t=Wt(n);function n(){var e,r,i;return Mt(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return Ut(n,[{key:"getInitialEvent",value:function(e){return La("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(yD),UD=1e3,jD=function(e){Vt(n,e);var t=Wt(n);function n(e,r,i,a,o,u,s,c){var l;if(Mt(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=u,l.appCheckTokenProvider_=s,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=NO("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=UD,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!to())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return FD.getInstance().on("visible",l.onVisible_,zt(l)),-1===e.host.indexOf("fblocal")&&mD.getInstance().on("online",l.onOnline_,zt(l)),l}return Ut(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(uo(i)),La(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new Ha,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),La(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),La(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var u=o.d,s=o.s;n.warnOnListenWarnings_(u,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==s&&t.removeListen_(i,a),e.onComplete&&e.onComplete(s,u))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=so(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=so(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),La(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+uo(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):PO("Unrecognized action received from server: "+uo(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;La(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=UD,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=UD,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=UD),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=fr(cr().mark((function e(){var t,r,i,a,o,u,s,c,l,f,h,d,p,v,y=this;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,u=!1,s=null,c=function(){s?s.close():(u=!0,i())},l=function(e){La(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(e)},this.realtime_={close:c,sendRequest:l},f=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);case 19:h=e.sent,d=Ot(h,2),p=d[0],v=d[1],u?CO("getToken() completed but was canceled"):(CO("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=v&&v.token,s=new pD(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){RO(e+" ("+y.repoInfo_.toString()+")"),y.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),u||(this.repoInfo_.nodeAdmin&&RO(e.t0),c());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){CO("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){CO("Resuming connection for reason: "+e),delete this.interruptReasons_[e],fo(this.interruptReasons_)&&(this.reconnectDelay_=UD,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return jO(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new wD(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){CO("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){CO("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=Qt(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=Qt(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(s){r.e(s)}finally{r.f()}}}catch(s){t.e(s)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var u=0;u<this.outstandingGets_.length;u++)this.outstandingGets_[u]&&this.sendGet_(u)}},{key:"sendConnectStats_",value:function(){var e={},t="js";to()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+pO.replace(/\./g,"-")]=1,$a()?e["framework.cordova"]=1:Za()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=mD.getInstance().currentlyOnline();return fo(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&co(e,"w")){var n=lo(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();RO("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(vD);jD.nextPersistentConnectionId_=0,jD.nextConnectionId_=0;var VD,BD=function(){function e(t,n){Mt(this,e),this.name=t,this.node=n}return Ut(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),qD=function(){function e(){Mt(this,e)}return Ut(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new BD(DO,e),r=new BD(DO,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return BD.MIN}}]),e}(),zD=function(e){Vt(n,e);var t=Wt(n);function n(){return Mt(this,n),t.apply(this,arguments)}return Ut(n,[{key:"compare",value:function(e,t){return MO(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw Ma("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return BD.MIN}},{key:"maxPost",value:function(){return new BD(LO,VD)}},{key:"makePost",value:function(e,t){return La("string"===typeof e,"KeyIndex indexValue must always be a string."),new BD(e,VD)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return VD},set:function(e){VD=e}}]),n}(qD),WD=new zD,KD=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;Mt(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return Ut(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),GD=function(){function e(t,n,r,i,a){Mt(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:YD.EMPTY_NODE,this.right=null!=a?a:YD.EMPTY_NODE}return Ut(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return YD.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return YD.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();GD.RED=!0,GD.BLACK=!1;var HD,QD=function(){function e(){Mt(this,e)}return Ut(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new GD(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),YD=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;Mt(this,e),this.comparator_=t,this.root_=n}return Ut(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,GD.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,GD.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new KD(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new KD(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new KD(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new KD(this.root_,null,this.comparator_,!0,e)}}]),e}();function $D(e,t){return MO(e.name,t.name)}function JD(e,t){return MO(e,t)}YD.EMPTY_NODE=new QD;var XD,ZD,eL,tL=function(e){return"number"===typeof e?"number:"+qO(e):"string:"+e},nL=function(e){if(e.isLeafNode()){var t=e.val();La("string"===typeof t||"number"===typeof t||"object"===typeof t&&co(t,".sv"),"Priority must be a string or number.")}else La(e===HD||e.isEmpty(),"priority of unexpected type.");La(e===HD||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},rL=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;Mt(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,La(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),nL(this.priorityNode_)}return Ut(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return ND(t)?this:".priority"===_D(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=_D(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(La(".priority"!==r||1===xD(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(ED(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+tL(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?qO(this.value_):this.value_,this.lazyHash_=xO(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(La(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return La(i>=0,"Unknown leaf type: "+n),La(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return XD},set:function(e){XD=e}}]),e}();rL.VALUE_TYPE_ORDER=["object","boolean","number","string"];var iL,aL,oL=function(e){Vt(n,e);var t=Wt(n);function n(){return Mt(this,n),t.apply(this,arguments)}return Ut(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?MO(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return BD.MIN}},{key:"maxPost",value:function(){return new BD(LO,new rL("[PRIORITY-POST]",eL))}},{key:"makePost",value:function(e,t){var n=ZD(e);return new BD(t,new rL("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(qD),uL=new oL,sL=Math.log(2),cL=function(){function e(t){Mt(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/sL,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return Ut(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),lL=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,u=i-r;if(0===u)return null;if(1===u)return a=e[r],o=n?n(a):a,new GD(o,a.node,GD.BLACK,null,null);var s=parseInt(u/2,10)+r,c=t(r,s),l=t(s+1,i);return a=e[s],o=n?n(a):a,new GD(o,a.node,GD.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,u=function(t,r){var a=o-t,u=o;o-=t;var c=i(a+1,u),l=e[a],f=n?n(l):l;s(new GD(f,l.node,r,null,c))},s=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),f=Math.pow(2,t.count-(c+1));l?u(f,GD.BLACK):(u(f,GD.BLACK),u(f,GD.RED))}return a}(new cL(e.length));return new YD(r||t,a)},fL={},hL=function(){function e(t,n){Mt(this,e),this.indexes_=t,this.indexSet_=n}return Ut(e,[{key:"get",value:function(e){var t=lo(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof YD?t:null}},{key:"hasIndex",value:function(e){return co(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){La(t!==WD,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(BD.Wrap),u=o.getNext();u;)a=a||t.isDefinedOn(u.node),i.push(u),u=o.getNext();r=a?lL(i,t.getCompare()):fL;var s=t.toString(),c=Object.assign({},this.indexSet_);c[s]=t;var l=Object.assign({},this.indexes_);return l[s]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(ho(this.indexes_,(function(e,i){var a=lo(r.indexSet_,i);if(La(a,"Missing index implementation for "+i),e===fL){if(a.isDefinedOn(t.node)){for(var o=[],u=n.getIterator(BD.Wrap),s=u.getNext();s;)s.name!==t.name&&o.push(s),s=u.getNext();return o.push(t),lL(o,a.getCompare())}return fL}var c=n.get(t.name),l=e;return c&&(l=l.remove(new BD(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(ho(this.indexes_,(function(e){if(e===fL)return e;var r=n.get(t.name);return r?e.remove(new BD(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return La(fL&&uL,"ChildrenNode.ts has not been loaded"),iL=iL||new e({".priority":fL},{".priority":uL})}}]),e}(),dL=function(){function e(t,n,r){Mt(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&nL(this.priorityNode_),this.children_.isEmpty()&&La(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Ut(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||aL}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?aL:t}},{key:"getChild",value:function(e){var t=_D(e);return null===t?this:this.getImmediateChild(t).getChild(ED(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(La(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new BD(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?aL:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=_D(e);if(null===n)return t;La(".priority"!==_D(e)||1===xD(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(ED(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(uL,(function(o,u){n[o]=u.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var u in n)o[u]=n[u];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+tL(this.getPriority().val())+":"),this.forEachChild(uL,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":xO(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new BD(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new BD(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new BD(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,BD.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,BD.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===pL?-1:0}},{key:"withIndex",value:function(t){if(t===WD||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===WD||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(uL),r=t.getIterator(uL),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===WD?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return aL||(aL=new e(new YD(JD),null,hL.Default))}}]),e}();dL.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var pL=new(function(e){Vt(n,e);var t=Wt(n);function n(){return Mt(this,n),t.call(this,new YD(JD),dL.EMPTY_NODE,hL.Default)}return Ut(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return dL.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(dL));Object.defineProperties(BD,{MIN:{value:new BD(DO,dL.EMPTY_NODE)},MAX:{value:new BD(LO,pL)}}),zD.__EMPTY_NODE=dL.EMPTY_NODE,rL.__childrenNodeConstructor=dL,HD=pL,function(e){eL=e}(pL);var vL=!0;function yL(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return dL.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),La(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e)return new rL(e,yL(t));if(e instanceof Array||!vL){var n=dL.EMPTY_NODE;return BO(e,(function(t,r){if(co(e,t)&&"."!==t.substring(0,1)){var i=yL(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}})),n.updatePriority(yL(t))}var r=[],i=!1;if(BO(e,(function(e,t){if("."!==e.substring(0,1)){var n=yL(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new BD(e,n)))}})),0===r.length)return dL.EMPTY_NODE;var a=lL(r,$D,(function(e){return e.name}),JD);if(i){var o=lL(r,uL.getCompare());return new dL(a,yL(t),new hL({".priority":o},{".priority":uL}))}return new dL(a,yL(t),hL.Default)}!function(e){ZD=e}(yL);var mL=function(e){Vt(n,e);var t=Wt(n);function n(e){var r;return Mt(this,n),(r=t.call(this)).indexPath_=e,La(!ND(e)&&".priority"!==_D(e),"Can't create PathIndex with empty path or .priority key"),r}return Ut(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?MO(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=yL(e),r=dL.EMPTY_NODE.updateChild(this.indexPath_,n);return new BD(t,r)}},{key:"maxPost",value:function(){var e=dL.EMPTY_NODE.updateChild(this.indexPath_,pL);return new BD(LO,e)}},{key:"toString",value:function(){return ID(this.indexPath_,0).join("/")}}]),n}(qD),gL=function(e){Vt(n,e);var t=Wt(n);function n(){return Mt(this,n),t.apply(this,arguments)}return Ut(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?MO(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return BD.MIN}},{key:"maxPost",value:function(){return BD.MAX}},{key:"makePost",value:function(e,t){var n=yL(e);return new BD(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(qD),kL=new gL;function wL(e){return{type:"value",snapshotNode:e}}function bL(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function _L(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function xL(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var EL=function(){function e(t){Mt(this,e),this.index_=t}return Ut(e,[{key:"updateChild",value:function(e,t,n,r,i,a){La(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(_L(t,o)):La(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(bL(t,n)):a.trackChildChange(xL(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(uL,(function(e,r){t.hasChild(e)||n.trackChildChange(_L(e,r))})),t.isLeafNode()||t.forEachChild(uL,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(xL(t,r,i))}else n.trackChildChange(bL(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?dL.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),SL=function(){function e(t){Mt(this,e),this.indexedFilter_=new EL(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return Ut(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){var t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new BD(t,n))||(n=dL.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=dL.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(dL.EMPTY_NODE);var i=this;return t.forEachChild(uL,(function(e,t){i.matches(new BD(e,t))||(r=r.updateImmediateChild(e,dL.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),IL=function(){function e(t){var n=this;Mt(this,e),this.withinDirectionalStart=function(e){return n.reverse_?n.withinEndPost(e):n.withinStartPost(e)},this.withinDirectionalEnd=function(e){return n.reverse_?n.withinStartPost(e):n.withinEndPost(e)},this.withinStartPost=function(e){var t=n.index_.compare(n.rangedFilter_.getStartPost(),e);return n.startIsInclusive_?t<=0:t<0},this.withinEndPost=function(e){var t=n.index_.compare(e,n.rangedFilter_.getEndPost());return n.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new SL(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return Ut(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new BD(t,n))||(n=dL.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=dL.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=dL.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(this.withinDirectionalStart(o)){if(!this.withinDirectionalEnd(o))break;r=r.updateImmediateChild(o.name,o.node),a++}}}else{var u;r=(r=t.withIndex(this.index_)).updatePriority(dL.EMPTY_NODE),u=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);for(var s=0;u.hasNext();){var c=u.getNext();s<this.limit_&&this.withinDirectionalStart(c)&&this.withinDirectionalEnd(c)?s++:r=r.updateImmediateChild(c.name,dL.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var u=e;La(u.numChildren()===this.limit_,"");var s=new BD(t,n),c=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),l=this.rangedFilter_.matches(s);if(u.hasChild(t)){for(var f=u.getImmediateChild(t),h=r.getChildAfterChild(this.index_,c,this.reverse_);null!=h&&(h.name===t||u.hasChild(h.name));)h=r.getChildAfterChild(this.index_,h,this.reverse_);var d=null==h?1:a(h,s);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(xL(t,n,f)),u.updateImmediateChild(t,n);null!=i&&i.trackChildChange(_L(t,f));var p=u.updateImmediateChild(t,dL.EMPTY_NODE);return null!=h&&this.rangedFilter_.matches(h)?(null!=i&&i.trackChildChange(bL(h.name,h.node)),p.updateImmediateChild(h.name,h.node)):p}return n.isEmpty()?e:l&&a(c,s)>=0?(null!=i&&(i.trackChildChange(_L(c.name,c.node)),i.trackChildChange(bL(t,n))),u.updateImmediateChild(t,n).updateImmediateChild(c.name,dL.EMPTY_NODE)):e}}]),e}(),TL=function(){function e(){Mt(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=uL}return Ut(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return La(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return La(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:DO}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return La(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return La(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:LO}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return La(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===uL}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function CL(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function NL(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function PL(e,t){var n=e.copy();return n.index_=t,n}function AL(e){var t,n={};if(e.isDefault())return n;if(e.index_===uL?t="$priority":e.index_===kL?t="$value":e.index_===WD?t="$key":(La(e.index_ instanceof mL,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=uo(t),e.startSet_){var r=e.startAfterSet_?"startAfter":"startAt";n[r]=uo(e.indexStartValue_),e.startNameSet_&&(n[r]+=","+uo(e.indexStartName_))}if(e.endSet_){var i=e.endBeforeSet_?"endBefore":"endAt";n[i]=uo(e.indexEndValue_),e.endNameSet_&&(n[i]+=","+uo(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function RL(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==uL&&(t.i=e.index_.toString()),t}var OL=function(e){Vt(n,e);var t=Wt(n);function n(e,r,i,a){var o;return Mt(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=NO("p:rest:"),o.listens_={},o}return Ut(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var u=n.getListenId_(e,r),s={};this.listens_[u]=s;var c=AL(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),lo(a.listens_,u)===s)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=AL(e._queryParams),r=e._path.toString(),i=new Ha;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=Ot(i,2),o=a[0],u=a[1];o&&o.accessToken&&(n.auth=o.accessToken),u&&u.token&&(n.ac=u.token);var s=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+yo(n);t.log_("Sending REST request for "+s);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(r&&4===c.readyState){t.log_("REST Response for "+s+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=oo(c.responseText)}catch(n){RO("Failed to parse JSON response for "+s+": "+c.responseText)}r(null,e)}else 401!==c.status&&404!==c.status&&RO("Got unsuccessful REST response for "+s+" Status: "+c.status),r(c.status);r=null}},c.open("GET",s,!0),c.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(La(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(vD),DL=function(){function e(){Mt(this,e),this.rootNode_=dL.EMPTY_NODE}return Ut(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function LL(){return{value:null,children:new Map}}function ML(e,t,n){if(ND(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=_D(t);e.children.has(r)||e.children.set(r,LL()),ML(e.children.get(r),t=ED(t),n)}}function FL(e,t){if(ND(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(uL,(function(t,n){ML(e,new wD(t),n)})),FL(e,t)}if(e.children.size>0){var r=_D(t);if(t=ED(t),e.children.has(r))FL(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function UL(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){UL(r,new wD(t.toString()+"/"+e),n)}))}var jL,VL=function(){function e(t){Mt(this,e),this.collection_=t,this.last_=null}return Ut(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&BO(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),BL=function(){function e(t,n){Mt(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new VL(t);var r=1e4+2e4*Math.random();GO(this.reportStats_.bind(this),Math.floor(r))}return Ut(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;BO(t,(function(t,i){i>0&&co(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),GO(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function qL(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(jL||(jL={}));var zL,WL=function(){function e(t,n,r){Mt(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=jL.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return Ut(e,[{key:"operationForChild",value:function(t){if(ND(this.path)){if(null!=this.affectedTree.value)return La(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new wD(t));return new e(bD(),n,this.revert)}return La(_D(this.path)===t,"operationForChild called for unrelated child."),new e(ED(this.path),this.affectedTree,this.revert)}}]),e}(),KL=function(){function e(t,n){Mt(this,e),this.source=t,this.path=n,this.type=jL.LISTEN_COMPLETE}return Ut(e,[{key:"operationForChild",value:function(t){return ND(this.path)?new e(this.source,bD()):new e(this.source,ED(this.path))}}]),e}(),GL=function(){function e(t,n,r){Mt(this,e),this.source=t,this.path=n,this.snap=r,this.type=jL.OVERWRITE}return Ut(e,[{key:"operationForChild",value:function(t){return ND(this.path)?new e(this.source,bD(),this.snap.getImmediateChild(t)):new e(this.source,ED(this.path),this.snap)}}]),e}(),HL=function(){function e(t,n,r){Mt(this,e),this.source=t,this.path=n,this.children=r,this.type=jL.MERGE}return Ut(e,[{key:"operationForChild",value:function(t){if(ND(this.path)){var n=this.children.subtree(new wD(t));return n.isEmpty()?null:n.value?new GL(this.source,bD(),n.value):new e(this.source,bD(),n)}return La(_D(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,ED(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),QL=function(){function e(t,n,r){Mt(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return Ut(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(ND(e))return this.isFullyInitialized()&&!this.filtered_;var t=_D(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),YL=Ut((function e(t){Mt(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function $L(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw Ma("Should only compare child_ events.");var r=new BD(t.childName,t.snapshotNode),i=new BD(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function JL(e,t){return{eventCache:e,serverCache:t}}function XL(e,t,n,r){return JL(new QL(t,n,r),e.serverCache)}function ZL(e,t,n,r){return JL(e.eventCache,new QL(t,n,r))}function eM(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function tM(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var nM=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(zL||(zL=new YD(FO)),zL);Mt(this,e),this.value=t,this.children=n}return Ut(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:bD(),value:this.value};if(ND(e))return null;var n=_D(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(ED(e),t);return null!=i?{path:CD(new wD(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(ND(t))return this;var n=_D(t),r=this.children.get(n);return null!==r?r.subtree(ED(t)):new e(null)}},{key:"set",value:function(t,n){if(ND(t))return new e(n,this.children);var r=_D(t),i=(this.children.get(r)||new e(null)).set(ED(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(ND(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=_D(t),r=this.children.get(n);if(r){var i,a=r.remove(ED(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(ND(e))return this.value;var t=_D(e),n=this.children.get(t);return n?n.get(ED(e)):null}},{key:"setTree",value:function(t,n){if(ND(t))return n;var r,i=_D(t),a=(this.children.get(i)||new e(null)).setTree(ED(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(bD(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(CD(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,bD(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(ND(e))return null;var i=_D(e),a=this.children.get(i);return a?a.findOnPath_(ED(e),CD(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,bD(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(ND(t))return this;this.value&&r(n,this.value);var i=_D(t),a=this.children.get(i);return a?a.foreachOnPath_(ED(t),CD(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(bD(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(CD(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return BO(t,(function(e,t){n=n.set(new wD(e),t)})),n}}]),e}(),rM=function(){function e(t){Mt(this,e),this.writeTree_=t}return Ut(e,null,[{key:"empty",value:function(){return new e(new nM(null))}}]),e}();function iM(e,t,n){if(ND(t))return new rM(new nM(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=PD(i,t);return a=a.updateChild(o,n),new rM(e.writeTree_.set(i,a))}var u=new nM(n),s=e.writeTree_.setTree(t,u);return new rM(s)}function aM(e,t,n){var r=e;return BO(n,(function(e,n){r=iM(r,CD(t,e),n)})),r}function oM(e,t){if(ND(t))return rM.empty();var n=e.writeTree_.setTree(t,new nM(null));return new rM(n)}function uM(e,t){return null!=sM(e,t)}function sM(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(PD(n.path,t)):null}function cM(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(uL,(function(e,n){t.push(new BD(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new BD(e,n.value))})),t}function lM(e,t){if(ND(t))return e;var n=sM(e,t);return new rM(null!=n?new nM(n):e.writeTree_.subtree(t))}function fM(e){return e.writeTree_.isEmpty()}function hM(e,t){return dM(bD(),e.writeTree_,t)}function dM(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(La(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=dM(CD(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(CD(e,".priority"),r)),n}function pM(e,t){return TM(t,e)}function vM(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));La(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var u=e.allWrites[o];u.visible&&(o>=n&&yM(u,r.path)?i=!1:OD(r.path,u.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=gM(e.allWrites,mM,bD()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=oM(e.visibleWrites,r.path):BO(r.children,(function(t){e.visibleWrites=oM(e.visibleWrites,CD(r.path,t))}));return!0}return!1}function yM(e,t){if(e.snap)return OD(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&OD(CD(e.path,n),t))return!0;return!1}function mM(e){return e.visible}function gM(e,t,n){for(var r=rM.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,u=void 0;if(a.snap)OD(n,o)?r=iM(r,u=PD(n,o),a.snap):OD(o,n)&&(u=PD(o,n),r=iM(r,bD(),a.snap.getChild(u)));else{if(!a.children)throw Ma("WriteRecord should have .snap or .children");if(OD(n,o))r=aM(r,u=PD(n,o),a.children);else if(OD(o,n))if(ND(u=PD(o,n)))r=aM(r,bD(),a.children);else{var s=lo(a.children,_D(u));if(s){var c=s.getChild(ED(u));r=iM(r,bD(),c)}}}}}return r}function kM(e,t,n,r,i){if(r||i){var a=lM(e.visibleWrites,t);if(!i&&fM(a))return n;if(i||null!=n||uM(a,bD())){return hM(gM(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(OD(e.path,t)||OD(t,e.path))}),t),n||dL.EMPTY_NODE)}return null}var o=sM(e.visibleWrites,t);if(null!=o)return o;var u=lM(e.visibleWrites,t);return fM(u)?n:null!=n||uM(u,bD())?hM(u,n||dL.EMPTY_NODE):null}function wM(e,t,n,r){return kM(e.writeTree,e.treePath,t,n,r)}function bM(e,t){return function(e,t,n){var r=dL.EMPTY_NODE,i=sM(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(uL,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=lM(e.visibleWrites,t);return n.forEachChild(uL,(function(e,t){var n=hM(lM(a,new wD(e)),t);r=r.updateImmediateChild(e,n)})),cM(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return cM(lM(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function _M(e,t,n,r){return function(e,t,n,r,i){La(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=CD(t,n);if(uM(e.visibleWrites,a))return null;var o=lM(e.visibleWrites,a);return fM(o)?i.getChild(n):hM(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function xM(e,t){return function(e,t){return sM(e.visibleWrites,t)}(e.writeTree,CD(e.treePath,t))}function EM(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var u,s=lM(e.visibleWrites,t),c=sM(s,bD());if(null!=c)u=c;else{if(null==n)return[];u=hM(s,n)}if((u=u.withIndex(o)).isEmpty()||u.isLeafNode())return[];for(var l=[],f=o.getCompare(),h=a?u.getReverseIteratorFrom(r,o):u.getIteratorFrom(r,o),d=h.getNext();d&&l.length<i;)0!==f(d,r)&&l.push(d),d=h.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function SM(e,t,n){return function(e,t,n,r){var i=CD(t,n),a=sM(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?hM(lM(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function IM(e,t){return TM(CD(e.treePath,t),e.writeTree)}function TM(e,t){return{treePath:e,writeTree:t}}var CM=function(){function e(){Mt(this,e),this.changeMap=new Map}return Ut(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;La("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),La(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,xL(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,_L(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,bL(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Ma("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,xL(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),NM=new(function(){function e(){Mt(this,e)}return Ut(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),PM=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Mt(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return Ut(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new QL(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return SM(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:tM(this.viewCache_),i=EM(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function AM(e,t,n,r,i){var a,o,u=new CM;if(n.type===jL.OVERWRITE){var s=n;s.source.fromUser?a=DM(e,t,s.path,s.snap,r,i,u):(La(s.source.fromServer,"Unknown source."),o=s.source.tagged||t.serverCache.isFiltered()&&!ND(s.path),a=OM(e,t,s.path,s.snap,r,i,o,u))}else if(n.type===jL.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var u=t;return r.foreach((function(r,s){var c=CD(n,r);LM(t,_D(c))&&(u=DM(e,u,c,s,i,a,o))})),r.foreach((function(r,s){var c=CD(n,r);LM(t,_D(c))||(u=DM(e,u,c,s,i,a,o))})),u}(e,t,c.path,c.children,r,i,u):(La(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=FM(e,t,c.path,c.children,r,i,o,u))}else if(n.type===jL.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=xM(r,n))return t;var u,s=new PM(r,t,i),c=t.eventCache.getNode();if(ND(n)||".priority"===_D(n)){var l;if(t.serverCache.isFullyInitialized())l=wM(r,tM(t));else{var f=t.serverCache.getNode();La(f instanceof dL,"serverChildren would be complete if leaf node"),l=bM(r,f)}u=e.filter.updateFullNode(c,l,a)}else{var h=_D(n),d=SM(r,h,t.serverCache);null==d&&t.serverCache.isCompleteForChild(h)&&(d=c.getImmediateChild(h)),(u=null!=d?e.filter.updateChild(c,h,d,ED(n),s,a):t.eventCache.getNode().hasChild(h)?e.filter.updateChild(c,h,dL.EMPTY_NODE,ED(n),s,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=wM(r,tM(t))).isLeafNode()&&(u=e.filter.updateFullNode(u,o,a))}return o=t.serverCache.isFullyInitialized()||null!=xM(r,bD()),XL(t,u,o,e.filter.filtersNodes())}(e,t,l.path,r,i,u):function(e,t,n,r,i,a,o){if(null!=xM(i,n))return t;var u=t.serverCache.isFiltered(),s=t.serverCache;if(null!=r.value){if(ND(n)&&s.isFullyInitialized()||s.isCompleteForPath(n))return OM(e,t,n,s.getNode().getChild(n),i,a,u,o);if(ND(n)){var c=new nM(null);return s.getNode().forEachChild(WD,(function(e,t){c=c.set(new wD(e),t)})),FM(e,t,n,c,i,a,u,o)}return t}var l=new nM(null);return r.foreach((function(e,t){var r=CD(n,e);s.isCompleteForPath(r)&&(l=l.set(e,s.getNode().getChild(r)))})),FM(e,t,n,l,i,a,u,o)}(e,t,l.path,l.affectedTree,r,i,u)}else{if(n.type!==jL.LISTEN_COMPLETE)throw Ma("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=ZL(t,a.getNode(),a.isFullyInitialized()||ND(n),a.isFiltered());return RM(e,o,n,r,NM,i)}(e,t,n.path,r,u)}var f=u.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=eM(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(wL(eM(t)))}}(t,a,f),{viewCache:a,changes:f}}function RM(e,t,n,r,i,a){var o,u,s=t.eventCache;if(null!=xM(r,n))return t;if(ND(n))if(La(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=tM(t),l=bM(r,c instanceof dL?c:dL.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var f=wM(r,tM(t));o=e.filter.updateFullNode(t.eventCache.getNode(),f,a)}else{var h=_D(n);if(".priority"===h){La(1===xD(n),"Can't have a priority with additional path components");var d=s.getNode(),p=_M(r,n,d,u=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):s.getNode()}else{var v,y=ED(n);if(s.isCompleteForChild(h)){u=t.serverCache.getNode();var m=_M(r,n,s.getNode(),u);v=null!=m?s.getNode().getImmediateChild(h).updateChild(y,m):s.getNode().getImmediateChild(h)}else v=SM(r,h,t.serverCache);o=null!=v?e.filter.updateChild(s.getNode(),h,v,y,i,a):s.getNode()}}return XL(t,o,s.isFullyInitialized()||ND(n),e.filter.filtersNodes())}function OM(e,t,n,r,i,a,o,u){var s,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(ND(n))s=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var f=c.getNode().updateChild(n,r);s=l.updateFullNode(c.getNode(),f,null)}else{var h=_D(n);if(!c.isCompleteForPath(n)&&xD(n)>1)return t;var d=ED(n),p=c.getNode().getImmediateChild(h).updateChild(d,r);s=".priority"===h?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),h,p,d,NM,null)}var v=ZL(t,s,c.isFullyInitialized()||ND(n),l.filtersNodes());return RM(e,v,n,i,new PM(i,v,a),u)}function DM(e,t,n,r,i,a,o){var u,s,c=t.eventCache,l=new PM(i,t,a);if(ND(n))s=e.filter.updateFullNode(t.eventCache.getNode(),r,o),u=XL(t,s,!0,e.filter.filtersNodes());else{var f=_D(n);if(".priority"===f)s=e.filter.updatePriority(t.eventCache.getNode(),r),u=XL(t,s,c.isFullyInitialized(),c.isFiltered());else{var h,d=ED(n),p=c.getNode().getImmediateChild(f);if(ND(d))h=r;else{var v=l.getCompleteChild(f);h=null!=v?".priority"===SD(d)&&v.getChild(TD(d)).isEmpty()?v:v.updateChild(d,r):dL.EMPTY_NODE}if(p.equals(h))u=t;else u=XL(t,e.filter.updateChild(c.getNode(),f,h,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return u}function LM(e,t){return e.eventCache.isCompleteForChild(t)}function MM(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function FM(e,t,n,r,i,a,o,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var s,c=t;s=ND(n)?r:new nM(null).setTree(n,r);var l=t.serverCache.getNode();return s.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var s=MM(0,t.serverCache.getNode().getImmediateChild(n),r);c=OM(e,c,new wD(n),s,i,a,o,u)}})),s.children.inorderTraversal((function(n,r){var s=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!l.hasChild(n)&&!s){var f=MM(0,t.serverCache.getNode().getImmediateChild(n),r);c=OM(e,c,new wD(n),f,i,a,o,u)}})),c}var UM,jM=function(){function e(t,n){Mt(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new EL(i.getIndex()),o=(r=i).loadsAllData()?new EL(r.getIndex()):r.hasLimit()?new IL(r):new SL(r);this.processor_=function(e){return{filter:e}}(o);var u=n.serverCache,s=n.eventCache,c=a.updateFullNode(dL.EMPTY_NODE,u.getNode(),null),l=o.updateFullNode(dL.EMPTY_NODE,s.getNode(),null),f=new QL(c,u.isFullyInitialized(),a.filtersNodes()),h=new QL(l,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=JL(h,f),this.eventGenerator_=new YL(this.query_)}return Ut(e,[{key:"query",get:function(){return this.query_}}]),e}();function VM(e,t){var n=tM(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!ND(t)&&!n.getImmediateChild(_D(t)).isEmpty())?n.getChild(t):null}function BM(e){return 0===e.eventRegistrations_.length}function qM(e,t,n){var r=[];if(n){La(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var u=e.eventRegistrations_[o];if(u.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(u)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function zM(e,t,n,r){t.type===jL.MERGE&&null!==t.source.queryId&&(La(tM(e.viewCache_),"We should always have a full cache before handling merges"),La(eM(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,u=AM(e.processor_,o,t,n,r);return i=e.processor_,a=u.viewCache,La(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),La(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),La(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=u.viewCache,WM(e,u.changes,u.viewCache.eventCache.getNode(),null)}function WM(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),$L(e,i,"child_removed",t,r,n),$L(e,i,"child_added",t,r,n),$L(e,i,"child_moved",a,r,n),$L(e,i,"child_changed",t,r,n),$L(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var KM,GM=Ut((function e(){Mt(this,e),this.views=new Map}));function HM(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return La(null!=a,"SyncTree gave us an op for an invalid query."),zM(a,t,n,r)}var o,u=[],s=Qt(e.views.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u=u.concat(zM(c,t,n,r))}}catch(l){s.e(l)}finally{s.f()}return u}function QM(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var u=wM(n,i?r:null),s=!1;u?s=!0:r instanceof dL?(u=bM(n,r),s=!1):(u=dL.EMPTY_NODE,s=!1);var c=JL(new QL(u,s,!1),new QL(r,i,!1));return new jM(t,c)}return o}function YM(e,t,n,r,i,a){var o=QM(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(uL,(function(e,t){r.push(bL(e,t))})),n.isFullyInitialized()&&r.push(wL(n.getNode())),WM(e,r,n.getNode(),t)}(o,n)}function $M(e,t,n,r){var i=t._queryIdentifier,a=[],o=[],u=tF(e);if("default"===i){var s,c=Qt(e.views.entries());try{for(c.s();!(s=c.n()).done;){var l=Ot(s.value,2),f=l[0],h=l[1];o=o.concat(qM(h,n,r)),BM(h)&&(e.views.delete(f),h.query._queryParams.loadsAllData()||a.push(h.query))}}catch(p){c.e(p)}finally{c.f()}}else{var d=e.views.get(i);d&&(o=o.concat(qM(d,n,r)),BM(d)&&(e.views.delete(i),d.query._queryParams.loadsAllData()||a.push(d.query)))}return u&&!tF(e)&&a.push(new(La(UM,"Reference.ts has not been loaded"),UM)(t._repo,t._path)),{removed:a,events:o}}function JM(e){var t,n=[],r=Qt(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function XM(e,t){var n,r=null,i=Qt(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||VM(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function ZM(e,t){if(t._queryParams.loadsAllData())return nF(e);var n=t._queryIdentifier;return e.views.get(n)}function eF(e,t){return null!=ZM(e,t)}function tF(e){return null!=nF(e)}function nF(e){var t,n=Qt(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var rF=1,iF=Ut((function e(t){Mt(this,e),this.listenProvider_=t,this.syncPointTree_=new nM(null),this.pendingWriteTree_={visibleWrites:rM.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function aF(e,t,n,r,i){return function(e,t,n,r,i){La(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=iM(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?pF(e,new GL({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function oF(e,t,n,r){!function(e,t,n,r){La(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=aM(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=nM.fromObject(n);return pF(e,new HL({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function uF(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(vM(e.pendingWriteTree_,t)){var i=new nM(null);return null!=r.snap?i=i.set(bD(),!0):BO(r.children,(function(e){i=i.set(new wD(e),!0)})),pF(e,new WL(r.path,i,n))}return[]}function sF(e,t,n){return pF(e,new GL({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function cF(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t._path,o=e.syncPointTree_.get(a),u=[];if(o&&("default"===t._queryIdentifier||eF(o,t))){var s=$M(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(a));var c=s.removed;if(u=s.events,!i){var l=-1!==c.findIndex((function(e){return e._queryParams.loadsAllData()})),f=e.syncPointTree_.findOnPath(a,(function(e,t){return tF(t)}));if(l&&!f){var h=e.syncPointTree_.subtree(a);if(!h.isEmpty())for(var d=function(e){return e.fold((function(e,t,n){if(t&&tF(t))return[nF(t)];var r=[];return t&&(r=JM(t)),BO(n,(function(e,t){r=r.concat(t)})),r}))}(h),p=0;p<d.length;++p){var v=d[p],y=v.query,m=mF(e,v);e.listenProvider_.startListening(xF(y),gF(e,y),m.hashFn,m.onComplete)}}if(!f&&c.length>0&&!r)if(l){e.listenProvider_.stopListening(xF(t),null)}else c.forEach((function(t){var n=e.queryToTagMap.get(kF(t));e.listenProvider_.stopListening(xF(t),n)}))}!function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=kF(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}(e,c)}return u}function lF(e,t,n,r){var i=wF(e,r);if(null!=i){var a=bF(i),o=a.path,u=a.queryId,s=PD(o,t);return _F(e,o,new GL(qL(u),s,n))}return[]}function fF(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t._path,a=null,o=!1;e.syncPointTree_.foreachOnPath(i,(function(e,t){var n=PD(e,i);a=a||XM(t,n),o=o||tF(t)}));var u,s=e.syncPointTree_.get(i);(s?(o=o||tF(s),a=a||XM(s,bD())):(s=new GM,e.syncPointTree_=e.syncPointTree_.set(i,s)),null!=a)?u=!0:(u=!1,a=dL.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((function(e,t){var n=XM(t,bD());n&&(a=a.updateImmediateChild(e,n))})));var c=eF(s,t);if(!c&&!t._queryParams.loadsAllData()){var l=kF(t);La(!e.queryToTagMap.has(l),"View does not exist, but we have a tag");var f=rF++;e.queryToTagMap.set(l,f),e.tagToQueryMap.set(f,l)}var h=YM(s,t,n,pM(e.pendingWriteTree_,i),a,u);if(!c&&!o&&!r){var d=ZM(s,t);h=h.concat(function(e,t,n){var r=t._path,i=gF(e,t),a=mF(e,n),o=e.listenProvider_.startListening(xF(t),i,a.hashFn,a.onComplete),u=e.syncPointTree_.subtree(r);if(i)La(!tF(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var s=u.fold((function(e,t,n){if(!ND(e)&&t&&tF(t))return[nF(t).query];var r=[];return t&&(r=r.concat(JM(t).map((function(e){return e.query})))),BO(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<s.length;++c){var l=s[c];e.listenProvider_.stopListening(xF(l),gF(e,l))}return o}(e,t,d))}return h}function hF(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=XM(n,PD(e,t));if(r)return r}));return kM(r,t,i,n,!0)}function dF(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=PD(e,n);r=r||XM(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||XM(i,bD()):(i=new GM,e.syncPointTree_=e.syncPointTree_.set(n,i));var a=null!=r,o=a?new QL(r,!0,!1):null;return function(e){return eM(e.viewCache_)}(QM(i,t,pM(e.pendingWriteTree_,t._path),a?o.getNode():dL.EMPTY_NODE,a))}function pF(e,t){return vF(t,e.syncPointTree_,null,pM(e.pendingWriteTree_,bD()))}function vF(e,t,n,r){if(ND(e.path))return yF(e,t,n,r);var i=t.get(bD());null==n&&null!=i&&(n=XM(i,bD()));var a=[],o=_D(e.path),u=e.operationForChild(o),s=t.children.get(o);if(s&&u){var c=n?n.getImmediateChild(o):null,l=IM(r,o);a=a.concat(vF(u,s,c,l))}return i&&(a=a.concat(HM(i,e,r,n))),a}function yF(e,t,n,r){var i=t.get(bD());null==n&&null!=i&&(n=XM(i,bD()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,u=IM(r,t),s=e.operationForChild(t);s&&(a=a.concat(yF(s,i,o,u)))})),i&&(a=a.concat(HM(i,e,r,n))),a}function mF(e,t){var n=t.query,r=gF(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||dL.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=wF(e,n);if(r){var i=bF(r),a=i.path,o=i.queryId,u=PD(a,t);return _F(e,a,new KL(qL(o),u))}return[]}(e,n._path,r):function(e,t){return pF(e,new KL({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return cF(e,n,null,i)}}}function gF(e,t){var n=kF(t);return e.queryToTagMap.get(n)}function kF(e){return e._path.toString()+"$"+e._queryIdentifier}function wF(e,t){return e.tagToQueryMap.get(t)}function bF(e){var t=e.indexOf("$");return La(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new wD(e.substr(0,t))}}function _F(e,t,n){var r=e.syncPointTree_.get(t);return La(r,"Missing sync point for query tag that we're tracking"),HM(r,n,pM(e.pendingWriteTree_,t),null)}function xF(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(La(KM,"Reference.ts has not been loaded"),KM)(e._repo,e._path):e}var EF=function(){function e(t){Mt(this,e),this.node_=t}return Ut(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),SF=function(){function e(t,n){Mt(this,e),this.syncTree_=t,this.path_=n}return Ut(e,[{key:"getImmediateChild",value:function(t){var n=CD(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return hF(this.syncTree_,this.path_)}}]),e}(),IF=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},TF=function(e,t,n){return e&&"object"===typeof e?(La(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?CF(e[".sv"],t,n):"object"===typeof e[".sv"]?NF(e[".sv"],t):void La(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},CF=function(e,t,n){if("timestamp"===e)return n.timestamp;La(!1,"Unexpected server value: "+e)},NF=function(e,t,n){e.hasOwnProperty("increment")||La(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&La(!1,"Unexpected increment value: "+r);var i=t.node();if(La(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},PF=function(e,t,n,r){return RF(t,new SF(n,e),r)},AF=function(e,t,n){return RF(e,new EF(t),n)};function RF(e,t,n){var r,i=e.getPriority().val(),a=TF(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,u=TF(o.getValue(),t,n);return u!==o.getValue()||a!==o.getPriority().val()?new rL(u,yL(a)):e}var s=e;return r=s,a!==s.getPriority().val()&&(r=r.updatePriority(new rL(a))),s.forEachChild(uL,(function(e,i){var a=RF(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var OF=Ut((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};Mt(this,e),this.name=t,this.parent=n,this.node=r}));function DF(e,t){for(var n=t instanceof wD?t:new wD(t),r=e,i=_D(n);null!==i;){var a=lo(r.node.children,i)||{children:{},childCount:0};r=new OF(i,r,a),i=_D(n=ED(n))}return r}function LF(e){return e.node.value}function MF(e,t){e.node.value=t,BF(e)}function FF(e){return e.node.childCount>0}function UF(e,t){BO(e.node.children,(function(n,r){t(new OF(n,e,r))}))}function jF(e,t,n,r){n&&!r&&t(e),UF(e,(function(e){jF(e,t,!0,r)})),n&&r&&t(e)}function VF(e){return new wD(null===e.parent?e.name:VF(e.parent)+"/"+e.name)}function BF(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===LF(e)&&!FF(e)}(n),i=co(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,BF(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,BF(e))}(e.parent,e.name,e)}var qF=/[\[\].#$\/\u0000-\u001F\u007F]/,zF=/[\[\].#$\u0000-\u001F\u007F]/,WF=10485760,KF=function(e){return"string"===typeof e&&0!==e.length&&!qF.test(e)},GF=function(e){return"string"===typeof e&&0!==e.length&&!zF.test(e)},HF=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!OO(e)||e&&"object"===typeof e&&co(e,".sv")},QF=function(e,t,n,r){r&&void 0===t||YF(Eo(e,"value"),t,n)},YF=function e(t,n,r){var i=r instanceof wD?new DD(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+MD(i));if("function"===typeof n)throw new Error(t+"contains a function "+MD(i)+" with contents = "+n.toString());if(OO(n))throw new Error(t+"contains "+n.toString()+" "+MD(i));if("string"===typeof n&&n.length>WF/3&&To(n)>WF)throw new Error(t+"contains a string greater than "+WF+" utf8 bytes "+MD(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(BO(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!KF(n)))throw new Error(t+" contains an invalid key ("+n+") "+MD(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var u,s;s=n,(u=i).parts_.length>0&&(u.byteLength_+=1),u.parts_.push(s),u.byteLength_+=To(s),LD(u),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=To(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+MD(i)+" in addition to actual children.")}},$F=function(e,t,n,r){if(!r||void 0!==t){var i=Eo(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var a=[];BO(t,(function(e,t){var r=new wD(e);if(YF(i,t,CD(n,r)),".priority"===SD(r)&&!HF(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=ID(r=t[n]),a=0;a<i.length;a++)if(".priority"===i[a]&&a===i.length-1);else if(!KF(i[a]))throw new Error(e+"contains an invalid key ("+i[a]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(AD);var o=null;for(n=0;n<t.length;n++){if(r=t[n],null!==o&&OD(o,r))throw new Error(e+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(i,a)}},JF=function(e,t,n){if(!n||void 0!==t){if(OO(t))throw new Error(Eo(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!HF(t))throw new Error(Eo(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},XF=function(e,t,n,r){if((!r||void 0!==n)&&!KF(n))throw new Error(Eo(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ZF=function(e,t,n,r){if((!r||void 0!==n)&&!GF(n))throw new Error(Eo(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},eU=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ZF(e,t,n,r)},tU=function(e,t){if(".info"===_D(t))throw new Error(e+" failed = Can't modify data under /.info/")},nU=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!KF(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),GF(e)}(n))throw new Error(Eo(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},rU=Ut((function e(){Mt(this,e),this.eventLists_=[],this.recursionDepth_=0}));function iU(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||RD(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function aU(e,t,n){iU(e,n),uU(e,(function(e){return RD(e,t)}))}function oU(e,t,n){iU(e,n),uU(e,(function(e){return OD(e,t)||OD(t,e)}))}function uU(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(sU(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function sU(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();SO&&CO("event: "+n.toString()),KO(r)}}}var cU="repo_interrupt",lU=25,fU=function(){function e(t,n,r,i){Mt(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new rU,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=LL(),this.transactionQueueTree_=new OF,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return Ut(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function hU(e,t,n){if(e.stats_=oD(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new OL(e.repoInfo_,(function(t,n,r,i){vU(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return yU(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{uo(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new jD(e.repoInfo_,t,(function(t,n,r,i){vU(e,t,n,r,i)}),(function(t){yU(e,t)}),(function(t){!function(e,t){BO(t,(function(t,n){mU(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return aD[n]||(aD[n]=t()),aD[n]}(e.repoInfo_,(function(){return new BL(e.stats_,e.server_)})),e.infoData_=new DL,e.infoSyncTree_=new iF({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=sF(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),mU(e,"connected",!1),e.serverSyncTree_=new iF({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);oU(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function dU(e){var t=e.infoData_.getNode(new wD(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function pU(e){return IF({timestamp:dU(e)})}function vU(e,t,n,r,i){e.dataUpdateCount++;var a=new wD(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var u=ho(n,(function(e){return yL(e)}));o=function(e,t,n,r){var i=wF(e,r);if(i){var a=bF(i),o=a.path,u=a.queryId,s=PD(o,t),c=nM.fromObject(n);return _F(e,o,new HL(qL(u),s,c))}return[]}(e.serverSyncTree_,a,u,i)}else{var s=yL(n);o=lF(e.serverSyncTree_,a,s,i)}else if(r){var c=ho(n,(function(e){return yL(e)}));o=function(e,t,n){var r=nM.fromObject(n);return pF(e,new HL({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=yL(n);o=sF(e.serverSyncTree_,a,l)}var f=a;o.length>0&&(f=CU(e,a)),oU(e.eventQueue_,f,o)}function yU(e,t){mU(e,"connected",t),!1===t&&function(e){EU(e,"onDisconnectEvents");var t=pU(e),n=LL();UL(e.onDisconnect_,bD(),(function(r,i){var a=PF(r,i,e.serverSyncTree_,t);ML(n,r,a)}));var r=[];UL(n,bD(),(function(t,n){r=r.concat(sF(e.serverSyncTree_,t,n));var i=OU(e,t);CU(e,i)})),e.onDisconnect_=LL(),oU(e.eventQueue_,bD(),r)}(e)}function mU(e,t,n){var r=new wD("/.info/"+t),i=yL(n);e.infoData_.updateSnapshot(r,i);var a=sF(e.infoSyncTree_,r,i);oU(e.eventQueue_,r,a)}function gU(e){return e.nextWriteId_++}function kU(e,t,n,r,i){EU(e,"set",{path:t.toString(),value:n,priority:r});var a=pU(e),o=yL(n,r),u=hF(e.serverSyncTree_,t),s=AF(o,u,a),c=gU(e),l=aF(e.serverSyncTree_,t,s,c,!0);iU(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||RO("set at "+t+" failed: "+n);var o=uF(e.serverSyncTree_,c,!a);oU(e.eventQueue_,t,o),SU(e,i,n,r)}));var f=OU(e,t);CU(e,f),oU(e.eventQueue_,f,[])}function wU(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&FL(e.onDisconnect_,t),SU(e,n,r,i)}))}function bU(e,t,n,r){var i=yL(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,a){"ok"===n&&ML(e.onDisconnect_,t,i),SU(e,r,n,a)}))}function _U(e,t,n){var r;r=".info"===_D(t._path)?cF(e.infoSyncTree_,t,n):cF(e.serverSyncTree_,t,n),aU(e.eventQueue_,t._path,r)}function xU(e){e.persistentConnection_&&e.persistentConnection_.interrupt(cU)}function EU(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];CO.apply(void 0,[t].concat(r))}function SU(e,t,n,r){t&&KO((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function IU(e,t,n){return hF(e.serverSyncTree_,t,n)||dL.EMPTY_NODE}function TU(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||RU(e,t),LF(t)){var n=PU(e,t);La(n.length>0,"Sending zero length transaction queue"),n.every((function(e){return 0===e.status}))&&function(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=IU(e,t,r),a=i,o=i.hash(),u=0;u<n.length;u++){var s=n[u];La(0===s.status,"tryToSendTransactionQueue_: items in queue should all be run."),s.status=1,s.retryCount++;var c=PD(t,s.path);a=a.updateChild(c,s.currentOutputSnapshotRaw)}var l=a.val(!0),f=t;e.server_.put(f.toString(),l,(function(r){EU(e,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(uF(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},u=0;u<n.length;u++)o(u);RU(e,DF(e.transactionQueueTree_,t)),TU(e,e.transactionQueueTree_),oU(e.eventQueue_,t,i);for(var s=0;s<a.length;s++)KO(a[s])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{RO("transaction at "+f.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}CU(e,t)}}),o)}(e,VF(t),n)}else FF(t)&&UF(t,(function(t){TU(e,t)}))}function CU(e,t){var n=NU(e,t),r=VF(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),u=function(a){var u,s,c=t[a],l=PD(n,c.path),f=!1;if(La(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)f=!0,u=c.abortReason,i=i.concat(uF(e.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=lU)f=!0,u="maxretry",i=i.concat(uF(e.serverSyncTree_,c.currentWriteId,!0));else{var h=IU(e,c.path,o);c.currentInputSnapshot=h;var d=t[a].update(h.val());if(void 0!==d){YF("transaction failed: Data returned ",d,c.path);var p=yL(d);"object"===typeof d&&null!=d&&co(d,".priority")||(p=p.updatePriority(h.getPriority()));var v=c.currentWriteId,y=pU(e),m=AF(p,h,y);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=m,c.currentWriteId=gU(e),o.splice(o.indexOf(v),1),i=(i=i.concat(aF(e.serverSyncTree_,c.path,m,c.currentWriteId,c.applyLocally))).concat(uF(e.serverSyncTree_,v,!0))}else f=!0,u="nodata",i=i.concat(uF(e.serverSyncTree_,c.currentWriteId,!0))}oU(e.eventQueue_,n,i),i=[],f&&(t[a].status=2,s=t[a].unwatcher,setTimeout(s,Math.floor(0)),t[a].onComplete&&("nodata"===u?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(u),!1,null)}))))},s=0;s<t.length;s++)u(s);RU(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)KO(r[c]);TU(e,e.transactionQueueTree_)}(e,PU(e,n),r),r}function NU(e,t){var n,r=e.transactionQueueTree_;for(n=_D(t);null!==n&&void 0===LF(r);)r=DF(r,n),n=_D(t=ED(t));return r}function PU(e,t){var n=[];return AU(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function AU(e,t,n){var r=LF(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);UF(t,(function(t){AU(e,t,n)}))}function RU(e,t){var n=LF(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,MF(t,n.length>0?n:void 0)}UF(t,(function(t){RU(e,t)}))}function OU(e,t){var n=VF(NU(e,t)),r=DF(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){DU(e,t)})),DU(e,r),jF(r,(function(t){DU(e,t)})),n}function DU(e,t){var n=LF(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(La(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(La(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(uF(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?MF(t,void 0):n.length=a+1,oU(e.eventQueue_,VF(t),i);for(var u=0;u<r.length;u++)KO(r[u])}}var LU=function(e,t){var n=MU(e),r=n.namespace;"firebase.com"===n.domain&&AO(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||AO("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&RO("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new tD(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new wD(n.pathString)}},MU=function(e){var t="",n="",r="",i="",a="",o=!0,u="https",s=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(u=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var f=e.indexOf("?");-1===f&&(f=e.length),t=e.substring(0,Math.min(l,f)),l<f&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(l,f)));var h=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=Qt(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):RO("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,f)));(c=t.indexOf(":"))>=0?(o="https"===u||"wss"===u,s=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in h&&(a=h.ns)}return{host:t,port:s,domain:n,subdomain:r,secure:o,scheme:u,pathString:i,namespace:a}},FU="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",UU=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=FU.charAt(n%64),n=Math.floor(n/64);La(0===n,"Cannot push at time == 0");var o=a.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=FU.charAt(t[r]);return La(20===o.length,"nextPushId: Length should be 20."),o}}(),jU=function(){function e(t,n,r,i){Mt(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return Ut(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+uo(this.snapshot.exportVal())}}]),e}(),VU=function(){function e(t,n,r){Mt(this,e),this.eventRegistration=t,this.error=n,this.path=r}return Ut(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),BU=function(){function e(t,n){Mt(this,e),this.snapshotCallback=t,this.cancelCallback=n}return Ut(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return La(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),qU=function(){function e(t,n){Mt(this,e),this._repo=t,this._path=n}return Ut(e,[{key:"cancel",value:function(){var e=new Ha;return wU(this._repo,this._path,e.wrapCallback((function(){}))),e.promise}},{key:"remove",value:function(){tU("OnDisconnect.remove",this._path);var e=new Ha;return bU(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise}},{key:"set",value:function(e){tU("OnDisconnect.set",this._path),QF("OnDisconnect.set",e,this._path,!1);var t=new Ha;return bU(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}},{key:"setWithPriority",value:function(e,t){tU("OnDisconnect.setWithPriority",this._path),QF("OnDisconnect.setWithPriority",e,this._path,!1),JF("OnDisconnect.setWithPriority",t,!1);var n=new Ha;return function(e,t,n,r,i){var a=yL(n,r);e.server_.onDisconnectPut(t.toString(),a.val(!0),(function(n,r){"ok"===n&&ML(e.onDisconnect_,t,a),SU(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise}},{key:"update",value:function(e){tU("OnDisconnect.update",this._path),$F("OnDisconnect.update",e,this._path,!1);var t=new Ha;return function(e,t,n,r){if(fo(n))return CO("onDisconnect().update() called with empty data.  Don't do anything."),void SU(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,a){"ok"===i&&BO(n,(function(n,r){var i=yL(r);ML(e.onDisconnect_,CD(t,n),i)})),SU(0,r,i,a)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}}]),e}(),zU=function(){function e(t,n,r,i){Mt(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return Ut(e,[{key:"key",get:function(){return ND(this._path)?null:SD(this._path)}},{key:"ref",get:function(){return new HU(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=RL(this._queryParams),t=jO(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return RL(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=Co(t))instanceof e))return!1;var n=this._repo===t._repo,r=RD(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();function WU(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function KU(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===WD){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==DO)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==LO)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===uL){if(null!=t&&!HF(t)||null!=n&&!HF(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(La(e.getIndex()instanceof mL||e.getIndex()===kL,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function GU(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var HU=function(e){Vt(n,e);var t=Wt(n);function n(e,r){return Mt(this,n),t.call(this,e,r,new TL,!1)}return Ut(n,[{key:"parent",get:function(){var e=TD(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(zU),QU=function(){function e(t,n,r){Mt(this,e),this._node=t,this.ref=n,this._index=r}return Ut(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new wD(t),r=JU(this.ref,t);return new e(this._node.getChild(n),r,uL)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,JU(n.ref,r),uL))}))}},{key:"hasChild",value:function(e){var t=new wD(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function YU(e,t){return(e=Co(e))._checkNotDeleted("ref"),void 0!==t?JU(e._root,t):e._root}function $U(e,t){(e=Co(e))._checkNotDeleted("refFromURL");var n=LU(t,e._repo.repoInfo_.nodeAdmin);nU("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||AO("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),YU(e,n.path.toString())}function JU(e,t){return null===_D((e=Co(e))._path)?eU("child","path",t,!1):ZF("child","path",t,!1),new HU(e._repo,CD(e._path,t))}function XU(e,t){e=Co(e),tU("set",e._path),QF("set",t,e._path,!1);var n=new Ha;return kU(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function ZU(e,t){$F("update",t,e._path,!1);var n=new Ha;return function(e,t,n,r){EU(e,"update",{path:t.toString(),value:n});var i=!0,a=pU(e),o={};if(BO(n,(function(n,r){i=!1,o[n]=PF(CD(t,n),yL(r),e.serverSyncTree_,a)})),i)CO("update() called with empty data.  Don't do anything."),SU(0,r,"ok",void 0);else{var u=gU(e),s=oF(e.serverSyncTree_,t,o,u);iU(e.eventQueue_,s),e.server_.merge(t.toString(),n,(function(n,i){var a="ok"===n;a||RO("update at "+t+" failed: "+n);var o=uF(e.serverSyncTree_,u,!a),s=o.length>0?CU(e,t):t;oU(e.eventQueue_,s,o),SU(0,r,n,i)})),BO(n,(function(n){var r=OU(e,CD(t,n));CU(e,r)})),oU(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function ej(e){e=Co(e);var t=new BU((function(){})),n=new tj(t);return function(e,t,n){var r=dF(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((function(r){var i,a=yL(r).withIndex(t._queryParams.getIndex());if(fF(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())i=sF(e.serverSyncTree_,t._path,a);else{var o=gF(e.serverSyncTree_,t);i=lF(e.serverSyncTree_,t._path,a,o)}return oU(e.eventQueue_,t._path,i),cF(e.serverSyncTree_,t,n,null,!0),a}),(function(n){return EU(e,"get for query "+uo(t)+" failed: "+n),Promise.reject(new Error(n))}))}(e._repo,e,n).then((function(t){return new QU(t,new HU(e._repo,e._path),e._queryParams.getIndex())}))}var tj=function(){function e(t){Mt(this,e),this.callbackContext=t}return Ut(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new jU("value",this,new QU(e.snapshotNode,new HU(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new VU(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),nj=function(){function e(t,n){Mt(this,e),this.eventType=t,this.callbackContext=n}return Ut(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new VU(this,e,t):null}},{key:"createEvent",value:function(e,t){La(null!=e.childName,"Child events should have a childName.");var n=JU(new HU(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new jU(e.type,this,new QU(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function rj(e,t,n,r,i){var a;if("object"===typeof r&&(a=void 0,i=r),"function"===typeof r&&(a=r),i&&i.onlyOnce){var o=n,u=function(t,n){_U(e._repo,e,c),o(t,n)};u.userCallback=n.userCallback,u.context=n.context,n=u}var s=new BU(n,a||void 0),c="value"===t?new tj(s):new nj(t,s);return function(e,t,n){var r;r=".info"===_D(t._path)?fF(e.infoSyncTree_,t,n):fF(e.serverSyncTree_,t,n),aU(e.eventQueue_,t._path,r)}(e._repo,e,c),function(){return _U(e._repo,e,c)}}function ij(e,t,n,r){return rj(e,"value",t,n,r)}function aj(e,t,n,r){return rj(e,"child_added",t,n,r)}function oj(e,t,n,r){return rj(e,"child_changed",t,n,r)}function uj(e,t,n,r){return rj(e,"child_moved",t,n,r)}function sj(e,t,n,r){return rj(e,"child_removed",t,n,r)}function cj(e,t,n){var r=null,i=n?new BU(n):null;"value"===t?r=new tj(i):t&&(r=new nj(t,i)),_U(e._repo,e,r)}var lj=Ut((function e(){Mt(this,e)})),fj=function(e){Vt(n,e);var t=Wt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this))._value=e,i._key=r,i}return Ut(n,[{key:"_apply",value:function(e){QF("endAt",this._value,e._path,!0);var t=NL(e._queryParams,this._value,this._key);if(GU(t),KU(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new zU(e._repo,e._path,t,e._orderByCalled)}}]),n}(lj);var hj=function(e){Vt(n,e);var t=Wt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this))._value=e,i._key=r,i}return Ut(n,[{key:"_apply",value:function(e){QF("endBefore",this._value,e._path,!1);var t=function(e,t,n){var r;return(r=e.index_===WD||n?NL(e,t,n):NL(e,t,DO)).endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(GU(t),KU(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new zU(e._repo,e._path,t,e._orderByCalled)}}]),n}(lj);var dj=function(e){Vt(n,e);var t=Wt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this))._value=e,i._key=r,i}return Ut(n,[{key:"_apply",value:function(e){QF("startAt",this._value,e._path,!0);var t=CL(e._queryParams,this._value,this._key);if(GU(t),KU(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new zU(e._repo,e._path,t,e._orderByCalled)}}]),n}(lj);var pj=function(e){Vt(n,e);var t=Wt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this))._value=e,i._key=r,i}return Ut(n,[{key:"_apply",value:function(e){QF("startAfter",this._value,e._path,!1);var t=function(e,t,n){var r;return(r=e.index_===WD||n?CL(e,t,n):CL(e,t,LO)).startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(GU(t),KU(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new zU(e._repo,e._path,t,e._orderByCalled)}}]),n}(lj);var vj=function(e){Vt(n,e);var t=Wt(n);function n(e){var r;return Mt(this,n),(r=t.call(this))._limit=e,r}return Ut(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new zU(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(lj);var yj=function(e){Vt(n,e);var t=Wt(n);function n(e){var r;return Mt(this,n),(r=t.call(this))._limit=e,r}return Ut(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new zU(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(lj);var mj=function(e){Vt(n,e);var t=Wt(n);function n(e){var r;return Mt(this,n),(r=t.call(this))._path=e,r}return Ut(n,[{key:"_apply",value:function(e){WU(e,"orderByChild");var t=new wD(this._path);if(ND(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new mL(t),r=PL(e._queryParams,n);return KU(r),new zU(e._repo,e._path,r,!0)}}]),n}(lj);var gj=function(e){Vt(n,e);var t=Wt(n);function n(){return Mt(this,n),t.apply(this,arguments)}return Ut(n,[{key:"_apply",value:function(e){WU(e,"orderByKey");var t=PL(e._queryParams,WD);return KU(t),new zU(e._repo,e._path,t,!0)}}]),n}(lj);var kj=function(e){Vt(n,e);var t=Wt(n);function n(){return Mt(this,n),t.apply(this,arguments)}return Ut(n,[{key:"_apply",value:function(e){WU(e,"orderByPriority");var t=PL(e._queryParams,uL);return KU(t),new zU(e._repo,e._path,t,!0)}}]),n}(lj);var wj=function(e){Vt(n,e);var t=Wt(n);function n(){return Mt(this,n),t.apply(this,arguments)}return Ut(n,[{key:"_apply",value:function(e){WU(e,"orderByValue");var t=PL(e._queryParams,kL);return KU(t),new zU(e._repo,e._path,t,!0)}}]),n}(lj);var bj=function(e){Vt(n,e);var t=Wt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this))._value=e,i._key=r,i}return Ut(n,[{key:"_apply",value:function(e){if(QF("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new fj(this._value,this._key)._apply(new dj(this._value,this._key)._apply(e))}}]),n}(lj);function _j(e){for(var t=Co(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0,o=r;a<o.length;a++){t=o[a]._apply(t)}return t}!function(e){La(!UM,"__referenceConstructor has already been defined"),UM=e}(HU),function(e){La(!KM,"__referenceConstructor has already been defined"),KM=e}(HU);var xj="FIREBASE_DATABASE_EMULATOR_HOST",Ej={},Sj=!1;function Ij(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||AO("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),CO("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,u=LU(a,i),s=u.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"/BunnuFlix",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}[xj]),c?(o=!0,a="http://".concat(c,"?ns=").concat(s.namespace),s=(u=LU(a,i)).repoInfo):o=!u.repoInfo.secure;var l=i&&o?new YO(YO.OWNER):new QO(e.name,e.options,t);nU("Invalid Firebase Database URL",u),ND(u.path)||AO("Database URL must point to the root of a Firebase Database (not including a child path).");var f=function(e,t,n,r){var i=Ej[t.name];i||(i={},Ej[t.name]=i);var a=i[e.toURLString()];a&&AO("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new fU(e,Sj,n,r),i[e.toURLString()]=a,a}(s,e,l,new HO(e.name,n));return new Tj(f,e)}var Tj=function(){function e(t,n){Mt(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return Ut(e,[{key:"_repo",get:function(){return this._instanceStarted||(hU(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new HU(this._repo,bD())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=Ej[t];n&&n[e.key]===e||AO("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),xU(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&AO("Cannot call "+e+" on a deleted database.")}}]),e}();function Cj(){dD.IS_TRANSPORT_INITIALIZED&&RO("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Nj(){Cj(),cD.forceDisallow()}function Pj(){Cj(),hD.forceDisallow(),cD.forceAllow()}function Aj(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=Co(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&AO("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&AO('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new YO(YO.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:Qa(r.mockUserToken,e.app.options.projectId);a=new YO(o)}!function(e,t,n,r){e.repoInfo_=new tD("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,a)}function Rj(e){var t;(e=Co(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(cU)}function Oj(e,t){TO(e,t)}var Dj={".sv":"timestamp"};var Lj=function(){function e(t,n){Mt(this,e),this.committed=t,this.snapshot=n}return Ut(e,[{key:"toJSON",value:function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}();function Mj(e,t,n){var r;if(e=Co(e),tU("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,a=new Ha,o=ij(e,(function(){}));return function(e,t,n,r,i,a){EU(e,"transaction on "+t);var o={path:t,update:n,onComplete:r,status:null,order:_O(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=IU(e,t,void 0);o.currentInputSnapshot=u;var s=o.update(u.val());if(void 0===s)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{YF("transaction failed: Data returned ",s,o.path),o.status=0;var c,l=DF(e.transactionQueueTree_,t),f=LF(l)||[];f.push(o),MF(l,f),"object"===typeof s&&null!==s&&co(s,".priority")?(c=lo(s,".priority"),La(HF(c),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):c=(hF(e.serverSyncTree_,t)||dL.EMPTY_NODE).getPriority().val();var h=pU(e),d=yL(s,c),p=AF(d,u,h);o.currentOutputSnapshotRaw=d,o.currentOutputSnapshotResolved=p,o.currentWriteId=gU(e);var v=aF(e.serverSyncTree_,t,p,o.currentWriteId,o.applyLocally);oU(e.eventQueue_,t,v),TU(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(function(t,n,r){var i=null;t?a.reject(t):(i=new QU(r,new HU(e._repo,e._path),uL),a.resolve(new Lj(n,i)))}),o,i),a.promise}jD.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},jD.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){vO(xu),yu(new No("database",(function(e,t){var n=t.instanceIdentifier;return Ij(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Nu(hO,dO,e),Nu(hO,dO,"esm2017")}();var Fj=new Vo("@firebase/database-compat"),Uj=function(e){var t="FIREBASE WARNING: "+e;Fj.warn(t)},jj=function(){function e(t){Mt(this,e),this._delegate=t}return Ut(e,[{key:"cancel",value:function(e){xo("OnDisconnect.cancel",0,1,arguments.length),So("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"remove",value:function(e){xo("OnDisconnect.remove",0,1,arguments.length),So("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"set",value:function(e,t){xo("OnDisconnect.set",1,2,arguments.length),So("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"setWithPriority",value:function(e,t,n){xo("OnDisconnect.setWithPriority",2,3,arguments.length),So("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"update",value:function(e,t){if(xo("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,Uj("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}So("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}}]),e}(),Vj=function(){function e(t,n){Mt(this,e),this.committed=t,this.snapshot=n}return Ut(e,[{key:"toJSON",value:function(){return xo("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}(),Bj=function(){function e(t,n){Mt(this,e),this._database=t,this._delegate=n}return Ut(e,[{key:"val",value:function(){return xo("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}},{key:"exportVal",value:function(){return xo("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}},{key:"toJSON",value:function(){return xo("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"exists",value:function(){return xo("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}},{key:"child",value:function(t){return xo("DataSnapshot.child",0,1,arguments.length),t=String(t),ZF("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))}},{key:"hasChild",value:function(e){return xo("DataSnapshot.hasChild",1,1,arguments.length),ZF("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}},{key:"getPriority",value:function(){return xo("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}},{key:"forEach",value:function(t){var n=this;return xo("DataSnapshot.forEach",1,1,arguments.length),So("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))}},{key:"hasChildren",value:function(){return xo("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}},{key:"key",get:function(){return this._delegate.key}},{key:"numChildren",value:function(){return xo("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}},{key:"getRef",value:function(){return xo("DataSnapshot.ref",0,0,arguments.length),new zj(this._database,this._delegate.ref)}},{key:"ref",get:function(){return this.getRef()}}]),e}(),qj=function(){function e(t,n){Mt(this,e),this.database=t,this._delegate=n}return Ut(e,[{key:"on",value:function(t,n,r,i){var a,o=this;xo("Query.on",2,4,arguments.length),So("Query.on","callback",n,!1);var u=e.getCancelAndContextArgs_("Query.on",r,i),s=function(e,t){n.call(u.context,new Bj(o.database,e),t)};s.userCallback=n,s.context=u.context;var c=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(t){case"value":return ij(this._delegate,s,c),n;case"child_added":return aj(this._delegate,s,c),n;case"child_removed":return sj(this._delegate,s,c),n;case"child_changed":return oj(this._delegate,s,c),n;case"child_moved":return uj(this._delegate,s,c),n;default:throw new Error(Eo("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}},{key:"off",value:function(e,t,n){if(xo("Query.off",0,3,arguments.length),function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Eo(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}("Query.off",e,!0),So("Query.off","callback",t,!0),Io("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,cj(this._delegate,e,r)}else cj(this._delegate,e)}},{key:"get",value:function(){var e=this;return ej(this._delegate).then((function(t){return new Bj(e.database,t)}))}},{key:"once",value:function(t,n,r,i){var a=this;xo("Query.once",1,4,arguments.length),So("Query.once","callback",n,!0);var o=e.getCancelAndContextArgs_("Query.once",r,i),u=new Ha,s=function(e,t){var r=new Bj(a.database,e);n&&n.call(o.context,r,t),u.resolve(r)};s.userCallback=n,s.context=o.context;var c=function(e){o.cancel&&o.cancel.call(o.context,e),u.reject(e)};switch(t){case"value":ij(this._delegate,s,c,{onlyOnce:!0});break;case"child_added":aj(this._delegate,s,c,{onlyOnce:!0});break;case"child_removed":sj(this._delegate,s,c,{onlyOnce:!0});break;case"child_changed":oj(this._delegate,s,c,{onlyOnce:!0});break;case"child_moved":uj(this._delegate,s,c,{onlyOnce:!0});break;default:throw new Error(Eo("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}},{key:"limitToFirst",value:function(t){return xo("Query.limitToFirst",1,1,arguments.length),new e(this.database,_j(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new vj(e)}(t)))}},{key:"limitToLast",value:function(t){return xo("Query.limitToLast",1,1,arguments.length),new e(this.database,_j(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new yj(e)}(t)))}},{key:"orderByChild",value:function(t){return xo("Query.orderByChild",1,1,arguments.length),new e(this.database,_j(this._delegate,function(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return ZF("orderByChild","path",e,!1),new mj(e)}(t)))}},{key:"orderByKey",value:function(){return xo("Query.orderByKey",0,0,arguments.length),new e(this.database,_j(this._delegate,new gj))}},{key:"orderByPriority",value:function(){return xo("Query.orderByPriority",0,0,arguments.length),new e(this.database,_j(this._delegate,new kj))}},{key:"orderByValue",value:function(){return xo("Query.orderByValue",0,0,arguments.length),new e(this.database,_j(this._delegate,new wj))}},{key:"startAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return xo("Query.startAt",0,2,arguments.length),new e(this.database,_j(this._delegate,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return XF("startAt","key",t,!0),new dj(e,t)}(t,n)))}},{key:"startAfter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return xo("Query.startAfter",0,2,arguments.length),new e(this.database,_j(this._delegate,function(e,t){return XF("startAfter","key",t,!0),new pj(e,t)}(t,n)))}},{key:"endAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return xo("Query.endAt",0,2,arguments.length),new e(this.database,_j(this._delegate,function(e,t){return XF("endAt","key",t,!0),new fj(e,t)}(t,n)))}},{key:"endBefore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return xo("Query.endBefore",0,2,arguments.length),new e(this.database,_j(this._delegate,function(e,t){return XF("endBefore","key",t,!0),new hj(e,t)}(t,n)))}},{key:"equalTo",value:function(t,n){return xo("Query.equalTo",1,2,arguments.length),new e(this.database,_j(this._delegate,function(e,t){return XF("equalTo","key",t,!0),new bj(e,t)}(t,n)))}},{key:"toString",value:function(){return xo("Query.toString",0,0,arguments.length),this._delegate.toString()}},{key:"toJSON",value:function(){return xo("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"isEqual",value:function(t){if(xo("Query.isEqual",1,1,arguments.length),!(t instanceof e)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}return this._delegate.isEqual(t._delegate)}},{key:"ref",get:function(){return new zj(this.database,new HU(this._delegate._repo,this._delegate._path))}}],[{key:"getCancelAndContextArgs_",value:function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,So(e,"cancel",r.cancel,!0),r.context=n,Io(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(Eo(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}}]),e}(),zj=function(e){Vt(n,e);var t=Wt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this,e,new zU(r._repo,r._path,new TL,!1))).database=e,i._delegate=r,i}return Ut(n,[{key:"getKey",value:function(){return xo("Reference.key",0,0,arguments.length),this._delegate.key}},{key:"child",value:function(e){return xo("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new n(this.database,JU(this._delegate,e))}},{key:"getParent",value:function(){xo("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new n(this.database,e):null}},{key:"getRoot",value:function(){return xo("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}},{key:"set",value:function(e,t){xo("Reference.set",1,2,arguments.length),So("Reference.set","onComplete",t,!0);var n=XU(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"update",value:function(e,t){if(xo("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,Uj("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}tU("Reference.update",this._delegate._path),So("Reference.update","onComplete",t,!0);var i=ZU(this._delegate,e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}},{key:"setWithPriority",value:function(e,t,n){xo("Reference.setWithPriority",2,3,arguments.length),So("Reference.setWithPriority","onComplete",n,!0);var r=function(e,t,n){if(tU("setWithPriority",e._path),QF("setWithPriority",t,e._path,!1),JF("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new Ha;return kU(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"remove",value:function(e){xo("Reference.remove",0,1,arguments.length),So("Reference.remove","onComplete",e,!0);var t,n=(t=this._delegate,tU("remove",t._path),XU(t,null));return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n}},{key:"transaction",value:function(e,t,n){var r=this;xo("Reference.transaction",1,3,arguments.length),So("Reference.transaction","transactionUpdate",e,!1),So("Reference.transaction","onComplete",t,!0),function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(Eo(e,t)+"must be a boolean.")}("Reference.transaction","applyLocally",n,!0);var i=Mj(this._delegate,e,{applyLocally:n}).then((function(e){return new Vj(e.committed,new Bj(r.database,e.snapshot))}));return t&&i.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),i}},{key:"setPriority",value:function(e,t){xo("Reference.setPriority",1,2,arguments.length),So("Reference.setPriority","onComplete",t,!0);var n=function(e,t){e=Co(e),tU("setPriority",e._path),JF("setPriority",t,!1);var n=new Ha;return kU(e._repo,CD(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"push",value:function(e,t){var r=this;xo("Reference.push",0,2,arguments.length),So("Reference.push","onComplete",t,!0);var i=function(e,t){e=Co(e),tU("push",e._path),QF("push",t,e._path,!0);var n,r=dU(e._repo),i=UU(r),a=JU(e,i),o=JU(e,i);return n=null!=t?XU(o,t).then((function(){return o})):Promise.resolve(o),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}(this._delegate,e),a=i.then((function(e){return new n(r.database,e)}));t&&a.then((function(){return t(null)}),(function(e){return t(e)}));var o=new n(this.database,i);return o.then=a.then.bind(a),o.catch=a.catch.bind(a,void 0),o}},{key:"onDisconnect",value:function(){return tU("Reference.onDisconnect",this._delegate._path),new jj(new qU(this._delegate._repo,this._delegate._path))}},{key:"key",get:function(){return this.getKey()}},{key:"parent",get:function(){return this.getParent()}},{key:"root",get:function(){return this.getRoot()}}]),n}(qj),Wj=function(){function e(t,n){var r=this;Mt(this,e),this._delegate=t,this.app=n,this.INTERNAL={delete:function(){return r._delegate._delete()},forceWebSockets:Nj,forceLongPolling:Pj}}return Ut(e,[{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Aj(this._delegate,e,t,n)}},{key:"ref",value:function(e){if(xo("database.ref",0,1,arguments.length),e instanceof zj){var t=$U(this._delegate,e.toString());return new zj(this,t)}var n=YU(this._delegate,e);return new zj(this,n)}},{key:"refFromURL",value:function(e){xo("database.refFromURL",1,1,arguments.length);var t=$U(this._delegate,e);return new zj(this,t)}},{key:"goOffline",value:function(){return xo("database.goOffline",0,0,arguments.length),function(e){(e=Co(e))._checkNotDeleted("goOffline"),xU(e._repo)}(this._delegate)}},{key:"goOnline",value:function(){return xo("database.goOnline",0,0,arguments.length),Rj(this._delegate)}}]),e}();Wj.ServerValue={TIMESTAMP:Dj,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}};var Kj=Object.freeze({__proto__:null,initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,a=e.namespace,o=e.nodeAdmin,u=void 0!==o&&o;vO(r);var s=new Ao("auth-internal",new Do("database-standalone"));return s.setComponent(new No("auth-internal",(function(){return i}),"PRIVATE")),{instance:new Wj(Ij(t,s,void 0,n,u),t),namespace:a}}}),Gj=Wj.ServerValue;!function(e){e.INTERNAL.registerComponent(new No("database-compat",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new Wj(i,r)}),"PUBLIC").setServiceProps({Reference:zj,Query:qj,Database:Wj,DataSnapshot:Bj,enableLogging:Oj,INTERNAL:Kj,ServerValue:Gj}).setMultipleInstances(!0)),e.registerVersion("@firebase/database-compat","0.3.4")}(ts);ts.initializeApp({apiKey:"AIzaSyAdXnQdlFWT5_BefeIEyshV9_tmRYBaaXA",authDomain:"netflix-clone-5cc67.firebaseapp.com",projectId:"netflix-clone-5cc67",storageBucket:"netflix-clone-5cc67.appspot.com",messagingSenderId:"476568395064",appId:"1:476568395064:web:8f6f41943da3fc107375cd"}).firestore();var Hj=ts.auth();var Qj=function(){var e=(0,t.useRef)(null),n=(0,t.useRef)(null);return(0,ur.jsx)("div",{className:"signupScreen",children:(0,ur.jsxs)("form",{children:[(0,ur.jsx)("h1",{children:"Sign In"}),(0,ur.jsx)("input",{ref:e,type:"email",placeholder:"Email"}),(0,ur.jsx)("input",{ref:n,type:"password",placeholder:"Password"}),(0,ur.jsx)("button",{type:"submit",onClick:function(t){t.preventDefault(),Hj.signInWithEmailAndPassword(e.current.value,n.current.value).then((function(e){console.log(e)})).catch((function(e){return alert(e.message)}))},children:"Sign In"}),(0,ur.jsxs)("h4",{style:{textAlign:"left"},children:[(0,ur.jsx)("span",{className:"ss_grey",children:"New to Netflix? Fill details and go here  "}),(0,ur.jsx)("span",{style:{paddingLeft:"100px"},className:"ss_link",onClick:function(t){t.preventDefault(),Hj.createUserWithEmailAndPassword(e.current.value,n.current.value).then((function(e){console.log(e)})).catch((function(e){return alert(e.message)}))},children:"Sign up now."})]})]})})};var Yj=function(){var e=Ot((0,t.useState)(!1),2),n=e[0],r=e[1];return(0,ur.jsxs)("div",{className:"loginScreen",children:[(0,ur.jsxs)("div",{className:"loginScreen_bg",children:[(0,ur.jsx)("img",{className:"loginScreen_logo",src:"https://assets.stickpng.com/images/580b57fcd9996e24bc43c529.png",alt:"bg"}),(0,ur.jsx)("button",{onClick:function(){return r(!0)},className:"btn",children:"Sign In"}),(0,ur.jsx)("div",{className:"loginScreen_gradient"})]}),(0,ur.jsx)("div",{className:"loginScreen_body",children:n?(0,ur.jsx)(Qj,{}):(0,ur.jsxs)(ur.Fragment,{children:[(0,ur.jsx)("h1",{children:"Unlimited films, TV programmes and more."}),(0,ur.jsx)("h2",{children:"Watch anywhere. Cancel at any time"}),(0,ur.jsx)("div",{className:"loginScreen_input",children:(0,ur.jsxs)("form",{children:[(0,ur.jsx)("input",{type:"email",placeholder:"Email address"}),(0,ur.jsx)("button",{onClick:function(){return r(!0)},className:"loginScreen_getStarted",children:"Get Started"})]})})]})})]})};var $j=function(){var e=b(Tt);return(0,ur.jsxs)("div",{className:"pscreen",children:[(0,ur.jsx)(sr,{}),(0,ur.jsxs)("div",{className:"pbody",children:[(0,ur.jsx)("h1",{children:"Edit profile"}),(0,ur.jsxs)("div",{className:"pinfo",children:[(0,ur.jsx)("img",{src:"https://wallpapers.com/images/hd/netflix-profile-pictures-400-x-400-88wkdmjrorckekha.jpg",alt:""}),(0,ur.jsxs)("div",{className:"pdetails",children:[(0,ur.jsx)("h2",{children:e.email}),(0,ur.jsxs)("div",{className:"pplans",children:[(0,ur.jsx)("h3",{children:"Plans "}),(0,ur.jsx)("h5",{children:"Use Stripe for Payment process"}),(0,ur.jsx)("button",{onClick:function(){return Hj.signOut()},className:"psignout",children:"Sign Out"})]})]})]})]})]})};var Jj=function(){var e=b(Tt),n=P();return(0,t.useEffect)((function(){return Hj.onAuthStateChanged((function(e){n(e?St({uid:e.uid,email:e.email}):It())}))}),[n]),(0,ur.jsx)("div",{className:"app",children:(0,ur.jsx)(Na,{children:(0,ur.jsx)(ir,{children:e?(0,ur.jsxs)(ur.Fragment,{children:[(0,ur.jsx)(nr,{path:"/profile",element:(0,ur.jsx)($j,{})}),(0,ur.jsx)(nr,{path:"/",element:(0,ur.jsx)(Ta,{})})]}):(0,ur.jsx)(nr,{path:"/",element:(0,ur.jsx)(Yj,{})})})})})},Xj=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))},Zj=document.getElementById("root");(0,i.s)(Zj).render((0,ur.jsx)(t.StrictMode,{children:(0,ur.jsx)(S,{store:Ct,children:(0,ur.jsx)(Jj,{})})})),Xj()}()}();
//# sourceMappingURL=main.0a5fc40f.js.map